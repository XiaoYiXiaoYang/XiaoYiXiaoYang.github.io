{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"themes/matery/source/yteng.jpg","path":"yteng.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/css/my.css","path":"css/my.css","modified":1,"renderable":1},{"_id":"themes/matery/source/css/gitment.css","path":"css/gitment.css","modified":1,"renderable":1},{"_id":"themes/matery/source/css/my-gitalk.css","path":"css/my-gitalk.css","modified":1,"renderable":1},{"_id":"themes/matery/source/css/matery.css","path":"css/matery.css","modified":1,"renderable":1},{"_id":"themes/matery/source/js/matery.js","path":"js/matery.js","modified":1,"renderable":1},{"_id":"themes/matery/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/yteng.jpg","path":"medias/yteng.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/aplayer/APlayer.min.css","path":"libs/aplayer/APlayer.min.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/aos/aos.css","path":"libs/aos/aos.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/aos/aos.js","path":"libs/aos/aos.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/aplayer/APlayer.min.js","path":"libs/aplayer/APlayer.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/codeBlock/codeBlockFuction.js","path":"libs/codeBlock/codeBlockFuction.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/codeBlock/codeCopy.js","path":"libs/codeBlock/codeCopy.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/codeBlock/codeLang.js","path":"libs/codeBlock/codeLang.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/codeBlock/codeShrink.js","path":"libs/codeBlock/codeShrink.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/codeBlock/clipboard.min.js","path":"libs/codeBlock/clipboard.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/cryptojs/crypto-js.min.js","path":"libs/cryptojs/crypto-js.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/gitment/gitment-default.css","path":"libs/gitment/gitment-default.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/dplayer/DPlayer.min.css","path":"libs/dplayer/DPlayer.min.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/gitalk/gitalk.css","path":"libs/gitalk/gitalk.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/jqcloud/jqcloud-1.0.4.min.js","path":"libs/jqcloud/jqcloud-1.0.4.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/jqcloud/jqcloud.css","path":"libs/jqcloud/jqcloud.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/others/busuanzi.pure.mini.js","path":"libs/others/busuanzi.pure.mini.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/masonry/masonry.pkgd.min.js","path":"libs/masonry/masonry.pkgd.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/others/clicklove.js","path":"libs/others/clicklove.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/others/explosion.min.js","path":"libs/others/explosion.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/others/text.js","path":"libs/others/text.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/others/snow.js","path":"libs/others/snow.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/others/fireworks.js","path":"libs/others/fireworks.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/scrollprogress/scrollProgress.min.js","path":"libs/scrollprogress/scrollProgress.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/tocbot/tocbot.css","path":"libs/tocbot/tocbot.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/tocbot/tocbot.min.js","path":"libs/tocbot/tocbot.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/golang.jpeg","path":"medias/files/golang.jpeg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/kafka-topic-partition.jpg","path":"medias/files/kafka-topic-partition.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/wsl.jpg","path":"medias/files/wsl.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/reward/wechat.png","path":"medias/reward/wechat.png","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/animate/animate.min.css","path":"libs/animate/animate.min.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/dplayer/DPlayer.min.js","path":"libs/dplayer/DPlayer.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/gitment/gitment.js","path":"libs/gitment/gitment.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/jquery/jquery-2.2.0.min.js","path":"libs/jquery/jquery-2.2.0.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/valine/Valine.min.js","path":"libs/valine/Valine.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/avatars/myzhihu.png","path":"medias/avatars/myzhihu.png","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/24.jpg","path":"medias/featureimages/24.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/28.jpg","path":"medias/featureimages/28.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/linked-list.png","path":"medias/files/linked-list.png","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/ovn.jpg","path":"medias/files/ovn.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/ovs_vlan.jpg","path":"medias/files/ovs_vlan.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/reward/alipay.jpg","path":"medias/reward/alipay.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/awesome/css/font-awesome.min.css","path":"libs/awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/fonts/lg.eot","path":"libs/lightGallery/fonts/lg.eot","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/fonts/lg.woff","path":"libs/lightGallery/fonts/lg.woff","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/css/lightgallery.min.css","path":"libs/lightGallery/css/lightgallery.min.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/fonts/lg.ttf","path":"libs/lightGallery/fonts/lg.ttf","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/fonts/lg.svg","path":"libs/lightGallery/fonts/lg.svg","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/img/loading.gif","path":"libs/lightGallery/img/loading.gif","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/img/video-play.png","path":"libs/lightGallery/img/video-play.png","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/img/vimeo-play.png","path":"libs/lightGallery/img/vimeo-play.png","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/img/youtube-play.png","path":"libs/lightGallery/img/youtube-play.png","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/materialize/materialize.min.css","path":"libs/materialize/materialize.min.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/materialize/materialize.min.js","path":"libs/materialize/materialize.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/share/css/share.min.css","path":"libs/share/css/share.min.css","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/share/js/jquery.share.min.js","path":"libs/share/js/jquery.share.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/share/js/social-share.min.js","path":"libs/share/js/social-share.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/share/fonts/iconfont.eot","path":"libs/share/fonts/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/share/fonts/iconfont.svg","path":"libs/share/fonts/iconfont.svg","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/valine/av-min.js","path":"libs/valine/av-min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/share/fonts/iconfont.woff","path":"libs/share/fonts/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/share/fonts/iconfont.ttf","path":"libs/share/fonts/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/12.jpg","path":"medias/featureimages/12.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/25.jpg","path":"medias/featureimages/25.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/27.jpg","path":"medias/featureimages/27.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/music/avatars/tiantangdemogui.jpg","path":"medias/music/avatars/tiantangdemogui.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/music/avatars/yequ.jpg","path":"medias/music/avatars/yequ.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/music/avatars/yiluxiangbei.jpg","path":"medias/music/avatars/yiluxiangbei.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/kafka-producer-consumer.png","path":"medias/files/kafka-producer-consumer.png","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.woff2","path":"libs/awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.woff","path":"libs/awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/gitalk/gitalk.min.js","path":"libs/gitalk/gitalk.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/banner/0.jpg","path":"medias/banner/0.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/banner/6.jpg","path":"medias/banner/6.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/21.jpg","path":"medias/featureimages/21.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/algorithm-dp.jpg","path":"medias/files/algorithm-dp.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/files/hexo.png","path":"medias/files/hexo.png","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/awesome/fonts/FontAwesome.otf","path":"libs/awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.ttf","path":"libs/awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.eot","path":"libs/awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/lightGallery/js/lightgallery-all.min.js","path":"libs/lightGallery/js/lightgallery-all.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/23.jpg","path":"medias/featureimages/23.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/26.jpg","path":"medias/featureimages/26.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/3.jpg","path":"medias/featureimages/3.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/9.jpg","path":"medias/featureimages/9.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/15.jpg","path":"medias/featureimages/15.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/18.jpg","path":"medias/featureimages/18.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/8.jpg","path":"medias/featureimages/8.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/14.jpg","path":"medias/featureimages/14.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/16.jpg","path":"medias/featureimages/16.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/19.jpg","path":"medias/featureimages/19.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/music/avatars/daoshu.jpg","path":"medias/music/avatars/daoshu.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/banner/3q.jpg","path":"medias/banner/3q.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/2.jpg","path":"medias/featureimages/2.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/4.jpg","path":"medias/featureimages/4.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/6.jpg","path":"medias/featureimages/6.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/banner/4.jpg","path":"medias/banner/4.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/banner/5.jpg","path":"medias/banner/5.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/0.jpg","path":"medias/featureimages/0.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/7.jpg","path":"medias/featureimages/7.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/17.jpg","path":"medias/featureimages/17.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/1.jpg","path":"medias/featureimages/1.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/20.jpg","path":"medias/featureimages/20.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/22.jpg","path":"medias/featureimages/22.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.svg","path":"libs/awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/banner/3.jpg","path":"medias/banner/3.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/5.jpg","path":"medias/featureimages/5.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/libs/echarts/echarts.min.js","path":"libs/echarts/echarts.min.js","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/10.jpg","path":"medias/featureimages/10.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/banner/1.jpg","path":"medias/banner/1.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/banner/2.jpg","path":"medias/banner/2.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/11.jpg","path":"medias/featureimages/11.jpg","modified":1,"renderable":1},{"_id":"themes/matery/source/medias/featureimages/13.jpg","path":"medias/featureimages/13.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"source/404.md","hash":"7e054c4ed489e0381e0f1ac91724ec5875bcc821","modified":1653189952101},{"_id":"source/CNAME","hash":"b8bda8a8a2b7d9895527115fab04a267cf53cc8e","modified":1653185597363},{"_id":"themes/matery/.gitignore","hash":"eaa3d84cb77d92a21b111fd1e37f53edc1ff9de0","modified":1653185597374},{"_id":"themes/matery/README_CN.md","hash":"a94324950e0299bcfcbc106cf2ca65c93e1fe843","modified":1653185597379},{"_id":"themes/matery/README.md","hash":"7ef16198a2c5ff580f006582286354caf160c7fe","modified":1653198189775},{"_id":"themes/matery/LICENSE","hash":"b314c7ebb7d599944981908b7f3ed33a30e78f3a","modified":1653185597374},{"_id":"themes/matery/_config.yml","hash":"97905be86433b4d13bc05533decd3b379e96a4a2","modified":1655643178735},{"_id":"source/about/index.md","hash":"c1ca8e88b3cee1bff6ea56338c5c72a830bb9de3","modified":1653194161945},{"_id":"source/archives/index.md","hash":"30a0e3a59be650ae34d7bb86ac7da53e21e9cf5b","modified":1653185597363},{"_id":"source/_data/musics.json","hash":"32bc061f34721b4ff55f880de1d0ec5787acd2f9","modified":1653185597363},{"_id":"source/categories/index.md","hash":"67687d3f908737f7c680f096b3e80d9412f23b0e","modified":1653185597374},{"_id":"source/_posts/algorithm-dp.md","hash":"8b9d55ac3b401c52867926580edc4695e3dac5c2","modified":1675567706612},{"_id":"source/_data/friends.json","hash":"39dd1a22df5fa66e439adb166cd4186a23a7fc8a","modified":1653192199625},{"_id":"source/_posts/algorithm-linked-list.md","hash":"734b1769220e0e30fe8022cff5c7a7f35873fa59","modified":1681018045589},{"_id":"source/_posts/hello-go.md","hash":"5d169e2e1ced5b8c39cfcb81bfcc2afc5b0339ef","modified":1657030989893},{"_id":"source/_posts/hexo_new.md","hash":"4994dbbd999e8450fd3e8f9db8b16a697af8395a","modified":1656944715525},{"_id":"source/_posts/kafka-producer-consumer.md","hash":"53fb42656b700ee22e54ff0619dae744f28a21f7","modified":1667134998388},{"_id":"source/_posts/kafka-topic-and-partition.md","hash":"f81f8438e274f42dfaeb52d50cae69ceb06b7f4f","modified":1669533903759},{"_id":"source/_posts/ovn-ls-pipeline.md","hash":"f5403a28de9547f12fa4a698c690704456d975bf","modified":1665897068141},{"_id":"source/_posts/ovs-port-vlan.md","hash":"74a2f7c369077edbeefd8d18b7248d99d124fd6f","modified":1664289246756},{"_id":"source/_posts/win11_wsl.md","hash":"59c3baf0a6d1ea69b73ae387e1fca9f4610129db","modified":1656944705788},{"_id":"source/friends/index.md","hash":"0ad4aaf3467380fc8ec354fe2fe76b0331bfeead","modified":1653194981789},{"_id":"source/tags/index.md","hash":"fe3d7ecc91b81b062a6a60c06859dc24b9d704ac","modified":1653185597374},{"_id":"themes/matery/languages/default.yml","hash":"527c795b8c41fe62bf35603ffebfa6d4a7929a2c","modified":1653185597379},{"_id":"themes/matery/languages/zh-CN.yml","hash":"f31748601349fbc98166d8fae35f2fc24da787b6","modified":1653195443594},{"_id":"themes/matery/layout/404.ejs","hash":"f08a0f507b36f3652520a41381f71167488405c7","modified":1653185597379},{"_id":"themes/matery/layout/about.ejs","hash":"e87752e59f021b5139b1155a264da11ab469a9aa","modified":1653185597395},{"_id":"themes/matery/layout/categories.ejs","hash":"c431e772d0f7700592228bbd9502793bdc28a893","modified":1653185597403},{"_id":"themes/matery/layout/archive.ejs","hash":"1b5023571894404d75caffa28128fc9c49f9095d","modified":1653185597403},{"_id":"themes/matery/layout/contact.ejs","hash":"1513c5a40b7cc0b6e5854cf8c3253958bcb486cb","modified":1653185597403},{"_id":"themes/matery/layout/friends.ejs","hash":"895e40a864796680fbef581e4b09f252fbdd963a","modified":1653185597403},{"_id":"themes/matery/layout/layout.ejs","hash":"e5533430177407e67c7531207651095170f01d96","modified":1653197897839},{"_id":"themes/matery/layout/category.ejs","hash":"2d421e10c3b8fd2c4f725e5eaa967c4a1429c707","modified":1653185597403},{"_id":"themes/matery/layout/index.ejs","hash":"7fc5a6c4f0229c0be43b7d1315524c468346fbb8","modified":1653185597403},{"_id":"themes/matery/layout/tag.ejs","hash":"5cdf3a1d72f54285ee9cb826fd0e4a0449093215","modified":1653185597403},{"_id":"themes/matery/layout/tags.ejs","hash":"851c0ee599e91e7b1d657673859e8b6ff79cf50b","modified":1653185597403},{"_id":"themes/matery/layout/post.ejs","hash":"f1a35f32e5901e167ae9a750e7cb3635549cea2e","modified":1653185597403},{"_id":"themes/matery/source/yteng.jpg","hash":"4f8490d1cee76eb0a3bccf880e26f2adcbf617f5","modified":1653184810238},{"_id":"source/_posts/kafka-topic-and-partition/img-20221030212257.png","hash":"ebbbd5f0885318022ecd78b833722db72478b0ee","modified":1667136177347},{"_id":"source/_posts/ovs-port-vlan/img-20220705225523.png","hash":"4b4d268733022d0ea4a2ee30d3f1c2e087fef42a","modified":1657032923935},{"_id":"source/_posts/ovs-port-vlan/img-20220707222806.png","hash":"498a37bc50797be4b8e08ffe1b894827d533d887","modified":1657204086472},{"_id":"source/_posts/ovs-port-vlan/img-20220707222722.png","hash":"86d15213dc6c452f4bbe35936427d11e77a65fcc","modified":1657204042608},{"_id":"source/_posts/ovs-port-vlan/img-20220707221449.png","hash":"45078a420e2d1f408844c1d615c7a38ccc129e06","modified":1657203289274},{"_id":"source/_posts/ovs-port-vlan/img-20220707222905.png","hash":"9cc10ec38e416a1c0c381e7ce89681b36ca07a03","modified":1657204145598},{"_id":"source/_posts/ovs-port-vlan/img-20220707223104.png","hash":"f15a174ad0e2f4401f972e320768c2bdeef663ac","modified":1657204264884},{"_id":"source/_posts/ovs-port-vlan/img-20220710223431.png","hash":"b44167fd66e7dd71f9ec1302ee9129008dcc54d5","modified":1657463671376},{"_id":"source/_posts/ovs-port-vlan/img-20220710223519.png","hash":"9061ee7dc15f29010ada1d4ea033bc0ea70e6d2e","modified":1657463720012},{"_id":"source/_posts/ovs-port-vlan/img-20220711222607.png","hash":"c85ecfcd76b20da59e2b6da8de59bf6705ac572d","modified":1657549567442},{"_id":"source/_posts/win11_wsl/img-20220625215308.png","hash":"31123ccda88538e64176b25a785418d013ac8bb9","modified":1656165189151},{"_id":"source/_posts/win11_wsl/img-20220625215633.png","hash":"b1d99c6214115e647748ac031a9897828dec50c1","modified":1656165394840},{"_id":"source/_posts/win11_wsl/img-20220625221705.png","hash":"b00c6bcbb6951e578eb8dc92bff52dd1a4ddd67b","modified":1656166626055},{"_id":"themes/matery/layout/_partial/back-top.ejs","hash":"cb99dc352397ec5d0765794d7b8884972e61973b","modified":1653185597379},{"_id":"themes/matery/layout/_partial/bg-cover.ejs","hash":"d5a7b9bb96e04c0a3485dd873748f19c50a6a04f","modified":1653185597383},{"_id":"themes/matery/layout/_partial/bg-cover-content.ejs","hash":"a408fc9f815c56a25ec3dbfdb492a774418cddb4","modified":1653485354153},{"_id":"themes/matery/layout/_partial/disqus.ejs","hash":"42dda8e67f7f09d148347887e52f18aea546df26","modified":1653185597383},{"_id":"themes/matery/layout/_partial/footer.ejs","hash":"ffabca73db835b2324d7fc20c02e09f2cafed29b","modified":1653195190701},{"_id":"themes/matery/layout/_partial/gitalk.ejs","hash":"a3a140e6aeeb6f289e4b821a577ef548267f3de1","modified":1653185597385},{"_id":"themes/matery/layout/_partial/gitment.ejs","hash":"d8c40dbc8106b5bc53ceb727ad968c1d8f234261","modified":1653185597386},{"_id":"themes/matery/layout/_partial/google-analytics.ejs","hash":"890c8f04c1f4905dfceb3ea9fd6efdd040d79c01","modified":1653185597387},{"_id":"themes/matery/layout/_partial/github-link.ejs","hash":"fd4034bca2eb3987dcf113e6477260bee97eb1e7","modified":1653185597386},{"_id":"themes/matery/layout/_partial/head.ejs","hash":"fb572df037b5a6eb563912caa1f1967ca835a70a","modified":1653185597387},{"_id":"themes/matery/layout/_partial/index-cover.ejs","hash":"d4042e5521ceb5f3255cd4455ac7ccd227fee6df","modified":1653185597387},{"_id":"themes/matery/layout/_partial/mobile-nav.ejs","hash":"e761f0104fbf431671bbe6bebc91ca82f737f4d2","modified":1653185597387},{"_id":"themes/matery/layout/_partial/header.ejs","hash":"821e1af65990521c9e0288178d8e5b18c73a9cab","modified":1653185597387},{"_id":"themes/matery/layout/_partial/livere.ejs","hash":"42728561c09589f79b698eb059ab4def53ed3642","modified":1653185597387},{"_id":"themes/matery/layout/_partial/navigation.ejs","hash":"3a82fcb6f31d69971cb564985842c14ac02cdca0","modified":1653185597387},{"_id":"themes/matery/layout/_partial/post-statis.ejs","hash":"3b42900247d5ea4ea5b68e2be44420a0d54785ad","modified":1653185597387},{"_id":"themes/matery/layout/_partial/paging.ejs","hash":"dfdeea9c59d157acb851d4bf44bf95f81787523c","modified":1653185597387},{"_id":"themes/matery/layout/_partial/post-detail.ejs","hash":"3f208f33e4e12becdb8323e6e64e20ad60c3fb2a","modified":1653185597387},{"_id":"themes/matery/layout/_partial/post-cover.ejs","hash":"166c0b9753f3f913bd801e82ad5b268004be198d","modified":1653185597387},{"_id":"themes/matery/layout/_partial/post-detail-toc.ejs","hash":"82cb8090cde663fa7ad67418a802997b3057e957","modified":1653185597387},{"_id":"themes/matery/layout/_partial/search.ejs","hash":"e859fe6e0259e0c123cb7ceda6e4cac836318ffc","modified":1653185597387},{"_id":"themes/matery/layout/_partial/prev-next.ejs","hash":"4e73f10eacb5d00a0681cb44fe5c039cd8ab03cd","modified":1653185597387},{"_id":"themes/matery/layout/_partial/share.ejs","hash":"0f2e1e27d21492cf228e786daead985b1e1dcea4","modified":1653185597387},{"_id":"themes/matery/layout/_partial/reward.ejs","hash":"73624d9db81e87ff0c12310bb873fbd0b5221021","modified":1653185597387},{"_id":"themes/matery/layout/_partial/reprint-statement.ejs","hash":"f85a222ec3f9bc27eb7978015e63a16514b38791","modified":1653185597387},{"_id":"themes/matery/layout/_partial/valine.ejs","hash":"c3039180ddb2eb17e724b8441e5f93e79859aef7","modified":1653185597395},{"_id":"themes/matery/layout/_widget/dream.ejs","hash":"6ae58a57b83a5999d0b6a737ec868f084d208f89","modified":1653185597395},{"_id":"themes/matery/layout/_partial/social-link.ejs","hash":"e2865b3003ec07892e9112692e7ec786ee926ae8","modified":1653185597395},{"_id":"themes/matery/layout/_widget/category-cloud.ejs","hash":"b2b22d4fc4e46b051f67216c391f629f4ff552b5","modified":1653185597395},{"_id":"themes/matery/layout/_widget/category-radar.ejs","hash":"5284712d84bbaa4f0d88026ac3ec5a8c13e00056","modified":1653185597395},{"_id":"themes/matery/layout/_widget/my-gallery.ejs","hash":"9ea672db65f1e5b8fad1ffafb1614f25adc97e63","modified":1653185597395},{"_id":"themes/matery/layout/_widget/music.ejs","hash":"fc50cb4bbc1f4d0e4c9f5941f1c3c74bea742db7","modified":1653185597395},{"_id":"themes/matery/layout/_widget/my-projects.ejs","hash":"785cb588a31215876f6737213054ba0e8552fff0","modified":1653185597395},{"_id":"themes/matery/layout/_widget/post-calendar.ejs","hash":"4608af6151f0e32f668c89f09343748340021478","modified":1653185597395},{"_id":"themes/matery/layout/_widget/my-skills.ejs","hash":"c6f713316ce75ad08ac5d1587bd8ce42e894e9ae","modified":1653185597395},{"_id":"themes/matery/layout/_widget/recommend.ejs","hash":"d439d86818de179d64965d4f7f5fa56147fd9221","modified":1653185597395},{"_id":"themes/matery/layout/_widget/post-charts.ejs","hash":"0aaf0a111b9aa07ff37f6286eeac5506283f47f8","modified":1653185597395},{"_id":"themes/matery/layout/_widget/video.ejs","hash":"05f5e2acace5730cdf7bed650375ad88f6b5d1b7","modified":1653185597395},{"_id":"themes/matery/layout/_widget/tag-wordcloud.ejs","hash":"bf604fe9c435f0fb9a559cac9c35772579b590e8","modified":1653185597395},{"_id":"themes/matery/layout/_widget/tag-cloud.ejs","hash":"6310903eb0e434d6f9a59ca669aab7fae38d4797","modified":1653185597395},{"_id":"themes/matery/source/css/my.css","hash":"37683a9f11c68903a53e2b8593ca8c095a721896","modified":1653185597403},{"_id":"themes/matery/source/css/gitment.css","hash":"d5ef623065d1fbc897119f7b70ccf7563e329917","modified":1653185597403},{"_id":"themes/matery/source/css/my-gitalk.css","hash":"4e3e855767ac5a48b13af1d6a42df13d8975e03f","modified":1653185597403},{"_id":"themes/matery/source/css/matery.css","hash":"0d345a72318fd7aadcb6fcaa6f3abac94b91001c","modified":1653185597403},{"_id":"themes/matery/source/js/matery.js","hash":"208b7806caa943c115aa0825c9c72a0781404775","modified":1653185597411},{"_id":"themes/matery/source/js/search.js","hash":"77ecae23dd3edd8ad962c5b12954652bb2f7a1b6","modified":1653185597411},{"_id":"source/_posts/kafka-producer-consumer/producer-structure.jpg","hash":"32789c2d2297fde14c33a08c1e4803579d8e7f48","modified":1653180574746},{"_id":"source/_posts/kafka-topic-and-partition/img-20221030211533.png","hash":"fc490ac8378fe775bc659c5bda3903994ae62ab2","modified":1667135734051},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106230222.png","hash":"7212f702cb2b2c851c5ba240d537766204810d5e","modified":1667746943076},{"_id":"source/_posts/ovs-port-vlan/img-20220710224012.png","hash":"66d869d27bdd2053c11c2ae9edfcde0562f3efeb","modified":1657464012675},{"_id":"source/_posts/ovs-port-vlan/img-20220710231542.png","hash":"aa056e7b4114d24a2a8b36aef6ea049a56ee6ef7","modified":1657466143049},{"_id":"source/_posts/ovs-port-vlan/img-20220710231215.png","hash":"36ced1ab27c3e25ef2bd73d3201bf8975b9efb24","modified":1657465935621},{"_id":"source/_posts/ovs-port-vlan/img-20220713213515.png","hash":"a8f4dbb7ce18dfdcf0c047ff22baa2ec9dfce4d5","modified":1657719316048},{"_id":"source/_posts/ovs-port-vlan/img-20220713213553.png","hash":"9be52bf4e9049eba81dd2797679e8e482c7c07bd","modified":1657719353920},{"_id":"source/_posts/ovs-port-vlan/img-20220713213626.png","hash":"83ee4f0c8cff42908a8222429abf1a55ec7b28bf","modified":1657719387052},{"_id":"source/_posts/ovs-port-vlan/img-20220713213656.png","hash":"ddf26a07d857955983eca96803b1e33a82952fc8","modified":1657719416683},{"_id":"source/_posts/ovs-port-vlan/img-20220713215316.png","hash":"7f8b1e00266c29cb0eb259e19a3a2be290e6a8f1","modified":1657720396715},{"_id":"source/_posts/ovs-port-vlan/img-20220713220442.png","hash":"4a92dcb110fa37ddb8b847e112f7d0d8007eb997","modified":1657721083228},{"_id":"source/_posts/win11_wsl/img-20220625220129.png","hash":"af09b7098035dd29134e0c267086a50800974164","modified":1656165690896},{"_id":"source/_posts/win11_wsl/img-20220625220014.png","hash":"40235697f87b378ba6e13c745e6b925d0ada0545","modified":1656165615829},{"_id":"source/_posts/kafka-producer-consumer/img-20221030201350.png","hash":"e94ba813448992501f1b097d2a42a5e84450258d","modified":1667132031002},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222336.png","hash":"04dc71ad3155c7e8733ac145f0647afdd7404a2e","modified":1667744616796},{"_id":"themes/matery/source/medias/yteng.jpg","hash":"4f8490d1cee76eb0a3bccf880e26f2adcbf617f5","modified":1653184810238},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222544.png","hash":"bb23f4692dd9488e7cc4e3be1dea1e41d7837ddc","modified":1667744745207},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106230140.png","hash":"c5f1b22fd7c5fd773c26b1045e980940eb74381e","modified":1667746900961},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106223639.png","hash":"da4fe4b016a25ed9ff18951efb7ab56cd8916384","modified":1667745399686},{"_id":"source/_posts/ovs-port-vlan/img-20220710224207.png","hash":"875d13ff86905e68fcb2427045801f6f56cec7a9","modified":1657464127262},{"_id":"themes/matery/source/libs/aplayer/APlayer.min.css","hash":"7f4f8913f2d46ade2def5134e2cc8684a4b87939","modified":1653185597411},{"_id":"themes/matery/source/libs/aos/aos.css","hash":"ded9739f803d114c9168d3351fded72b3b478b4c","modified":1653185597411},{"_id":"themes/matery/source/libs/aos/aos.js","hash":"5a8e6d07ffa55642418ab3fd4b263aa08284b77a","modified":1653185597411},{"_id":"themes/matery/source/libs/aplayer/APlayer.min.js","hash":"70c0c4a9bf698747b7c058c21287ad617355e5dd","modified":1653185597411},{"_id":"themes/matery/source/libs/codeBlock/codeBlockFuction.js","hash":"c7ab06d27a525b15b1eb69027135269e9b9132fb","modified":1653185597427},{"_id":"themes/matery/source/libs/codeBlock/codeCopy.js","hash":"b74a381adf6ef8404d6a0452c2b9f44b47219c80","modified":1653185597427},{"_id":"themes/matery/source/libs/codeBlock/codeLang.js","hash":"ea8b51e4d75e7b2cd63e4d5bcb8db2cf7f23f5db","modified":1653185597427},{"_id":"themes/matery/source/libs/codeBlock/codeShrink.js","hash":"215910dc8f63fd50b97957e5fcdc8480aa2728cb","modified":1653185597427},{"_id":"themes/matery/source/libs/codeBlock/clipboard.min.js","hash":"9cd57c67fbd3e3067f80793ef8445f5ff7783563","modified":1653185597427},{"_id":"themes/matery/source/libs/cryptojs/crypto-js.min.js","hash":"33810b2b757fc4327bc1d3b83bb5e0d3dc1fec5b","modified":1653185597427},{"_id":"themes/matery/source/libs/gitment/gitment-default.css","hash":"a0625d8b432af8bdc820f8768d36cde439e7257c","modified":1653185597435},{"_id":"themes/matery/source/libs/dplayer/DPlayer.min.css","hash":"5d52d3b34fceb9d7e11f1beaf7ed380b4249dec4","modified":1653185597427},{"_id":"themes/matery/source/libs/gitalk/gitalk.css","hash":"021898a16279ac2ffe75af4f902fab2a0a39f11a","modified":1653185597435},{"_id":"themes/matery/source/libs/jqcloud/jqcloud-1.0.4.min.js","hash":"26849509f196a2d21bbfd15696e5d5153163b8f1","modified":1653185597443},{"_id":"themes/matery/source/libs/jqcloud/jqcloud.css","hash":"4e6538c8312aeeab845d361c37a8c1a0931241f0","modified":1653185597443},{"_id":"themes/matery/source/libs/others/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1653185597451},{"_id":"themes/matery/source/libs/masonry/masonry.pkgd.min.js","hash":"f81cd7bfcf7aa2d043bd3e6077df42656fc44b82","modified":1653185597451},{"_id":"themes/matery/source/libs/others/clicklove.js","hash":"6a39b8c683ba5dcd92f70c6ab45d1cfac3213e8e","modified":1653185597451},{"_id":"themes/matery/source/libs/others/explosion.min.js","hash":"417b68e2cf2c6de2119c57626f4412105a8457f5","modified":1653185597451},{"_id":"themes/matery/source/libs/others/text.js","hash":"1791782cde0d1e4197f2ed58ecb7dd6aefddd169","modified":1653185597459},{"_id":"themes/matery/source/libs/others/snow.js","hash":"b393f069781eef788a0ae66b2681cece8fea2851","modified":1653185597459},{"_id":"themes/matery/source/libs/others/fireworks.js","hash":"53981959bc6def4a85bbbb41b07e4b1474a2124d","modified":1653185597451},{"_id":"themes/matery/source/libs/scrollprogress/scrollProgress.min.js","hash":"777ffe5d07e85a14fbe97d846f45ffc0087251cc","modified":1653185597459},{"_id":"themes/matery/source/libs/tocbot/tocbot.css","hash":"f646f2bb75bcd1eb65b2788ac7bf15d4fd243ce9","modified":1653185597459},{"_id":"themes/matery/source/libs/tocbot/tocbot.min.js","hash":"5ec27317f0270b8cf6b884c6f12025700b9a565c","modified":1653185597459},{"_id":"themes/matery/source/medias/files/golang.jpeg","hash":"6c49a9400a0c8a237714e7f93a8497ae590e38d5","modified":1653180574698},{"_id":"themes/matery/source/medias/files/kafka-topic-partition.jpg","hash":"864fdaca662f6e70734061d165553e7c86f7a147","modified":1667134923752},{"_id":"source/_posts/kafka-producer-consumer/img-20221016191323.png","hash":"1e7fd3dc563c83019b01c845f2b76348d570db64","modified":1665918804428},{"_id":"themes/matery/source/medias/files/wsl.jpg","hash":"6700d64cc0e1f48d2936343bacd1d6b45e286e9d","modified":1656162914108},{"_id":"source/_posts/kafka-producer-consumer/img-20221030190716.png","hash":"30838f3ebdebc696af26fd152e840871e9603282","modified":1667128037055},{"_id":"themes/matery/source/medias/reward/wechat.png","hash":"61eb27bc4ec65f4f116d34740903fb5af75bf561","modified":1653185597607},{"_id":"source/_posts/kafka-topic-and-partition/img-20221030211753.png","hash":"9424440a19510245f397f153d1d2622d572e1265","modified":1667135873640},{"_id":"source/_posts/kafka-topic-and-partition/img-20221030211824.png","hash":"6d1f6abcd328c251ebe56e84caff18b3d4cfea67","modified":1667135905024},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222348.png","hash":"24ea616af61bad505ce043ba52462ca59f87ac3d","modified":1667744628451},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222536.png","hash":"56e2b82b4176bb29373e2595e545e4262b2ba8d9","modified":1667744736413},{"_id":"source/_posts/ovs-port-vlan/img-20220710225805.png","hash":"478c0e1179a2e7ec5c3d7a1f77f437a6b461c5ff","modified":1657465085502},{"_id":"source/_posts/ovs-port-vlan/img-20220710230349.png","hash":"8f7df7bef01464205e538ff4130b7130eba2e223","modified":1657465429573},{"_id":"source/_posts/ovs-port-vlan/img-20220711222511.png","hash":"b0edb816180027f8fefbae6c5e4c7ce67097cd75","modified":1657549511366},{"_id":"source/_posts/ovs-port-vlan/img-20220713200925.png","hash":"3fe26afff4cb389053ee5de02bb3306e29462c6e","modified":1657714165566},{"_id":"source/_posts/ovs-port-vlan/img-20220713203933.png","hash":"1bd14a7a4ea1cfca6d9fb0e9769b04ae5b112486","modified":1657715973922},{"_id":"source/_posts/ovs-port-vlan/img-20220713205845.png","hash":"8416236ef384b52c8ba4c7a914534d38ade20a47","modified":1657717125501},{"_id":"source/_posts/ovs-port-vlan/img-20220713212741.png","hash":"17f8eb5409c1bc5ea6df298c2123a8b731dc7e46","modified":1657718861554},{"_id":"source/_posts/ovs-port-vlan/img-20220713220011.png","hash":"144ea6bb113907c903fd546db137a0e00f241d82","modified":1657720812079},{"_id":"themes/matery/source/libs/animate/animate.min.css","hash":"5dfcbcee866e9dc564916416281885f3e320871e","modified":1653185597411},{"_id":"themes/matery/source/libs/dplayer/DPlayer.min.js","hash":"82276be41d2001e820020a219b90ad5b026302d1","modified":1653185597427},{"_id":"themes/matery/source/libs/gitment/gitment.js","hash":"5a13983930b019450e4fe01a407c64b3dd316be4","modified":1653185597443},{"_id":"themes/matery/source/libs/jquery/jquery-2.2.0.min.js","hash":"7a551393b8360731104fdef1af36a6f3638f5855","modified":1653185597443},{"_id":"themes/matery/source/libs/valine/Valine.min.js","hash":"f1558f12d96a352e490166d543a8e821dd3bb2bc","modified":1653185597467},{"_id":"themes/matery/source/medias/avatars/myzhihu.png","hash":"992e0d803160d2ae867be5eb0032d324d1cedffb","modified":1653185597500},{"_id":"themes/matery/source/medias/featureimages/24.jpg","hash":"a09e23a33704d69aed155b0fdd866f69931ca3eb","modified":1653488431372},{"_id":"themes/matery/source/medias/featureimages/28.jpg","hash":"e5c69d25a305c82c5c822b04d4bc47a27e275137","modified":1653488372417},{"_id":"themes/matery/source/medias/files/linked-list.png","hash":"e6f496cdf7c1a2130a4436622d0a22428e345602","modified":1681011922876},{"_id":"themes/matery/source/medias/files/ovn.jpg","hash":"4fc733f74fe469662ed459cc9f0ca8c1418135dd","modified":1664290011490},{"_id":"themes/matery/source/medias/files/ovs_vlan.jpg","hash":"c93c6a69ee2eb36e4b0061da0aaf2ea46db260e2","modified":1657723854672},{"_id":"source/_posts/kafka-producer-consumer/img-20221030200350.png","hash":"5a693b82b62e3d2298f253a97cdf9e3d4d110f72","modified":1667131430543},{"_id":"themes/matery/source/medias/reward/alipay.jpg","hash":"9bade255a1918cfb3c3bcefbbbc8f163bf2e19e3","modified":1653185597607},{"_id":"source/_posts/kafka-producer-consumer/img-20221030193459.png","hash":"da903612b53a73611464f929f469fa03ab2f4e67","modified":1667129699355},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222237.png","hash":"16db2f5a64d7898c649b4534987a063fe678af0c","modified":1667744558137},{"_id":"source/_posts/ovs-port-vlan/img-20220710225731.png","hash":"b4d0af8811816f888492d28dcb6d690d1fcb28f9","modified":1657465051942},{"_id":"source/_posts/ovs-port-vlan/img-20220710231015.png","hash":"45d7054c387a69e9a8bfba681b469cd7f1c13770","modified":1657465816050},{"_id":"source/_posts/ovs-port-vlan/img-20220713201315.png","hash":"a1cd4d61e7c2134c53d92bd0f76f241d189dffa2","modified":1657714395581},{"_id":"source/_posts/ovs-port-vlan/img-20220713203212.png","hash":"4c584e8f819326c746f350a7bddddd91c44809a5","modified":1657715533161},{"_id":"source/_posts/ovs-port-vlan/img-20220713210138.png","hash":"d7b79b72910bae9b96fb9146dda4c75ac6ca95d4","modified":1657717298762},{"_id":"source/_posts/ovs-port-vlan/img-20220713211909.png","hash":"ed5cf5be96616c90d69f16e7744cfec7c46aa50a","modified":1657718349590},{"_id":"source/_posts/ovs-port-vlan/img-20220713212414.png","hash":"972a6c3796773f2b54872e0c6fbfeab930432acb","modified":1657718654812},{"_id":"source/_posts/ovs-port-vlan/img-20220713212418.png","hash":"972a6c3796773f2b54872e0c6fbfeab930432acb","modified":1657718659162},{"_id":"source/_posts/ovs-port-vlan/img-20220713213027.png","hash":"8107fa83e08e70903ec1ba3f22db3e055e89cf55","modified":1657719027300},{"_id":"source/_posts/ovs-port-vlan/img-20220713214218.png","hash":"3b015182168beb574bb68e5694fe2bc6b0b211fc","modified":1657719738410},{"_id":"source/_posts/ovs-port-vlan/img-20220713214451.png","hash":"8301d9c7738687dfa8364d9a401f8bca1eddabd6","modified":1657719891771},{"_id":"source/_posts/ovs-port-vlan/img-20220713214945.png","hash":"fb5f15f4d52443d4c86956bf4b3197aaf4a1459c","modified":1657720185351},{"_id":"source/_posts/ovs-port-vlan/img-20220713215748.png","hash":"2ab17b8c64149a9ee2edf60991f347e52276ae13","modified":1657720669131},{"_id":"source/_posts/ovs-port-vlan/img-20220713220356.png","hash":"638499883e82cfa74f6b516d1227220bcad9488b","modified":1657721036434},{"_id":"source/_posts/ovs-port-vlan/img-20220713221021.png","hash":"03e6776723544b10933f395228edfba3809eeb64","modified":1657721421792},{"_id":"source/_posts/ovs-port-vlan/img-20220713221726.png","hash":"1fbec75334905e14848ee74036599aa60571953a","modified":1657721846905},{"_id":"themes/matery/source/libs/awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1653185597411},{"_id":"themes/matery/source/libs/lightGallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1653185597443},{"_id":"themes/matery/source/libs/lightGallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1653185597443},{"_id":"themes/matery/source/libs/lightGallery/css/lightgallery.min.css","hash":"1b7227237f9785c66062a4811508916518e4132c","modified":1653185597443},{"_id":"themes/matery/source/libs/lightGallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1653185597443},{"_id":"themes/matery/source/libs/lightGallery/fonts/lg.svg","hash":"3480f00d284c812d623ed16a9e0ead3fb964c72e","modified":1653185597443},{"_id":"themes/matery/source/libs/lightGallery/img/loading.gif","hash":"15a76af2739482d8de7354abc6d8dc4fca8d145e","modified":1653185597443},{"_id":"themes/matery/source/libs/lightGallery/img/video-play.png","hash":"fbfdbe06aebf7d0c00da175a4810cf888d128f11","modified":1653185597443},{"_id":"themes/matery/source/libs/lightGallery/img/vimeo-play.png","hash":"1142b47de219dddfba2e712cd3189dec0c8b7bee","modified":1653185597443},{"_id":"themes/matery/source/libs/lightGallery/img/youtube-play.png","hash":"39150b45ec5fc03155b7ebeaa44f1829281788e2","modified":1653185597451},{"_id":"themes/matery/source/libs/materialize/materialize.min.css","hash":"2c27939768606603bee3b5e6c8a722596a667e60","modified":1653185597451},{"_id":"themes/matery/source/libs/materialize/materialize.min.js","hash":"c843f0dc497314574c608ca28cc742bb041786d5","modified":1653185597451},{"_id":"themes/matery/source/libs/share/css/share.min.css","hash":"7126de5cec8371e580b7b1f22512da0985cc39e5","modified":1653185597459},{"_id":"themes/matery/source/libs/share/js/jquery.share.min.js","hash":"16ce82901ca0e302cf47a35fb10f59009a5e7eb9","modified":1653185597459},{"_id":"themes/matery/source/libs/share/js/social-share.min.js","hash":"4df722bafde2c5d8faaace0d1f894798385a8793","modified":1653185597459},{"_id":"themes/matery/source/libs/share/fonts/iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1653185597459},{"_id":"themes/matery/source/libs/share/fonts/iconfont.svg","hash":"337b4f156f6d8f4beb32c32a3db46fef361cff74","modified":1653185597459},{"_id":"themes/matery/source/libs/valine/av-min.js","hash":"04c6b2782ce4610c429563110f6a20a47432fc4c","modified":1653185597467},{"_id":"themes/matery/source/libs/share/fonts/iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1653185597459},{"_id":"themes/matery/source/libs/share/fonts/iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1653185597459},{"_id":"themes/matery/source/medias/featureimages/12.jpg","hash":"75edf09467fc3d79467c69f904575651b124efce","modified":1653488110949},{"_id":"themes/matery/source/medias/featureimages/25.jpg","hash":"f8018c34b4769407d52464d3fee178706e63aed0","modified":1653488424352},{"_id":"themes/matery/source/medias/featureimages/27.jpg","hash":"dd1ba110867c7e842e4f9008d5f2d0ef147c2df8","modified":1653488406225},{"_id":"themes/matery/source/medias/music/avatars/tiantangdemogui.jpg","hash":"f005578ddb4d3d731838db89a708f39f18d50e60","modified":1653185597599},{"_id":"themes/matery/source/medias/music/avatars/yequ.jpg","hash":"103beb9ab33434b434fa37a30aecdb29db633024","modified":1653185597607},{"_id":"themes/matery/source/medias/music/avatars/yiluxiangbei.jpg","hash":"01b12e3aca7385a88412c12539e1a608a78896fa","modified":1653185597607},{"_id":"themes/matery/source/medias/files/kafka-producer-consumer.png","hash":"586f21688206ba8e04d96906bbc641ebb3db359d","modified":1665898622680},{"_id":"source/_posts/ovs-port-vlan/img-20220710231738.png","hash":"45755047e1da23e4206d54afb04082f90dbb5720","modified":1657466258304},{"_id":"source/_posts/ovs-port-vlan/img-20220711222809.png","hash":"1e8efec4b66dddd6b3adac9a3660f3639199b6fc","modified":1657549690206},{"_id":"source/_posts/ovs-port-vlan/img-20220713212047.png","hash":"49e96fcd36e2c43a9babf6d961b45a39b9671d47","modified":1657718447833},{"_id":"source/_posts/ovs-port-vlan/img-20220713212213.png","hash":"5ccb1d8fdaab33f1fd60c1a565e9970028b05a06","modified":1657718533521},{"_id":"source/_posts/ovs-port-vlan/img-20220713213800.png","hash":"9de3ce9642cdb0a91c1a89ca1e83fa96d5c62211","modified":1657719481021},{"_id":"source/_posts/ovs-port-vlan/img-20220713214125.png","hash":"9aadea49c3f59adbf98422458def5ceaa45f26ae","modified":1657719685388},{"_id":"source/_posts/ovs-port-vlan/img-20220713215625.png","hash":"afa7d05e734e8eb99c57e08ace11dc4849aad1c4","modified":1657720585954},{"_id":"source/_posts/ovs-port-vlan/img-20220713220741.png","hash":"f5a76d7fb7d25d73e63d0587c82a4cefa0f4b600","modified":1657721261563},{"_id":"source/_posts/ovs-port-vlan/img-20220713220933.png","hash":"b79f1399a14b710e4a27b9f1c4fb35e1b6ef3c4c","modified":1657721373268},{"_id":"source/_posts/ovs-port-vlan/img-20220713220829.png","hash":"33bac3da99d2d9d50fca7d3b39b3581b804c7a80","modified":1657721309714},{"_id":"source/_posts/ovs-port-vlan/img-20220713221252.png","hash":"a74da9698cf922182b082d6c1b01de21677506f5","modified":1657721572962},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1653185597427},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1653185597427},{"_id":"themes/matery/source/libs/gitalk/gitalk.min.js","hash":"f63c7c489524ccb5d95e74fcd6618116c58fb305","modified":1653185597435},{"_id":"themes/matery/source/medias/banner/0.jpg","hash":"ee3486808fac6e0fd3ccd43d626e28534c5a3c97","modified":1653485022116},{"_id":"themes/matery/source/medias/banner/6.jpg","hash":"ac7ce1a888385a9fddcfefd843c9ced601653acf","modified":1653485108846},{"_id":"themes/matery/source/medias/featureimages/21.jpg","hash":"d003307aa45b2ffd4d10a963ae768aeffe88dd1b","modified":1653488467096},{"_id":"themes/matery/source/medias/files/algorithm-dp.jpg","hash":"b8101d4675572b95d4a1d03dd4245689e9c8492a","modified":1669534470878},{"_id":"themes/matery/source/medias/files/hexo.png","hash":"e98edbfd094d4fb41d1277a96eb8fd04ee4e26d4","modified":1653485720333},{"_id":"source/_posts/kafka-producer-consumer/img-20221030202942.png","hash":"8b00c63ce44dcb55e24611278e5408444cb376a2","modified":1667132983270},{"_id":"source/_posts/ovs-port-vlan/img-20220713210045.png","hash":"fb32bd5a34149fd5fa593a9784c253ad3e9fbcde","modified":1657717246124},{"_id":"source/_posts/ovs-port-vlan/img-20220713214019.png","hash":"422c56fdda77582f3e48b4aa509989580f8b022f","modified":1657719620251},{"_id":"themes/matery/source/libs/awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1653185597419},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1653185597419},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1653185597419},{"_id":"themes/matery/source/libs/lightGallery/js/lightgallery-all.min.js","hash":"f8cd48e1fff82ecd54a7ce3e69de8dba7c92d113","modified":1653185597451},{"_id":"themes/matery/source/medias/featureimages/23.jpg","hash":"181cadfbb92b58b4bd4c7c112500088159e8197f","modified":1653488448002},{"_id":"themes/matery/source/medias/featureimages/26.jpg","hash":"65569a4ac6ecf706cc0a52e28115cc12a8aa8126","modified":1653488417693},{"_id":"themes/matery/source/medias/featureimages/3.jpg","hash":"ddbf5b36aa5f14dbe109e579ec4ec6b33176db25","modified":1653488218256},{"_id":"themes/matery/source/medias/featureimages/9.jpg","hash":"ff2f70a0e9646c7ab5cc331ec1f538bc651c3a4c","modified":1653488139922},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222301.png","hash":"dfed1a2811afe3c4d54c41052d7d57aa77fb9e35","modified":1667744581687},{"_id":"source/_posts/ovs-port-vlan/img-20220713204049.png","hash":"5ebeb3ec5ae97c66cd0a67005f1c9420df6ba0d1","modified":1657716049679},{"_id":"source/_posts/ovs-port-vlan/img-20220713213923.png","hash":"83a7f3331285e04e215397aebf3f555fcee358dd","modified":1657719564154},{"_id":"source/_posts/ovs-port-vlan/img-20220713215402.png","hash":"f5b4bd454173fcad38aedeb89e12cefb7bb9bc96","modified":1657720443158},{"_id":"source/_posts/ovs-port-vlan/img-20220706221734.png","hash":"54b062f55c1fce60af1bff4eb6dad31066f6c330","modified":1657117054424},{"_id":"source/_posts/ovs-port-vlan/img-20220713201940.png","hash":"17527470ed55b895a603dba54d5882b2d41296b2","modified":1657714780841},{"_id":"source/_posts/ovs-port-vlan/img-20220713215454.png","hash":"5232b8509e029d1d6cb92766ab243614bf393983","modified":1657720495150},{"_id":"source/_posts/ovs-port-vlan/img-20220713220628.png","hash":"50db610a669e5a94b8d0890b7d6f8c028f905cf0","modified":1657721188650},{"_id":"themes/matery/source/medias/featureimages/15.jpg","hash":"0534bd1ceedf1512d5e697553a3839799c1198ac","modified":1653488266154},{"_id":"themes/matery/source/medias/featureimages/18.jpg","hash":"841de4ec83ce9a2ca5c9c0a57a825554e8c16b8e","modified":1653488523085},{"_id":"themes/matery/source/medias/featureimages/8.jpg","hash":"e6ab6a3147453ffcc3ab7d8791b59d3449e0e21c","modified":1653488153265},{"_id":"source/_posts/kafka-producer-consumer/img-20221030202957.png","hash":"22ac7600700830772149f7c3478ac863e83c9eb0","modified":1667132997597},{"_id":"source/_posts/ovs-port-vlan/img-20220713204647.png","hash":"4bfe2c6f61421e4b5d9ada91481a912075f9340e","modified":1657716407995},{"_id":"themes/matery/source/medias/featureimages/14.jpg","hash":"eac3bb4684f357de01a88f7e8ee9727f01a6f068","modified":1653488011575},{"_id":"themes/matery/source/medias/featureimages/16.jpg","hash":"325f0aa5eb1947fb02064342deefab12c7606a80","modified":1653488512164},{"_id":"themes/matery/source/medias/featureimages/19.jpg","hash":"6b2d217ea4cb929a9797aa4c88807f619bed4adc","modified":1653488488067},{"_id":"themes/matery/source/medias/music/avatars/daoshu.jpg","hash":"eee120fdf5ccbe86aa7d51826c4c773e76e6357f","modified":1653185597599},{"_id":"source/_posts/ovs-port-vlan/img-20220713214834.png","hash":"42850463a40f6aec3601bc690b4ec9a6c1566c15","modified":1657720114474},{"_id":"themes/matery/source/medias/banner/3q.jpg","hash":"dc499c951e4ad76fc7449ee71188c16ec76a0f99","modified":1653485080692},{"_id":"themes/matery/source/medias/featureimages/2.jpg","hash":"c032d72219fa458a9390e0e744cf66634df5c53a","modified":1653488248131},{"_id":"themes/matery/source/medias/featureimages/4.jpg","hash":"368385fe4b5364cf55b83f38784cf2e9aa307d07","modified":1653488210584},{"_id":"themes/matery/source/medias/featureimages/6.jpg","hash":"1d2656b9d1236ba0a79543d1ef0e046852223575","modified":1653488182544},{"_id":"source/_posts/ovs-port-vlan/img-20220713204432.png","hash":"0d64c7ca853ba146f74f58d0e98c35db62656ef8","modified":1657716272634},{"_id":"source/_posts/ovs-port-vlan/img-20220713212843.png","hash":"cbdd2708e628a3eaabb65c23a78545f5a325dd8b","modified":1657718923920},{"_id":"source/_posts/ovs-port-vlan/img-20220713214701.png","hash":"c9e011d32fdfe622cd6847d146d241456d122acf","modified":1657720021861},{"_id":"source/_posts/ovs-port-vlan/img-20220713220151.png","hash":"2e1cb1aac668395247aa73710bfdf4dfc3a43c1a","modified":1657720912216},{"_id":"source/_posts/ovs-port-vlan/img-20220713221610.png","hash":"6728f366c68086eab1639401cff0ad380510dede","modified":1657721771034},{"_id":"themes/matery/source/medias/banner/4.jpg","hash":"ddcf1fe5d837156262fa2b42a376ec75d7f1803a","modified":1653485089451},{"_id":"themes/matery/source/medias/banner/5.jpg","hash":"a74865a5f99f6bfc3ce94ccbd1c32b1dbe47bec8","modified":1653485098503},{"_id":"themes/matery/source/medias/featureimages/0.jpg","hash":"81b456baf62adf30b6a8f6275636b079e9aaecb4","modified":1653488259335},{"_id":"themes/matery/source/medias/featureimages/7.jpg","hash":"d6b18e98a2391588bf7ef5e0e36139c43ba61bb1","modified":1653488172255},{"_id":"source/_posts/ovs-port-vlan/img-20220711223215.png","hash":"c8506a8bdd0a016a85aaf246fc6e1c45c4f50d09","modified":1657549936227},{"_id":"themes/matery/source/medias/featureimages/17.jpg","hash":"6255009817cd91a2978741bc9b3cc74521c8eaf1","modified":1653488489712},{"_id":"source/_posts/ovs-port-vlan/img-20220713221436.png","hash":"97e84bcff363dd621a679de9e418e2580b236db4","modified":1657721676573},{"_id":"themes/matery/source/medias/featureimages/1.jpg","hash":"274a79b99183cedf2f91f89b55c7cc74daf3e8d5","modified":1653487752343},{"_id":"themes/matery/source/medias/featureimages/20.jpg","hash":"59523c31eaf1b78ced6401039624639a858f8ede","modified":1653488480818},{"_id":"themes/matery/source/medias/featureimages/22.jpg","hash":"1f2a81912efda8ff591be1729657ebbcbc7d3c0a","modified":1653488453125},{"_id":"themes/matery/source/libs/awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1653185597419},{"_id":"themes/matery/source/medias/banner/3.jpg","hash":"bc1661941c4528838e2d7dba4ca8c3c2d43c0777","modified":1653485471845},{"_id":"source/_posts/ovs-port-vlan/img-20220713203016.png","hash":"5186fa065c644e5d8cee06be8c4dce11d827a367","modified":1657715416614},{"_id":"themes/matery/source/medias/featureimages/5.jpg","hash":"08196944c4ee4233d02564f7d71251f39a12a1ad","modified":1653488191134},{"_id":"themes/matery/source/libs/echarts/echarts.min.js","hash":"8789b5e4daf0029a6c88f238f10e54d01c4fce82","modified":1653185597435},{"_id":"themes/matery/source/medias/featureimages/10.jpg","hash":"a44b0c2825664bf6d0758e6a0c17b91e386c2815","modified":1653488129756},{"_id":"themes/matery/source/medias/banner/1.jpg","hash":"21049be0572739d5cd35a47aafe475ff223dd24d","modified":1653485029482},{"_id":"themes/matery/source/medias/banner/2.jpg","hash":"d6a389f2e63d952b39d446ecee1cf19c4036fac7","modified":1653485036389},{"_id":"themes/matery/source/medias/featureimages/11.jpg","hash":"36499835a9a3a4e22757e7abc3f8fce685a93364","modified":1653488116771},{"_id":"themes/matery/source/medias/featureimages/13.jpg","hash":"24b87e59d8b606fe819964bc0769d8a580d6f945","modified":1653488104661}],"Category":[{"name":"","_id":"clg8yre9h0005agvtyeznptzk"},{"name":"","_id":"clg8yre9x000iagvt1ntrjqsl"},{"name":"","parent":"clg8yre9h0005agvtyeznptzk","_id":"clg8yre9x000oagvt9y9za8fo"},{"name":"Network","_id":"clg8yre9x000wagvt1i4objj8"},{"name":"","_id":"clg8yread0011agvtsathc0lj"},{"name":"NetWork","_id":"clg8yread0017agvtrxqmv4xx"}],"Data":[{"_id":"musics","data":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}]},{"_id":"friends","data":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}],"Page":[{"title":"404","date":"2019-07-19T08:41:10.000Z","type":"404","layout":"404","description":"Not Found","_content":"","source":"404.md","raw":"---\ntitle: 404\ndate: 2019-07-19 16:41:10\ntype: \"404\"\nlayout: \"404\"\ndescription: \"Not Found\"\n---\n","updated":"2022-05-22T03:25:52.101Z","path":"404.html","comments":1,"_id":"clg8yre7b0000agvtfbcazqmx","content":"<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":""},{"title":"about","date":"2019-07-19T08:41:10.000Z","type":"about","layout":"about","mathjax":true,"_content":"\n\n## 2019\n\n`www.yteng3456.xyz`ThinkPHP5.0\n\nGithub + Hexo Hexo\n\n\n\n`https://xiaoyixiaoyang.github.io/`\n\n\n## 2020\n\n\n\n\n\n\n\n\n\n## 2021\n\n\n\n1.\n\n2.\n\n## \n* <b></b>\n1409026014@qq.com\n* <b></b>\nyteng3456\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2019-07-19 16:41:10\ntype: \"about\"\nlayout: \"about\"\nmathjax: true\n---\n\n\n## 2019\n\n`www.yteng3456.xyz`ThinkPHP5.0\n\nGithub + Hexo Hexo\n\n\n\n`https://xiaoyixiaoyang.github.io/`\n\n\n## 2020\n\n\n\n\n\n\n\n\n\n## 2021\n\n\n\n1.\n\n2.\n\n## \n* <b></b>\n1409026014@qq.com\n* <b></b>\nyteng3456\n","updated":"2022-05-22T04:36:01.945Z","path":"about/index.html","comments":1,"_id":"clg8yre920001agvt4s7o90cl","content":"<h2 id=\"2019\"><a href=\"#2019\" class=\"headerlink\" title=\"2019\"></a>2019</h2><p><code>www.yteng3456.xyz</code>ThinkPHP5.0</p>\n<p>Github + Hexo Hexo</p>\n<p></p>\n<p><code>https://xiaoyixiaoyang.github.io/</code></p>\n<h2 id=\"2020\"><a href=\"#2020\" class=\"headerlink\" title=\"2020\"></a>2020</h2><p></p>\n<p></p>\n<p></p>\n<h2 id=\"2021\"><a href=\"#2021\" class=\"headerlink\" title=\"2021\"></a>2021</h2><p></p>\n<p>1.</p>\n<p>2.</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><b></b><br><a href=\"mailto:1409026014@qq.com\" target=\"_blank\" rel=\"noopener\">1409026014@qq.com</a></li>\n<li><b></b><br>yteng3456</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<h2 id=\"2019\"><a href=\"#2019\" class=\"headerlink\" title=\"2019\"></a>2019</h2><p><code>www.yteng3456.xyz</code>ThinkPHP5.0</p>\n<p>Github + Hexo Hexo</p>\n<p></p>\n<p><code>https://xiaoyixiaoyang.github.io/</code></p>\n<h2 id=\"2020\"><a href=\"#2020\" class=\"headerlink\" title=\"2020\"></a>2020</h2><p></p>\n<p></p>\n<p></p>\n<h2 id=\"2021\"><a href=\"#2021\" class=\"headerlink\" title=\"2021\"></a>2021</h2><p></p>\n<p>1.</p>\n<p>2.</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><b></b><br><a href=\"mailto:1409026014@qq.com\" target=\"_blank\" rel=\"noopener\">1409026014@qq.com</a></li>\n<li><b></b><br>yteng3456</li>\n</ul>\n"},{"title":"archives","date":"2019-07-19T08:39:20.000Z","type":"archives","layout":"archives","_content":"","source":"archives/index.md","raw":"---\ntitle: archives\ndate: 2019-07-19 16:39:20\ntype: \"archives\"\nlayout: \"archives\"\n---","updated":"2022-05-22T02:13:17.363Z","path":"archives/index.html","comments":1,"_id":"clg8yre9h0003agvto24y8bi8","content":"<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":""},{"title":"categories","date":"2019-07-19T08:39:20.000Z","type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2019-07-19 16:39:20\ntype: \"categories\"\nlayout: \"categories\"\n---","updated":"2022-05-22T02:13:17.374Z","path":"categories/index.html","comments":1,"_id":"clg8yre9h0007agvt98w5rltt","content":"<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":""},{"title":"friends","date":"2019-07-19T08:42:10.000Z","type":"friends","layout":"friends","_content":"\n# \n\n* ****\n* ****\n* ****\n* ****\n\n\n* ****godweiyang\n* ****https://godweiyang.com\n* ****NLP\n* ****https://godweiyang.com/medias/avatars/avatar.jpg\n","source":"friends/index.md","raw":"---\ntitle: friends\ndate: 2019-07-19 16:42:10\ntype: \"friends\"\nlayout: \"friends\"\n---\n\n# \n\n* ****\n* ****\n* ****\n* ****\n\n\n* ****godweiyang\n* ****https://godweiyang.com\n* ****NLP\n* ****https://godweiyang.com/medias/avatars/avatar.jpg\n","updated":"2022-05-22T04:49:41.789Z","path":"friends/index.html","comments":1,"_id":"clg8yre9h0009agvtxfmtp37p","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n<p></p>\n<ul>\n<li><strong></strong>godweiyang</li>\n<li><strong></strong><a href=\"https://godweiyang.com\" target=\"_blank\" rel=\"noopener\">https://godweiyang.com</a></li>\n<li><strong></strong>NLP</li>\n<li><strong></strong><a href=\"https://godweiyang.com/medias/avatars/avatar.jpg\" target=\"_blank\" rel=\"noopener\">https://godweiyang.com/medias/avatars/avatar.jpg</a></li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n<p></p>\n<ul>\n<li><strong></strong>godweiyang</li>\n<li><strong></strong><a href=\"https://godweiyang.com\" target=\"_blank\" rel=\"noopener\">https://godweiyang.com</a></li>\n<li><strong></strong>NLP</li>\n<li><strong></strong><a href=\"https://godweiyang.com/medias/avatars/avatar.jpg\" target=\"_blank\" rel=\"noopener\">https://godweiyang.com/medias/avatars/avatar.jpg</a></li>\n</ul>\n"},{"title":"tags","date":"2019-07-19T08:40:27.000Z","type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2019-07-19 16:40:27\ntype: \"tags\"\nlayout: \"tags\"\n---","updated":"2022-05-22T02:13:17.374Z","path":"tags/index.html","comments":1,"_id":"clg8yre9h000bagvt8fxwc06f","content":"<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":""}],"Post":[{"title":"","img":"/medias/files/algorithm-dp.jpg","summary":"","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2022-11-27T07:32:05.000Z","password":null,"_content":"\n\n\n****DP table\n****\n****\n\ndp\n```\n# base case\ndp[0][0][...] = base case\n\n# \nfor 1 in 1\n  for 2 in 2\n      for ...\n        dp[1][2][...] = (1 2, ...)\n```\n\n# \n\n## \n\n n Fibonacci n  F(N)\nF(0) = 0,   F(1) = 1\nF(N) = F(N - 1) + F(N - 2),  N > 1.\n\n 1\nn = 2\n1\n\n 2\nn = 5\n5\n\n### \n#### dp[i]f(i)\n```golang\nfunc fib(n int) int {\n    dp := make([]int, n+1)\n    dp[0] = 0\n    dp[1] = 1\n    \n    return hepler(dp, n)\n}\n\nfunc hepler(dp []int, n int)int {\n    if n ==  0 {\n        return 0\n    }\n    if dp[n] != 0 {\n        return dp[n]\n    }\n    // \n    dp[n] = hepler(dp, n-1) + hepler(dp, n-2)\n    return dp[n]\n}\n```\n\n#### dp tabledp[i]f(i)\n```golang\nfunc fib(n int) int {\n    if n == 0 {\n        return 0\n    }\n    if n == 1{\n        return 1\n    }\n    \n    dp := make([]int, n+1)\n    // base case\n    dp[0] = 0\n    dp[1] = 1\n    \n    // \n    for i := 2; i <= n; i++{\n        dp[i] = dp[i-1] + dp[i-2]\n    }\n\n    return dp[n]\n}\n```\n\n## \n coins  amount \n  -1 \n\n\n 1\ncoins = [1, 2, 5], amount = 11\n3 \n11 = 5 + 5 + 1\n\n 2\ncoins = [2], amount = 3\n-1\n\n 3\ncoins = [1], amount = 0\n0\n\n### \n#### dp[i] = value  ivalue\n```golang\nfunc coinChange(coins []int, amount int) int {\n    // dp  dp[i] = value  ivalue\n    dp := make([]int, amount + 1)\n    dp[0] = 0\n\n    return hepler(dp, coins, amount)\n}\n\nfunc hepler(dp, coins []int, amount int) int{\n    // dp[amount]\n    if amount == 0 {\n        return 0\n    }\n    if amount < 0 {\n        return -1\n    }\n    if dp[amount] != 0{\n        return dp[amount]\n    }\n\n    //  dp[n] = min(dp(n-coin) + 1)\n    res := 100000\n    for _, coin := range coins {\n        subproblem := hepler(dp, coins, amount - coin)\n\n        //  \n        if subproblem < 0 {\n            continue\n        }\n    \n        if subproblem < res {\n            res = 1 + subproblem\n        }\n    }\n    if res != 100000 {\n        dp[amount] = res\n    } else {\n        dp[amount] = -1\n    }\n    \n    return dp[amount]\n}\n```\n\n#### dp tabledp[i] = value  ivalue\n```golang\nfunc coinChange(coins []int, amount int) int {\n    if amount == 0 {\n        return 0\n    }\n    if amount < 0 {\n        return -1\n    }\n    // dp  dp[i] = value  ivalue\n    dp := make([]int, amount + 1)\n    dp[0] = 0\n\n    for i := 1; i <= amount; i ++ {\n        // \n        dp[i] = 10001\n        for _, coin := range coins {\n            if i - coin < 0 {\n                // \n                continue\n            }\n            dp[i] = min(dp[i], dp[i - coin] + 1)\n        }\n    }\n\n    if dp[amount] == 10001 {\n        return -1\n    }\n\n    return dp[amount]\n}\n\nfunc min(a, b int) int {\n    if a < b {\n        return a\n    }\n\n    return b\n}\n```\n\n## \n nums \n[3,6,2,7]  [0,3,1,6,2,2,7] \n\n 1\nnums = [10,9,2,5,3,7,101,18]\n4\n [2,3,7,101] 4 \n\n 2\nnums = [0,1,0,3,2,3]\n4\n\n 3\nnums = [7,7,7,7,7,7,7]\n1\n\n### \n\n#### dp tabledp[i]nums[i]\n```golang\nfunc lengthOfLIS(nums []int) int {\n    // dp[i] nums[i]\n    //  dp[i] = idp[i-1]nums[i] > nums[i-1]  1\n    dp := make([]int, len(nums))\n    // \n    ret := -1\n    for i := 0; i < len(nums); i ++ {\n        // dp  1\n        dp[i] = 1\n        // dp[i]\n        for j := 0; j < i; j ++ {\n            if nums[i] > nums[j] {\n                dp[i] = max(dp[i], dp[j] + 1)\n            }\n        }\n        ret = max(ret, dp[i])\n    }\n    return ret\n}\n\nfunc max(a, b int) int{\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n## \n\n nums \n \n\n 1\nnums = [-2,1,-3,4,-1,2,1,-5,4]\n6\n [4,-1,2,1]  6 \n\n 2\nnums = [1]\n1\n\n 3\nnums = [5,4,-1,7,8]\n23\n\n### \n\n#### dp table, dp[i]nums[i]\n```golang\nfunc maxSubArray(nums []int) int {\n    if len(nums) <= 0 {\n        return -1\n    }\n    // dpdp[i]nums[i]\n    dp := make([]int, len(nums))\n    dp[0] = nums[0]\n    ret := dp[0]\n    \n    // \n    for i := 1; i < len(nums); i ++ {\n        dp[i] = max(nums[i], dp[i-1] + nums[i])\n        ret = max(ret, dp[i])  \n    }\n\n    return ret\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n## \n\ntext1 text2     0 \n\n\"ace\"  \"abcde\"  \"aec\"  \"abcde\" \n  \n\n 1\ntext1 = \"abcde\", text2 = \"ace\" \n3  \n \"ace\"  3 \n\n 2\ntext1 = \"abc\", text2 = \"abc\"\n3\n \"abc\"  3 \n\n 3\ntext1 = \"abc\", text2 = \"def\"\n0\n 0 \n\n### \n\n#### dp tabledp[i][j]str1[0:i]str2[0:j]\n```golang\nfunc longestCommonSubsequence(text1 string, text2 string) int {\n    if len(text1) == 0 || len(text2) == 0 {\n        return 0\n    }\n    // dp[i][j] text1[0:i]  text2[0:j]\n    // \n    dp := make([][]int, (len(text1)+1))\n    for i := range dp {\n        dp[i] = make([]int, (len(text2)+1))\n    }\n\n    ret := -1\n    //  dp[i+1][j+1]dp[i][j]\n    for i := 0; i < len(text1); i ++ {\n        for j := 0; j < len(text2); j ++ {\n            if text1[i] == text2[j] {\n                //  text1[0:i]  text2[0:j]+1\n                dp[i+1][j+1] = dp[i][j] + 1\n            }else {\n                // text1[0:i-1]  text2[0:j]\n                //  text1[0:i]  text2[0:j-1]\n                dp[i+1][j+1] = max(dp[i+1][j], dp[i][j+1])\n            }\n            ret = max(ret, dp[i+1][j+1])\n       }\n    }\n    return ret\n}\n\nfunc max(a, b int) int{\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n## \n\n\n\n\n## \n\n","source":"_posts/algorithm-dp.md","raw":"---\ntitle: \nimg: /medias/files/algorithm-dp.jpg\nsummary: \ntags:\n  - \n  - \n  - \ncategories:\n  - \n  - \ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2022-11-27 15:32:05\npassword:\n---\n\n\n\n****DP table\n****\n****\n\ndp\n```\n# base case\ndp[0][0][...] = base case\n\n# \nfor 1 in 1\n  for 2 in 2\n      for ...\n        dp[1][2][...] = (1 2, ...)\n```\n\n# \n\n## \n\n n Fibonacci n  F(N)\nF(0) = 0,   F(1) = 1\nF(N) = F(N - 1) + F(N - 2),  N > 1.\n\n 1\nn = 2\n1\n\n 2\nn = 5\n5\n\n### \n#### dp[i]f(i)\n```golang\nfunc fib(n int) int {\n    dp := make([]int, n+1)\n    dp[0] = 0\n    dp[1] = 1\n    \n    return hepler(dp, n)\n}\n\nfunc hepler(dp []int, n int)int {\n    if n ==  0 {\n        return 0\n    }\n    if dp[n] != 0 {\n        return dp[n]\n    }\n    // \n    dp[n] = hepler(dp, n-1) + hepler(dp, n-2)\n    return dp[n]\n}\n```\n\n#### dp tabledp[i]f(i)\n```golang\nfunc fib(n int) int {\n    if n == 0 {\n        return 0\n    }\n    if n == 1{\n        return 1\n    }\n    \n    dp := make([]int, n+1)\n    // base case\n    dp[0] = 0\n    dp[1] = 1\n    \n    // \n    for i := 2; i <= n; i++{\n        dp[i] = dp[i-1] + dp[i-2]\n    }\n\n    return dp[n]\n}\n```\n\n## \n coins  amount \n  -1 \n\n\n 1\ncoins = [1, 2, 5], amount = 11\n3 \n11 = 5 + 5 + 1\n\n 2\ncoins = [2], amount = 3\n-1\n\n 3\ncoins = [1], amount = 0\n0\n\n### \n#### dp[i] = value  ivalue\n```golang\nfunc coinChange(coins []int, amount int) int {\n    // dp  dp[i] = value  ivalue\n    dp := make([]int, amount + 1)\n    dp[0] = 0\n\n    return hepler(dp, coins, amount)\n}\n\nfunc hepler(dp, coins []int, amount int) int{\n    // dp[amount]\n    if amount == 0 {\n        return 0\n    }\n    if amount < 0 {\n        return -1\n    }\n    if dp[amount] != 0{\n        return dp[amount]\n    }\n\n    //  dp[n] = min(dp(n-coin) + 1)\n    res := 100000\n    for _, coin := range coins {\n        subproblem := hepler(dp, coins, amount - coin)\n\n        //  \n        if subproblem < 0 {\n            continue\n        }\n    \n        if subproblem < res {\n            res = 1 + subproblem\n        }\n    }\n    if res != 100000 {\n        dp[amount] = res\n    } else {\n        dp[amount] = -1\n    }\n    \n    return dp[amount]\n}\n```\n\n#### dp tabledp[i] = value  ivalue\n```golang\nfunc coinChange(coins []int, amount int) int {\n    if amount == 0 {\n        return 0\n    }\n    if amount < 0 {\n        return -1\n    }\n    // dp  dp[i] = value  ivalue\n    dp := make([]int, amount + 1)\n    dp[0] = 0\n\n    for i := 1; i <= amount; i ++ {\n        // \n        dp[i] = 10001\n        for _, coin := range coins {\n            if i - coin < 0 {\n                // \n                continue\n            }\n            dp[i] = min(dp[i], dp[i - coin] + 1)\n        }\n    }\n\n    if dp[amount] == 10001 {\n        return -1\n    }\n\n    return dp[amount]\n}\n\nfunc min(a, b int) int {\n    if a < b {\n        return a\n    }\n\n    return b\n}\n```\n\n## \n nums \n[3,6,2,7]  [0,3,1,6,2,2,7] \n\n 1\nnums = [10,9,2,5,3,7,101,18]\n4\n [2,3,7,101] 4 \n\n 2\nnums = [0,1,0,3,2,3]\n4\n\n 3\nnums = [7,7,7,7,7,7,7]\n1\n\n### \n\n#### dp tabledp[i]nums[i]\n```golang\nfunc lengthOfLIS(nums []int) int {\n    // dp[i] nums[i]\n    //  dp[i] = idp[i-1]nums[i] > nums[i-1]  1\n    dp := make([]int, len(nums))\n    // \n    ret := -1\n    for i := 0; i < len(nums); i ++ {\n        // dp  1\n        dp[i] = 1\n        // dp[i]\n        for j := 0; j < i; j ++ {\n            if nums[i] > nums[j] {\n                dp[i] = max(dp[i], dp[j] + 1)\n            }\n        }\n        ret = max(ret, dp[i])\n    }\n    return ret\n}\n\nfunc max(a, b int) int{\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n## \n\n nums \n \n\n 1\nnums = [-2,1,-3,4,-1,2,1,-5,4]\n6\n [4,-1,2,1]  6 \n\n 2\nnums = [1]\n1\n\n 3\nnums = [5,4,-1,7,8]\n23\n\n### \n\n#### dp table, dp[i]nums[i]\n```golang\nfunc maxSubArray(nums []int) int {\n    if len(nums) <= 0 {\n        return -1\n    }\n    // dpdp[i]nums[i]\n    dp := make([]int, len(nums))\n    dp[0] = nums[0]\n    ret := dp[0]\n    \n    // \n    for i := 1; i < len(nums); i ++ {\n        dp[i] = max(nums[i], dp[i-1] + nums[i])\n        ret = max(ret, dp[i])  \n    }\n\n    return ret\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n## \n\ntext1 text2     0 \n\n\"ace\"  \"abcde\"  \"aec\"  \"abcde\" \n  \n\n 1\ntext1 = \"abcde\", text2 = \"ace\" \n3  \n \"ace\"  3 \n\n 2\ntext1 = \"abc\", text2 = \"abc\"\n3\n \"abc\"  3 \n\n 3\ntext1 = \"abc\", text2 = \"def\"\n0\n 0 \n\n### \n\n#### dp tabledp[i][j]str1[0:i]str2[0:j]\n```golang\nfunc longestCommonSubsequence(text1 string, text2 string) int {\n    if len(text1) == 0 || len(text2) == 0 {\n        return 0\n    }\n    // dp[i][j] text1[0:i]  text2[0:j]\n    // \n    dp := make([][]int, (len(text1)+1))\n    for i := range dp {\n        dp[i] = make([]int, (len(text2)+1))\n    }\n\n    ret := -1\n    //  dp[i+1][j+1]dp[i][j]\n    for i := 0; i < len(text1); i ++ {\n        for j := 0; j < len(text2); j ++ {\n            if text1[i] == text2[j] {\n                //  text1[0:i]  text2[0:j]+1\n                dp[i+1][j+1] = dp[i][j] + 1\n            }else {\n                // text1[0:i-1]  text2[0:j]\n                //  text1[0:i]  text2[0:j-1]\n                dp[i+1][j+1] = max(dp[i+1][j], dp[i][j+1])\n            }\n            ret = max(ret, dp[i+1][j+1])\n       }\n    }\n    return ret\n}\n\nfunc max(a, b int) int{\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n## \n\n\n\n\n## \n\n","slug":"algorithm-dp","published":1,"updated":"2023-02-05T03:28:26.612Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre920002agvtfhggbhzy","content":"<p></p>\n<p><strong></strong>DP table<br><strong></strong><br><strong></strong></p>\n<p>dp</p>\n<pre><code># base case\ndp[0][0][...] = base case\n\n# \nfor 1 in 1\n  for 2 in 2\n      for ...\n        dp[1][2][...] = (1 2, ...)</code></pre><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> n Fibonacci n  F(N)<br>F(0) = 0,   F(1) = 1<br>F(N) = F(N - 1) + F(N - 2),  N &gt; 1.</p>\n<p> 1<br>n = 2<br>1</p>\n<p> 2<br>n = 5<br>5</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-i-f-i\"><a href=\"#dp-i-f-i\" class=\"headerlink\" title=\"dp[i]f(i)\"></a>dp[i]f(i)</h4><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">func fib(n int) int {\n    dp := make([]int, n+1)\n    dp[0] = 0\n    dp[1] = 1\n\n    return hepler(dp, n)\n}\n\nfunc hepler(dp []int, n int)int {\n    if n ==  0 {\n        return 0\n    }\n    if dp[n] != 0 {\n        return dp[n]\n    }\n    // \n    dp[n] = hepler(dp, n-1) + hepler(dp, n-2)\n    return dp[n]\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"dp-tabledp-i-f-i\"><a href=\"#dp-tabledp-i-f-i\" class=\"headerlink\" title=\"dp tabledp[i]f(i)\"></a>dp tabledp[i]f(i)</h4><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">func fib(n int) int {\n    if n == 0 {\n        return 0\n    }\n    if n == 1{\n        return 1\n    }\n\n    dp := make([]int, n+1)\n    // base case\n    dp[0] = 0\n    dp[1] = 1\n\n    // \n    for i := 2; i <= n; i++{\n        dp[i] = dp[i-1] + dp[i-2]\n    }\n\n    return dp[n]\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> coins  amount <br>   -1 <br></p>\n<p> 1<br>coins = [1, 2, 5], amount = 11<br>3<br>11 = 5 + 5 + 1</p>\n<p> 2<br>coins = [2], amount = 3<br>-1</p>\n<p> 3<br>coins = [1], amount = 0<br>0</p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-i-value-ivalue\"><a href=\"#dp-i-value-ivalue\" class=\"headerlink\" title=\"dp[i] = value  ivalue\"></a>dp[i] = value  ivalue</h4><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">func coinChange(coins []int, amount int) int {\n    // dp  dp[i] = value  ivalue\n    dp := make([]int, amount + 1)\n    dp[0] = 0\n\n    return hepler(dp, coins, amount)\n}\n\nfunc hepler(dp, coins []int, amount int) int{\n    // dp[amount]\n    if amount == 0 {\n        return 0\n    }\n    if amount < 0 {\n        return -1\n    }\n    if dp[amount] != 0{\n        return dp[amount]\n    }\n\n    //  dp[n] = min(dp(n-coin) + 1)\n    res := 100000\n    for _, coin := range coins {\n        subproblem := hepler(dp, coins, amount - coin)\n\n        //  \n        if subproblem < 0 {\n            continue\n        }\n\n        if subproblem < res {\n            res = 1 + subproblem\n        }\n    }\n    if res != 100000 {\n        dp[amount] = res\n    } else {\n        dp[amount] = -1\n    }\n\n    return dp[amount]\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"dp-tabledp-i-value-ivalue\"><a href=\"#dp-tabledp-i-value-ivalue\" class=\"headerlink\" title=\"dp tabledp[i] = value  ivalue\"></a>dp tabledp[i] = value  ivalue</h4><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">func coinChange(coins []int, amount int) int {\n    if amount == 0 {\n        return 0\n    }\n    if amount < 0 {\n        return -1\n    }\n    // dp  dp[i] = value  ivalue\n    dp := make([]int, amount + 1)\n    dp[0] = 0\n\n    for i := 1; i <= amount; i ++ {\n        // \n        dp[i] = 10001\n        for _, coin := range coins {\n            if i - coin < 0 {\n                // \n                continue\n            }\n            dp[i] = min(dp[i], dp[i - coin] + 1)\n        }\n    }\n\n    if dp[amount] == 10001 {\n        return -1\n    }\n\n    return dp[amount]\n}\n\nfunc min(a, b int) int {\n    if a < b {\n        return a\n    }\n\n    return b\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> nums <br> [3,6,2,7]  [0,3,1,6,2,2,7] </p>\n<p> 1<br>nums = [10,9,2,5,3,7,101,18]<br>4<br> [2,3,7,101] 4 </p>\n<p> 2<br>nums = [0,1,0,3,2,3]<br>4</p>\n<p> 3<br>nums = [7,7,7,7,7,7,7]<br>1</p>\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-tabledp-i-nums-i-\"><a href=\"#dp-tabledp-i-nums-i-\" class=\"headerlink\" title=\"dp tabledp[i]nums[i]\"></a>dp tabledp[i]nums[i]</h4><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">func lengthOfLIS(nums []int) int {\n    // dp[i] nums[i]\n    //  dp[i] = idp[i-1]nums[i] > nums[i-1]  1\n    dp := make([]int, len(nums))\n    // \n    ret := -1\n    for i := 0; i < len(nums); i ++ {\n        // dp  1\n        dp[i] = 1\n        // dp[i]\n        for j := 0; j < i; j ++ {\n            if nums[i] > nums[j] {\n                dp[i] = max(dp[i], dp[j] + 1)\n            }\n        }\n        ret = max(ret, dp[i])\n    }\n    return ret\n}\n\nfunc max(a, b int) int{\n    if a > b {\n        return a\n    }\n    return b\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> nums <br> </p>\n<p> 1<br>nums = [-2,1,-3,4,-1,2,1,-5,4]<br>6<br> [4,-1,2,1]  6 </p>\n<p> 2<br>nums = [1]<br>1</p>\n<p> 3<br>nums = [5,4,-1,7,8]<br>23</p>\n<h3 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-table-dp-i-nums-i-\"><a href=\"#dp-table-dp-i-nums-i-\" class=\"headerlink\" title=\"dp table, dp[i]nums[i]\"></a>dp table, dp[i]nums[i]</h4><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">func maxSubArray(nums []int) int {\n    if len(nums) <= 0 {\n        return -1\n    }\n    // dpdp[i]nums[i]\n    dp := make([]int, len(nums))\n    dp[0] = nums[0]\n    ret := dp[0]\n\n    // \n    for i := 1; i < len(nums); i ++ {\n        dp[i] = max(nums[i], dp[i-1] + nums[i])\n        ret = max(ret, dp[i])  \n    }\n\n    return ret\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> text1  text2     0 <br>  <br>ace  abcde  aec  abcde <br>  </p>\n<p> 1<br>text1 = abcde, text2 = ace<br>3<br> ace  3 </p>\n<p> 2<br>text1 = abc, text2 = abc<br>3<br> abc  3 </p>\n<p> 3<br>text1 = abc, text2 = def<br>0<br> 0 </p>\n<h3 id=\"-4\"><a href=\"#-4\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-tabledp-i-j-str1-0-i-str2-0-j-\"><a href=\"#dp-tabledp-i-j-str1-0-i-str2-0-j-\" class=\"headerlink\" title=\"dp tabledp[i][j]str1[0:i]str2[0:j]\"></a>dp tabledp[i][j]str1[0:i]str2[0:j]</h4><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">func longestCommonSubsequence(text1 string, text2 string) int {\n    if len(text1) == 0 || len(text2) == 0 {\n        return 0\n    }\n    // dp[i][j] text1[0:i]  text2[0:j]\n    // \n    dp := make([][]int, (len(text1)+1))\n    for i := range dp {\n        dp[i] = make([]int, (len(text2)+1))\n    }\n\n    ret := -1\n    //  dp[i+1][j+1]dp[i][j]\n    for i := 0; i < len(text1); i ++ {\n        for j := 0; j < len(text2); j ++ {\n            if text1[i] == text2[j] {\n                //  text1[0:i]  text2[0:j]+1\n                dp[i+1][j+1] = dp[i][j] + 1\n            }else {\n                // text1[0:i-1]  text2[0:j]\n                //  text1[0:i]  text2[0:j-1]\n                dp[i+1][j+1] = max(dp[i+1][j], dp[i][j+1])\n            }\n            ret = max(ret, dp[i+1][j+1])\n       }\n    }\n    return ret\n}\n\nfunc max(a, b int) int{\n    if a > b {\n        return a\n    }\n    return b\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<p></p>\n<p><strong></strong>DP table<br><strong></strong><br><strong></strong></p>\n<p>dp</p>\n<pre><code># base case\ndp[0][0][...] = base case\n\n# \nfor 1 in 1\n  for 2 in 2\n      for ...\n        dp[1][2][...] = (1 2, ...)</code></pre><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> n Fibonacci n  F(N)<br>F(0) = 0,   F(1) = 1<br>F(N) = F(N - 1) + F(N - 2),  N &gt; 1.</p>\n<p> 1<br>n = 2<br>1</p>\n<p> 2<br>n = 5<br>5</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-i-f-i\"><a href=\"#dp-i-f-i\" class=\"headerlink\" title=\"dp[i]f(i)\"></a>dp[i]f(i)</h4><pre><code class=\"golang\">func fib(n int) int {\n    dp := make([]int, n+1)\n    dp[0] = 0\n    dp[1] = 1\n\n    return hepler(dp, n)\n}\n\nfunc hepler(dp []int, n int)int {\n    if n ==  0 {\n        return 0\n    }\n    if dp[n] != 0 {\n        return dp[n]\n    }\n    // \n    dp[n] = hepler(dp, n-1) + hepler(dp, n-2)\n    return dp[n]\n}</code></pre>\n<h4 id=\"dp-tabledp-i-f-i\"><a href=\"#dp-tabledp-i-f-i\" class=\"headerlink\" title=\"dp tabledp[i]f(i)\"></a>dp tabledp[i]f(i)</h4><pre><code class=\"golang\">func fib(n int) int {\n    if n == 0 {\n        return 0\n    }\n    if n == 1{\n        return 1\n    }\n\n    dp := make([]int, n+1)\n    // base case\n    dp[0] = 0\n    dp[1] = 1\n\n    // \n    for i := 2; i &lt;= n; i++{\n        dp[i] = dp[i-1] + dp[i-2]\n    }\n\n    return dp[n]\n}</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> coins  amount <br>   -1 <br></p>\n<p> 1<br>coins = [1, 2, 5], amount = 11<br>3<br>11 = 5 + 5 + 1</p>\n<p> 2<br>coins = [2], amount = 3<br>-1</p>\n<p> 3<br>coins = [1], amount = 0<br>0</p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-i-value-ivalue\"><a href=\"#dp-i-value-ivalue\" class=\"headerlink\" title=\"dp[i] = value  ivalue\"></a>dp[i] = value  ivalue</h4><pre><code class=\"golang\">func coinChange(coins []int, amount int) int {\n    // dp  dp[i] = value  ivalue\n    dp := make([]int, amount + 1)\n    dp[0] = 0\n\n    return hepler(dp, coins, amount)\n}\n\nfunc hepler(dp, coins []int, amount int) int{\n    // dp[amount]\n    if amount == 0 {\n        return 0\n    }\n    if amount &lt; 0 {\n        return -1\n    }\n    if dp[amount] != 0{\n        return dp[amount]\n    }\n\n    //  dp[n] = min(dp(n-coin) + 1)\n    res := 100000\n    for _, coin := range coins {\n        subproblem := hepler(dp, coins, amount - coin)\n\n        //  \n        if subproblem &lt; 0 {\n            continue\n        }\n\n        if subproblem &lt; res {\n            res = 1 + subproblem\n        }\n    }\n    if res != 100000 {\n        dp[amount] = res\n    } else {\n        dp[amount] = -1\n    }\n\n    return dp[amount]\n}</code></pre>\n<h4 id=\"dp-tabledp-i-value-ivalue\"><a href=\"#dp-tabledp-i-value-ivalue\" class=\"headerlink\" title=\"dp tabledp[i] = value  ivalue\"></a>dp tabledp[i] = value  ivalue</h4><pre><code class=\"golang\">func coinChange(coins []int, amount int) int {\n    if amount == 0 {\n        return 0\n    }\n    if amount &lt; 0 {\n        return -1\n    }\n    // dp  dp[i] = value  ivalue\n    dp := make([]int, amount + 1)\n    dp[0] = 0\n\n    for i := 1; i &lt;= amount; i ++ {\n        // \n        dp[i] = 10001\n        for _, coin := range coins {\n            if i - coin &lt; 0 {\n                // \n                continue\n            }\n            dp[i] = min(dp[i], dp[i - coin] + 1)\n        }\n    }\n\n    if dp[amount] == 10001 {\n        return -1\n    }\n\n    return dp[amount]\n}\n\nfunc min(a, b int) int {\n    if a &lt; b {\n        return a\n    }\n\n    return b\n}</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> nums <br> [3,6,2,7]  [0,3,1,6,2,2,7] </p>\n<p> 1<br>nums = [10,9,2,5,3,7,101,18]<br>4<br> [2,3,7,101] 4 </p>\n<p> 2<br>nums = [0,1,0,3,2,3]<br>4</p>\n<p> 3<br>nums = [7,7,7,7,7,7,7]<br>1</p>\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-tabledp-i-nums-i-\"><a href=\"#dp-tabledp-i-nums-i-\" class=\"headerlink\" title=\"dp tabledp[i]nums[i]\"></a>dp tabledp[i]nums[i]</h4><pre><code class=\"golang\">func lengthOfLIS(nums []int) int {\n    // dp[i] nums[i]\n    //  dp[i] = idp[i-1]nums[i] &gt; nums[i-1]  1\n    dp := make([]int, len(nums))\n    // \n    ret := -1\n    for i := 0; i &lt; len(nums); i ++ {\n        // dp  1\n        dp[i] = 1\n        // dp[i]\n        for j := 0; j &lt; i; j ++ {\n            if nums[i] &gt; nums[j] {\n                dp[i] = max(dp[i], dp[j] + 1)\n            }\n        }\n        ret = max(ret, dp[i])\n    }\n    return ret\n}\n\nfunc max(a, b int) int{\n    if a &gt; b {\n        return a\n    }\n    return b\n}</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> nums <br> </p>\n<p> 1<br>nums = [-2,1,-3,4,-1,2,1,-5,4]<br>6<br> [4,-1,2,1]  6 </p>\n<p> 2<br>nums = [1]<br>1</p>\n<p> 3<br>nums = [5,4,-1,7,8]<br>23</p>\n<h3 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-table-dp-i-nums-i-\"><a href=\"#dp-table-dp-i-nums-i-\" class=\"headerlink\" title=\"dp table, dp[i]nums[i]\"></a>dp table, dp[i]nums[i]</h4><pre><code class=\"golang\">func maxSubArray(nums []int) int {\n    if len(nums) &lt;= 0 {\n        return -1\n    }\n    // dpdp[i]nums[i]\n    dp := make([]int, len(nums))\n    dp[0] = nums[0]\n    ret := dp[0]\n\n    // \n    for i := 1; i &lt; len(nums); i ++ {\n        dp[i] = max(nums[i], dp[i-1] + nums[i])\n        ret = max(ret, dp[i])  \n    }\n\n    return ret\n}\n\nfunc max(a, b int) int {\n    if a &gt; b {\n        return a\n    }\n    return b\n}</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> text1  text2     0 <br>  <br>ace  abcde  aec  abcde <br>  </p>\n<p> 1<br>text1 = abcde, text2 = ace<br>3<br> ace  3 </p>\n<p> 2<br>text1 = abc, text2 = abc<br>3<br> abc  3 </p>\n<p> 3<br>text1 = abc, text2 = def<br>0<br> 0 </p>\n<h3 id=\"-4\"><a href=\"#-4\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"dp-tabledp-i-j-str1-0-i-str2-0-j-\"><a href=\"#dp-tabledp-i-j-str1-0-i-str2-0-j-\" class=\"headerlink\" title=\"dp tabledp[i][j]str1[0:i]str2[0:j]\"></a>dp tabledp[i][j]str1[0:i]str2[0:j]</h4><pre><code class=\"golang\">func longestCommonSubsequence(text1 string, text2 string) int {\n    if len(text1) == 0 || len(text2) == 0 {\n        return 0\n    }\n    // dp[i][j] text1[0:i]  text2[0:j]\n    // \n    dp := make([][]int, (len(text1)+1))\n    for i := range dp {\n        dp[i] = make([]int, (len(text2)+1))\n    }\n\n    ret := -1\n    //  dp[i+1][j+1]dp[i][j]\n    for i := 0; i &lt; len(text1); i ++ {\n        for j := 0; j &lt; len(text2); j ++ {\n            if text1[i] == text2[j] {\n                //  text1[0:i]  text2[0:j]+1\n                dp[i+1][j+1] = dp[i][j] + 1\n            }else {\n                // text1[0:i-1]  text2[0:j]\n                //  text1[0:i]  text2[0:j-1]\n                dp[i+1][j+1] = max(dp[i+1][j], dp[i][j+1])\n            }\n            ret = max(ret, dp[i+1][j+1])\n       }\n    }\n    return ret\n}\n\nfunc max(a, b int) int{\n    if a &gt; b {\n        return a\n    }\n    return b\n}</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"title":"","img":"/medias/files/linked-list.png","summary":"","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2023-04-09T03:39:47.000Z","password":null,"_content":"\n# \n\n|                                                                                |\n|:-------------------------------------------------------------------------------- |\n| [](https://leetcode.cn/problems/merge-two-sorted-lists/)                 |\n| [](https://leetcode.cn/problems/partition-list/)                             |\n| [ N ](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/) |\n| [](https://leetcode.cn/problems/middle-of-the-linked-list/)               |\n|                                                                                  |\n\n### \n\n```golang\n/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc mergeTwoLists(list1 *ListNode, list2 *ListNode) *ListNode {\n    // \n    head := &ListNode{}\n    p := head\n    for ;list1 != nil && list2 != nil; {\n        // \n        if list1.Val < list2.Val {\n            p.Next = list1\n            list1 = list1.Next\n            // list1  list1.Next,p.Next \n        } else {\n            p.Next = list2\n            list2 = list2.Next\n        }\n\n        // p \n        p = p.Next\n    }\n\n    // list1 \n    if list1 != nil {\n        p.Next = list1\n    }\n    // list2 \n    if list2 != nil {\n        p.Next = list2\n    }\n\n    return head.Next\n}\n```\n\n### \n\n```golang\n/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc partition(head *ListNode, x int) *ListNode {\n    // x x\n    head1 := &ListNode{}\n    p1 := head1\n    head2 := &ListNode{}\n    p2 := head2\n\n    for ;head != nil; {\n        if head.Val < x {\n            p1.Next = head\n            p1 = p1.Next\n        } else {\n            p2.Next = head\n            p2 = p2.Next\n        }\n\n        // head head.Next\n        // p1 p2headhead.Next\n        tmp := head.Next\n        head.Next = nil\n        head = tmp\n    }\n\n    // \n    p1.Next = head2.Next\n    return head1.Next\n}\n```\n\n###  N \n\n```golang\n/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc removeNthFromEnd(head *ListNode, n int) *ListNode {\n    // n + 1\n    // \n    newHead := &ListNode{}\n    newHead.Next = head\n    p1 := newHead\n    p2 := newHead\n    for ; p1 != nil && n >= 0; {\n        p1 = p1.Next\n        n--\n    }\n\n    for ; p1 != nil; {\n        p1 = p1.Next\n        p2 = p2.Next\n    }\n\n    // p2.Next\n    tmp := p2.Next\n    p2.Next = p2.Next.Next\n    tmp.Next = nil\n\n    return newHead.Next\n}\n```\n\n### \n\n```go\n\n```","source":"_posts/algorithm-linked-list.md","raw":"---\ntitle: \nimg: /medias/files/linked-list.png\nsummary: \ntags:\n  - \n  - \n  - \ncategories:\n  - \n  - \ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2023-04-09 11:39:47\npassword:\n---\n\n# \n\n|                                                                                |\n|:-------------------------------------------------------------------------------- |\n| [](https://leetcode.cn/problems/merge-two-sorted-lists/)                 |\n| [](https://leetcode.cn/problems/partition-list/)                             |\n| [ N ](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/) |\n| [](https://leetcode.cn/problems/middle-of-the-linked-list/)               |\n|                                                                                  |\n\n### \n\n```golang\n/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc mergeTwoLists(list1 *ListNode, list2 *ListNode) *ListNode {\n    // \n    head := &ListNode{}\n    p := head\n    for ;list1 != nil && list2 != nil; {\n        // \n        if list1.Val < list2.Val {\n            p.Next = list1\n            list1 = list1.Next\n            // list1  list1.Next,p.Next \n        } else {\n            p.Next = list2\n            list2 = list2.Next\n        }\n\n        // p \n        p = p.Next\n    }\n\n    // list1 \n    if list1 != nil {\n        p.Next = list1\n    }\n    // list2 \n    if list2 != nil {\n        p.Next = list2\n    }\n\n    return head.Next\n}\n```\n\n### \n\n```golang\n/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc partition(head *ListNode, x int) *ListNode {\n    // x x\n    head1 := &ListNode{}\n    p1 := head1\n    head2 := &ListNode{}\n    p2 := head2\n\n    for ;head != nil; {\n        if head.Val < x {\n            p1.Next = head\n            p1 = p1.Next\n        } else {\n            p2.Next = head\n            p2 = p2.Next\n        }\n\n        // head head.Next\n        // p1 p2headhead.Next\n        tmp := head.Next\n        head.Next = nil\n        head = tmp\n    }\n\n    // \n    p1.Next = head2.Next\n    return head1.Next\n}\n```\n\n###  N \n\n```golang\n/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc removeNthFromEnd(head *ListNode, n int) *ListNode {\n    // n + 1\n    // \n    newHead := &ListNode{}\n    newHead.Next = head\n    p1 := newHead\n    p2 := newHead\n    for ; p1 != nil && n >= 0; {\n        p1 = p1.Next\n        n--\n    }\n\n    for ; p1 != nil; {\n        p1 = p1.Next\n        p2 = p2.Next\n    }\n\n    // p2.Next\n    tmp := p2.Next\n    p2.Next = p2.Next.Next\n    tmp.Next = nil\n\n    return newHead.Next\n}\n```\n\n### \n\n```go\n\n```","slug":"algorithm-linked-list","published":1,"updated":"2023-04-09T05:27:25.589Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre9h0004agvtk8jmc69n","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"https://leetcode.cn/problems/merge-two-sorted-lists/\" target=\"_blank\" rel=\"noopener\"></a></td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"https://leetcode.cn/problems/partition-list/\" target=\"_blank\" rel=\"noopener\"></a></td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"https://leetcode.cn/problems/remove-nth-node-from-end-of-list/\" target=\"_blank\" rel=\"noopener\"> N </a></td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"https://leetcode.cn/problems/middle-of-the-linked-list/\" target=\"_blank\" rel=\"noopener\"></a></td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc mergeTwoLists(list1 *ListNode, list2 *ListNode) *ListNode {\n    // \n    head := &ListNode{}\n    p := head\n    for ;list1 != nil && list2 != nil; {\n        // \n        if list1.Val < list2.Val {\n            p.Next = list1\n            list1 = list1.Next\n            // list1  list1.Next,p.Next \n        } else {\n            p.Next = list2\n            list2 = list2.Next\n        }\n\n        // p \n        p = p.Next\n    }\n\n    // list1 \n    if list1 != nil {\n        p.Next = list1\n    }\n    // list2 \n    if list2 != nil {\n        p.Next = list2\n    }\n\n    return head.Next\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc partition(head *ListNode, x int) *ListNode {\n    // x x\n    head1 := &ListNode{}\n    p1 := head1\n    head2 := &ListNode{}\n    p2 := head2\n\n    for ;head != nil; {\n        if head.Val < x {\n            p1.Next = head\n            p1 = p1.Next\n        } else {\n            p2.Next = head\n            p2 = p2.Next\n        }\n\n        // head head.Next\n        // p1 p2headhead.Next\n        tmp := head.Next\n        head.Next = nil\n        head = tmp\n    }\n\n    // \n    p1.Next = head2.Next\n    return head1.Next\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"-N-\"><a href=\"#-N-\" class=\"headerlink\" title=\" N \"></a> N </h3><pre class=\"line-numbers language-golang\"><code class=\"language-golang\">/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc removeNthFromEnd(head *ListNode, n int) *ListNode {\n    // n + 1\n    // \n    newHead := &ListNode{}\n    newHead.Next = head\n    p1 := newHead\n    p2 := newHead\n    for ; p1 != nil && n >= 0; {\n        p1 = p1.Next\n        n--\n    }\n\n    for ; p1 != nil; {\n        p1 = p1.Next\n        p2 = p2.Next\n    }\n\n    // p2.Next\n    tmp := p2.Next\n    p2.Next = p2.Next.Next\n    tmp.Next = nil\n\n    return newHead.Next\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre class=\"line-numbers language-go\"><code class=\"language-go\"><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"https://leetcode.cn/problems/merge-two-sorted-lists/\" target=\"_blank\" rel=\"noopener\"></a></td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"https://leetcode.cn/problems/partition-list/\" target=\"_blank\" rel=\"noopener\"></a></td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"https://leetcode.cn/problems/remove-nth-node-from-end-of-list/\" target=\"_blank\" rel=\"noopener\"> N </a></td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"https://leetcode.cn/problems/middle-of-the-linked-list/\" target=\"_blank\" rel=\"noopener\"></a></td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code class=\"golang\">/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc mergeTwoLists(list1 *ListNode, list2 *ListNode) *ListNode {\n    // \n    head := &amp;ListNode{}\n    p := head\n    for ;list1 != nil &amp;&amp; list2 != nil; {\n        // \n        if list1.Val &lt; list2.Val {\n            p.Next = list1\n            list1 = list1.Next\n            // list1  list1.Next,p.Next \n        } else {\n            p.Next = list2\n            list2 = list2.Next\n        }\n\n        // p \n        p = p.Next\n    }\n\n    // list1 \n    if list1 != nil {\n        p.Next = list1\n    }\n    // list2 \n    if list2 != nil {\n        p.Next = list2\n    }\n\n    return head.Next\n}</code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code class=\"golang\">/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc partition(head *ListNode, x int) *ListNode {\n    // x x\n    head1 := &amp;ListNode{}\n    p1 := head1\n    head2 := &amp;ListNode{}\n    p2 := head2\n\n    for ;head != nil; {\n        if head.Val &lt; x {\n            p1.Next = head\n            p1 = p1.Next\n        } else {\n            p2.Next = head\n            p2 = p2.Next\n        }\n\n        // head head.Next\n        // p1 p2headhead.Next\n        tmp := head.Next\n        head.Next = nil\n        head = tmp\n    }\n\n    // \n    p1.Next = head2.Next\n    return head1.Next\n}</code></pre>\n<h3 id=\"-N-\"><a href=\"#-N-\" class=\"headerlink\" title=\" N \"></a> N </h3><pre><code class=\"golang\">/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc removeNthFromEnd(head *ListNode, n int) *ListNode {\n    // n + 1\n    // \n    newHead := &amp;ListNode{}\n    newHead.Next = head\n    p1 := newHead\n    p2 := newHead\n    for ; p1 != nil &amp;&amp; n &gt;= 0; {\n        p1 = p1.Next\n        n--\n    }\n\n    for ; p1 != nil; {\n        p1 = p1.Next\n        p2 = p2.Next\n    }\n\n    // p2.Next\n    tmp := p2.Next\n    p2.Next = p2.Next.Next\n    tmp.Next = nil\n\n    return newHead.Next\n}</code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code class=\"go\"></code></pre>\n"},{"title":"go","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2022-06-05T10:22:24.000Z","img":"/medias/files/golang.jpeg","summary":"golang","password":null,"_content":"\n## Go\n\n- Google\n\n- \n\n\n\n- \n\n- \n\n- \n\n:www.liwenzhou.com https://go.dev/tour/welcome/1\n\n## Go\n\nGohttps://golang.google.cn/dl/\n\ncmd`go version`\n\n## go\n\n### \n\n```\nimport package\n\nimport (\n  \"fmt\"\n\n  \"math\"\n)\n```\n\n****\n\nfunc ( ,...) ... {\n\n}\n\n- `(x, y int)`\n\n-  `func swap(x, y string) (string, string)`   `return x, y`\n\n- return named return values  `func test(sum int)(x, y int)`   `return`\n\n****\n\n- var ...   // \n\n- `var x, y int = 1, 2` // \n\n- `x := 1`      // x\n\n****\n\n```\nbool\n\nstring\n\nint int8 int16 int32 int64\n\nuint uint8 uint16 uint32 uint64 uintptr\n\nbyte // alias for uint8\n\nrune // alias for int32\n\n  // represents a Unicode code point\n\nfloat32 float64\n\ncomplex64 complex128\n\nzero values\n\n0 for numeric types,\n\nfalse for the boolean type, and\n\n\"\" (the empty string) for strings.\n\nnil for other type\n```\n\n****\n\n`T(v)`\n\n****\n\n`const  = `\n\n- \n\n### \n\n**for**\n\n```\nfor init statment; condition statement; post statement {\n\n}\n```\n\n- ()\n\n- conditionwhile()\n\n- condition()\n\n**if**\n\n```\nif condition {\n\n}\n```\n\n- {}\n\n-  `if init statement; condition stament {}`(init statementif else)\n\n**switch**\n\n```\nswitch init statement;condition{\n\n  case 1\n\n  case 2\n\n}\n```\n\n- gocasebreak\n\n- switch caseconstinteger\n\n- switchcondition(switch true)\n\n**defer**\n\n```\nfunc test() {\n\n  fmt.Println(\"123\")\n\n}\n\nfunc main() {\n\n  defer fmt.Println(\"world\")\n\n  fmt.Println(\"hello\")\n\n  test()\n\n}\n```\n\n- defer\n\n- deferdefer\n\n### \n\n**pointer**\n\n`i= 42`\n\n`p := &i`\n\n- nil\n\n**struct**\n\n```\ntype Vertex struct {\n\n  X int\n\n  Y int\n\n}\n\nfunc main() {\n\n  v := Vertex{1, 2}\n\n  p := &v\n\n  p.X = 666\n\n  fmt.Println(v)\n\n}\n```\n\n- v.X p.X\n\n**array**\n\n```\nvar a [2]string\n\na[0] = \"Hello\"\n\na[1] = \"World\"\n\nfmt.Println(a)\n```\n\n- array\n\n**slice**\n\n```\nprimes := [6]int{2, 3, 5, 7, 11, 13}\n\nvar s []int = primes[:4] //\n\nfmt.Println(s)\n```\n\n- \n\n- `a[low:high];`low0highlen\n\n- make `make([]int, len, cap)`\n\n- \n\n- append \n\n**range**\n\n- range slice inedx, value\n\n- range map key, value\n\n-  `_` \n\n**map**\n\n-  `delete(map1, key)`\n\n- key `value ok = map1[key]`\n\n**function**\n\n`func ()  {}`\n\n- \n\n- \n\n### \n\n**method**\n\n`func (receiver) ()  {}`\n\n- receiver\n\n- methodreveiverpackage\n\n- receiverstruct\n  \n  receiver  receiverreceiver()()\n\n**interface**\n\n```\ntype T struct {\n\n  S string\n\n}\n\ntype I interface {\n\n  Abs() float64\n\n}\n\nfunc (t T) Abs() { // method\n\n  fmt.Println(t.S)\n\n}\n\nvar i I = T{\"hello\"}\n\ni.M()\n```\n\n- (value, type)\n\n- `var i I`valuetypenil\n\n- `var i interface{}`\n\n`s, ok := i.(string)` string\n\n- fmtString\n\n- goerrorError\n\n```\ntype Stringer interface {\n\n  String() string\n\n}\n\n\n\ntype error interface {\n\n  Error() string\n\n}\n```\n\n### \n\n**goroutines**\n\n- Gogoroutinessync\n\n**channels**\n\n```\nch <- v  // vch\n\nv := <-ch // chv\n\n\n\n\n// \n\nch := make(chan int)\n```\n\n- channel <-\n\n- channel\n\n- channel `make(chan int, 100)`, \n\n-  closeok `v, ok := <- ch`panicfor rangeclose\n\n**select**\n\n- select gotroutine selectcase\n\n- select defaultcasedefault\n","source":"_posts/hello-go.md","raw":"---\ntitle: go\ntags:\n  - Go\ncategories:\n  - \ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2022-06-05 18:22:24\nimg: /medias/files/golang.jpeg\nsummary: golang\npassword: \n---\n\n## Go\n\n- Google\n\n- \n\n\n\n- \n\n- \n\n- \n\n:www.liwenzhou.com https://go.dev/tour/welcome/1\n\n## Go\n\nGohttps://golang.google.cn/dl/\n\ncmd`go version`\n\n## go\n\n### \n\n```\nimport package\n\nimport (\n  \"fmt\"\n\n  \"math\"\n)\n```\n\n****\n\nfunc ( ,...) ... {\n\n}\n\n- `(x, y int)`\n\n-  `func swap(x, y string) (string, string)`   `return x, y`\n\n- return named return values  `func test(sum int)(x, y int)`   `return`\n\n****\n\n- var ...   // \n\n- `var x, y int = 1, 2` // \n\n- `x := 1`      // x\n\n****\n\n```\nbool\n\nstring\n\nint int8 int16 int32 int64\n\nuint uint8 uint16 uint32 uint64 uintptr\n\nbyte // alias for uint8\n\nrune // alias for int32\n\n  // represents a Unicode code point\n\nfloat32 float64\n\ncomplex64 complex128\n\nzero values\n\n0 for numeric types,\n\nfalse for the boolean type, and\n\n\"\" (the empty string) for strings.\n\nnil for other type\n```\n\n****\n\n`T(v)`\n\n****\n\n`const  = `\n\n- \n\n### \n\n**for**\n\n```\nfor init statment; condition statement; post statement {\n\n}\n```\n\n- ()\n\n- conditionwhile()\n\n- condition()\n\n**if**\n\n```\nif condition {\n\n}\n```\n\n- {}\n\n-  `if init statement; condition stament {}`(init statementif else)\n\n**switch**\n\n```\nswitch init statement;condition{\n\n  case 1\n\n  case 2\n\n}\n```\n\n- gocasebreak\n\n- switch caseconstinteger\n\n- switchcondition(switch true)\n\n**defer**\n\n```\nfunc test() {\n\n  fmt.Println(\"123\")\n\n}\n\nfunc main() {\n\n  defer fmt.Println(\"world\")\n\n  fmt.Println(\"hello\")\n\n  test()\n\n}\n```\n\n- defer\n\n- deferdefer\n\n### \n\n**pointer**\n\n`i= 42`\n\n`p := &i`\n\n- nil\n\n**struct**\n\n```\ntype Vertex struct {\n\n  X int\n\n  Y int\n\n}\n\nfunc main() {\n\n  v := Vertex{1, 2}\n\n  p := &v\n\n  p.X = 666\n\n  fmt.Println(v)\n\n}\n```\n\n- v.X p.X\n\n**array**\n\n```\nvar a [2]string\n\na[0] = \"Hello\"\n\na[1] = \"World\"\n\nfmt.Println(a)\n```\n\n- array\n\n**slice**\n\n```\nprimes := [6]int{2, 3, 5, 7, 11, 13}\n\nvar s []int = primes[:4] //\n\nfmt.Println(s)\n```\n\n- \n\n- `a[low:high];`low0highlen\n\n- make `make([]int, len, cap)`\n\n- \n\n- append \n\n**range**\n\n- range slice inedx, value\n\n- range map key, value\n\n-  `_` \n\n**map**\n\n-  `delete(map1, key)`\n\n- key `value ok = map1[key]`\n\n**function**\n\n`func ()  {}`\n\n- \n\n- \n\n### \n\n**method**\n\n`func (receiver) ()  {}`\n\n- receiver\n\n- methodreveiverpackage\n\n- receiverstruct\n  \n  receiver  receiverreceiver()()\n\n**interface**\n\n```\ntype T struct {\n\n  S string\n\n}\n\ntype I interface {\n\n  Abs() float64\n\n}\n\nfunc (t T) Abs() { // method\n\n  fmt.Println(t.S)\n\n}\n\nvar i I = T{\"hello\"}\n\ni.M()\n```\n\n- (value, type)\n\n- `var i I`valuetypenil\n\n- `var i interface{}`\n\n`s, ok := i.(string)` string\n\n- fmtString\n\n- goerrorError\n\n```\ntype Stringer interface {\n\n  String() string\n\n}\n\n\n\ntype error interface {\n\n  Error() string\n\n}\n```\n\n### \n\n**goroutines**\n\n- Gogoroutinessync\n\n**channels**\n\n```\nch <- v  // vch\n\nv := <-ch // chv\n\n\n\n\n// \n\nch := make(chan int)\n```\n\n- channel <-\n\n- channel\n\n- channel `make(chan int, 100)`, \n\n-  closeok `v, ok := <- ch`panicfor rangeclose\n\n**select**\n\n- select gotroutine selectcase\n\n- select defaultcasedefault\n","slug":"hello-go","published":1,"updated":"2022-07-05T14:23:09.893Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre9h0008agvtiuu84svp","content":"<h2 id=\"Go\"><a href=\"#Go\" class=\"headerlink\" title=\"Go\"></a>Go</h2><ul>\n<li><p>Google</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p>:<a href=\"http://www.liwenzhou.com\" target=\"_blank\" rel=\"noopener\">www.liwenzhou.com</a>  <a href=\"https://go.dev/tour/welcome/1\" target=\"_blank\" rel=\"noopener\">https://go.dev/tour/welcome/1</a></p>\n<h2 id=\"Go\"><a href=\"#Go\" class=\"headerlink\" title=\"Go\"></a>Go</h2><p>Go<a href=\"https://golang.google.cn/dl/\" target=\"_blank\" rel=\"noopener\">https://golang.google.cn/dl/</a></p>\n<p>cmd<code>go version</code></p>\n<h2 id=\"go\"><a href=\"#go\" class=\"headerlink\" title=\"go\"></a>go</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code>import package\n\nimport (\n    &quot;fmt&quot;\n\n    &quot;math&quot;\n)</code></pre><p><strong></strong></p>\n<p>func ( ,)  {</p>\n<p>}</p>\n<ul>\n<li><p><code>(x, y int)</code></p>\n</li>\n<li><p> <code>func swap(x, y string) (string, string)</code>    <code>return x, y</code></p>\n</li>\n<li><p>return named return values   <code>func test(sum int)(x, y int)</code>    <code>return</code></p>\n</li>\n</ul>\n<p><strong></strong></p>\n<ul>\n<li><p>var     // </p>\n</li>\n<li><p><code>var x, y int = 1, 2</code> // </p>\n</li>\n<li><p><code>x := 1</code>            // x</p>\n</li>\n</ul>\n<p><strong></strong></p>\n<pre><code>bool\n\nstring\n\nint  int8  int16  int32  int64\n\nuint uint8 uint16 uint32 uint64 uintptr\n\nbyte // alias for uint8\n\nrune // alias for int32\n\n     // represents a Unicode code point\n\nfloat32 float64\n\ncomplex64 complex128\n\nzero values\n\n0 for numeric types,\n\nfalse for the boolean type, and\n\n&quot;&quot; (the empty string) for strings.\n\nnil for other type</code></pre><p><strong></strong></p>\n<p><code>T(v)</code></p>\n<p><strong></strong></p>\n<p><code>const  = </code></p>\n<ul>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>for</strong></p>\n<pre><code>for init statment; condition statement; post statement {\n\n}</code></pre><ul>\n<li><p>()</p>\n</li>\n<li><p>conditionwhile()</p>\n</li>\n<li><p>condition()</p>\n</li>\n</ul>\n<p><strong>if</strong></p>\n<pre><code>if condition {\n\n}</code></pre><ul>\n<li><p>{}</p>\n</li>\n<li><p> <code>if init statement; condition stament {}</code>(init statementif else)</p>\n</li>\n</ul>\n<p><strong>switch</strong></p>\n<pre><code>switch init statement;condition{\n\n    case 1\n\n    case 2\n\n}</code></pre><ul>\n<li><p>gocasebreak</p>\n</li>\n<li><p>switch caseconstinteger</p>\n</li>\n<li><p>switchcondition(switch true)</p>\n</li>\n</ul>\n<p><strong>defer</strong></p>\n<pre><code>func test() {\n\n    fmt.Println(&quot;123&quot;)\n\n}\n\nfunc main() {\n\n    defer fmt.Println(&quot;world&quot;)\n\n    fmt.Println(&quot;hello&quot;)\n\n    test()\n\n}</code></pre><ul>\n<li><p>defer</p>\n</li>\n<li><p>deferdefer</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>pointer</strong></p>\n<p><code>i= 42</code></p>\n<p><code>p := &amp;i</code></p>\n<ul>\n<li>nil</li>\n</ul>\n<p><strong>struct</strong></p>\n<pre><code>type Vertex struct {\n\n    X int\n\n    Y int\n\n}\n\nfunc main() {\n\n    v := Vertex{1, 2}\n\n    p := &amp;v\n\n    p.X = 666\n\n    fmt.Println(v)\n\n}</code></pre><ul>\n<li>v.X p.X</li>\n</ul>\n<p><strong>array</strong></p>\n<pre><code>var a [2]string\n\na[0] = &quot;Hello&quot;\n\na[1] = &quot;World&quot;\n\nfmt.Println(a)</code></pre><ul>\n<li>array</li>\n</ul>\n<p><strong>slice</strong></p>\n<pre><code>primes := [6]int{2, 3, 5, 7, 11, 13}\n\nvar s []int = primes[:4]  //\n\nfmt.Println(s)</code></pre><ul>\n<li><p></p>\n</li>\n<li><p><code>a[low:high];</code>low0highlen</p>\n</li>\n<li><p>make <code>make([]int, len, cap)</code></p>\n</li>\n<li><p></p>\n</li>\n<li><p>append </p>\n</li>\n</ul>\n<p><strong>range</strong></p>\n<ul>\n<li><p>range slice inedx, value</p>\n</li>\n<li><p>range map key, value</p>\n</li>\n<li><p> <code>_</code> </p>\n</li>\n</ul>\n<p><strong>map</strong></p>\n<ul>\n<li><p>  <code>delete(map1, key)</code></p>\n</li>\n<li><p>key <code>value ok = map1[key]</code></p>\n</li>\n</ul>\n<p><strong>function</strong></p>\n<p><code>func ()  {}</code></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>method</strong></p>\n<p><code>func (receiver) ()  {}</code></p>\n<ul>\n<li><p>receiver</p>\n</li>\n<li><p>methodreveiverpackage</p>\n</li>\n<li><p>receiverstruct</p>\n<p>receiver  receiverreceiver()()</p>\n</li>\n</ul>\n<p><strong>interface</strong></p>\n<pre><code>type T struct {\n\n    S string\n\n}\n\ntype I interface {\n\n    Abs() float64\n\n}\n\nfunc (t T) Abs() { // method\n\n    fmt.Println(t.S)\n\n}\n\nvar i I = T{&quot;hello&quot;}\n\ni.M()</code></pre><ul>\n<li><p>(value, type)</p>\n</li>\n<li><p><code>var i I</code>valuetypenil</p>\n</li>\n<li><p><code>var i interface{}</code></p>\n</li>\n</ul>\n<p><code>s, ok := i.(string)</code> string</p>\n<ul>\n<li><p>fmtString</p>\n</li>\n<li><p>goerrorError</p>\n</li>\n</ul>\n<pre><code>type Stringer interface {\n\n    String() string\n\n}\n\n\n\ntype error interface {\n\n    Error() string\n\n}</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>goroutines</strong></p>\n<ul>\n<li>Gogoroutinessync</li>\n</ul>\n<p><strong>channels</strong></p>\n<pre><code>ch &lt;- v    // vch\n\nv := &lt;-ch  // chv\n\n\n\n\n// \n\nch := make(chan int)</code></pre><ul>\n<li><p>channel &lt;-</p>\n</li>\n<li><p>channel</p>\n</li>\n<li><p>channel  <code>make(chan int, 100)</code>, </p>\n</li>\n<li><p>closeok <code>v, ok := &lt;- ch</code>panicfor rangeclose</p>\n</li>\n</ul>\n<p><strong>select</strong></p>\n<ul>\n<li><p>select gotroutine selectcase</p>\n</li>\n<li><p>select defaultcasedefault</p>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<h2 id=\"Go\"><a href=\"#Go\" class=\"headerlink\" title=\"Go\"></a>Go</h2><ul>\n<li><p>Google</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p>:<a href=\"http://www.liwenzhou.com\" target=\"_blank\" rel=\"noopener\">www.liwenzhou.com</a>  <a href=\"https://go.dev/tour/welcome/1\" target=\"_blank\" rel=\"noopener\">https://go.dev/tour/welcome/1</a></p>\n<h2 id=\"Go\"><a href=\"#Go\" class=\"headerlink\" title=\"Go\"></a>Go</h2><p>Go<a href=\"https://golang.google.cn/dl/\" target=\"_blank\" rel=\"noopener\">https://golang.google.cn/dl/</a></p>\n<p>cmd<code>go version</code></p>\n<h2 id=\"go\"><a href=\"#go\" class=\"headerlink\" title=\"go\"></a>go</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code>import package\n\nimport (\n    &quot;fmt&quot;\n\n    &quot;math&quot;\n)</code></pre><p><strong></strong></p>\n<p>func ( ,)  {</p>\n<p>}</p>\n<ul>\n<li><p><code>(x, y int)</code></p>\n</li>\n<li><p> <code>func swap(x, y string) (string, string)</code>    <code>return x, y</code></p>\n</li>\n<li><p>return named return values   <code>func test(sum int)(x, y int)</code>    <code>return</code></p>\n</li>\n</ul>\n<p><strong></strong></p>\n<ul>\n<li><p>var     // </p>\n</li>\n<li><p><code>var x, y int = 1, 2</code> // </p>\n</li>\n<li><p><code>x := 1</code>            // x</p>\n</li>\n</ul>\n<p><strong></strong></p>\n<pre><code>bool\n\nstring\n\nint  int8  int16  int32  int64\n\nuint uint8 uint16 uint32 uint64 uintptr\n\nbyte // alias for uint8\n\nrune // alias for int32\n\n     // represents a Unicode code point\n\nfloat32 float64\n\ncomplex64 complex128\n\nzero values\n\n0 for numeric types,\n\nfalse for the boolean type, and\n\n&quot;&quot; (the empty string) for strings.\n\nnil for other type</code></pre><p><strong></strong></p>\n<p><code>T(v)</code></p>\n<p><strong></strong></p>\n<p><code>const  = </code></p>\n<ul>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>for</strong></p>\n<pre><code>for init statment; condition statement; post statement {\n\n}</code></pre><ul>\n<li><p>()</p>\n</li>\n<li><p>conditionwhile()</p>\n</li>\n<li><p>condition()</p>\n</li>\n</ul>\n<p><strong>if</strong></p>\n<pre><code>if condition {\n\n}</code></pre><ul>\n<li><p>{}</p>\n</li>\n<li><p> <code>if init statement; condition stament {}</code>(init statementif else)</p>\n</li>\n</ul>\n<p><strong>switch</strong></p>\n<pre><code>switch init statement;condition{\n\n    case 1\n\n    case 2\n\n}</code></pre><ul>\n<li><p>gocasebreak</p>\n</li>\n<li><p>switch caseconstinteger</p>\n</li>\n<li><p>switchcondition(switch true)</p>\n</li>\n</ul>\n<p><strong>defer</strong></p>\n<pre><code>func test() {\n\n    fmt.Println(&quot;123&quot;)\n\n}\n\nfunc main() {\n\n    defer fmt.Println(&quot;world&quot;)\n\n    fmt.Println(&quot;hello&quot;)\n\n    test()\n\n}</code></pre><ul>\n<li><p>defer</p>\n</li>\n<li><p>deferdefer</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>pointer</strong></p>\n<p><code>i= 42</code></p>\n<p><code>p := &amp;i</code></p>\n<ul>\n<li>nil</li>\n</ul>\n<p><strong>struct</strong></p>\n<pre><code>type Vertex struct {\n\n    X int\n\n    Y int\n\n}\n\nfunc main() {\n\n    v := Vertex{1, 2}\n\n    p := &amp;v\n\n    p.X = 666\n\n    fmt.Println(v)\n\n}</code></pre><ul>\n<li>v.X p.X</li>\n</ul>\n<p><strong>array</strong></p>\n<pre><code>var a [2]string\n\na[0] = &quot;Hello&quot;\n\na[1] = &quot;World&quot;\n\nfmt.Println(a)</code></pre><ul>\n<li>array</li>\n</ul>\n<p><strong>slice</strong></p>\n<pre><code>primes := [6]int{2, 3, 5, 7, 11, 13}\n\nvar s []int = primes[:4]  //\n\nfmt.Println(s)</code></pre><ul>\n<li><p></p>\n</li>\n<li><p><code>a[low:high];</code>low0highlen</p>\n</li>\n<li><p>make <code>make([]int, len, cap)</code></p>\n</li>\n<li><p></p>\n</li>\n<li><p>append </p>\n</li>\n</ul>\n<p><strong>range</strong></p>\n<ul>\n<li><p>range slice inedx, value</p>\n</li>\n<li><p>range map key, value</p>\n</li>\n<li><p> <code>_</code> </p>\n</li>\n</ul>\n<p><strong>map</strong></p>\n<ul>\n<li><p>  <code>delete(map1, key)</code></p>\n</li>\n<li><p>key <code>value ok = map1[key]</code></p>\n</li>\n</ul>\n<p><strong>function</strong></p>\n<p><code>func ()  {}</code></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>method</strong></p>\n<p><code>func (receiver) ()  {}</code></p>\n<ul>\n<li><p>receiver</p>\n</li>\n<li><p>methodreveiverpackage</p>\n</li>\n<li><p>receiverstruct</p>\n<p>receiver  receiverreceiver()()</p>\n</li>\n</ul>\n<p><strong>interface</strong></p>\n<pre><code>type T struct {\n\n    S string\n\n}\n\ntype I interface {\n\n    Abs() float64\n\n}\n\nfunc (t T) Abs() { // method\n\n    fmt.Println(t.S)\n\n}\n\nvar i I = T{&quot;hello&quot;}\n\ni.M()</code></pre><ul>\n<li><p>(value, type)</p>\n</li>\n<li><p><code>var i I</code>valuetypenil</p>\n</li>\n<li><p><code>var i interface{}</code></p>\n</li>\n</ul>\n<p><code>s, ok := i.(string)</code> string</p>\n<ul>\n<li><p>fmtString</p>\n</li>\n<li><p>goerrorError</p>\n</li>\n</ul>\n<pre><code>type Stringer interface {\n\n    String() string\n\n}\n\n\n\ntype error interface {\n\n    Error() string\n\n}</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>goroutines</strong></p>\n<ul>\n<li>Gogoroutinessync</li>\n</ul>\n<p><strong>channels</strong></p>\n<pre><code>ch &lt;- v    // vch\n\nv := &lt;-ch  // chv\n\n\n\n\n// \n\nch := make(chan int)</code></pre><ul>\n<li><p>channel &lt;-</p>\n</li>\n<li><p>channel</p>\n</li>\n<li><p>channel  <code>make(chan int, 100)</code>, </p>\n</li>\n<li><p>closeok <code>v, ok := &lt;- ch</code>panicfor rangeclose</p>\n</li>\n</ul>\n<p><strong>select</strong></p>\n<ul>\n<li><p>select gotroutine selectcase</p>\n</li>\n<li><p>select defaultcasedefault</p>\n</li>\n</ul>\n"},{"title":"Hello, Hexo","top":true,"cover":false,"toc":true,"img":"/medias/files/hexo.png","mathjax":true,"date":"2020-01-14T07:27:31.000Z","password":null,"summary":"Hexo, . . HexoGithub Flavored Markdown, Octopress. .","_content":"\n> Hexo\n\n### \n\nHexo + GithubHexowordpressHexopickHello Hexo\n\n## 2020.6.26\n\n1`www.yteng3456.xyz`phpHexo+Github\n\n## 2021.06.30\n\nhexo \n1._config.yml post_asset_folder: falsetrue\n2.`hexo new hello`\n\n```\n![](1.png)\n```\n\nhexogithub\n\n- gitgitssh key\n- nodejs\n- hexo `npm install -g hexo-cli `\n- git `npm install hexo-deployer-git --save`\n-  `npm install https://github.com/CodeFalling/hexo-asset-image --save`\n\n`hexo d``typeError [ERR_INVALID_ARG_TYPE]: The \"mode\" argument must be integer. Received an instance of Object`\nnodejshexo\nnodejs\n\n## 2021.08.15\n\nhexo\n\n`<!--more-->`\n\n`<center><center/>` \n\n`<br/>`\n\n`![]``<img src='' width='20' height='20>`\n\n## 2022.05.22\n\n`https://godweiyang.com/`\nMatery`https://blog.csdn.net/kuashijidexibao/article/details/112971657`\n\n\n\n|           |                      |                                                                                                    |\n| ------------- | ----------------------- | ---------------------------------------------------------------------------------------------------- |\n| title         | markdown            |                                                                                        |\n| date          |               |                                                                                                      |\n| author        |  _config.yml  author |                                                                                                      |\n| img           | featureImages      |                                                                                          |\n| top           | true                    | ()toptrue                                                                   |\n| cover         | false                   |                                                                                    |\n| coverImg      |                        |                                                               |\n| password      |                        |                                                                         |\n| toc           | true                    |  TOC TOC  config.yml  toc                                          |\n| mathjax       | false                   |   mathjax _config.yml                                            |\n| summary       |                        |                                           |\n| categories    |                        |                                                                      |\n| tags          |                        |                                                                                       |\n| reprintPolicy | cc_by                   |   cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint  pay  |\n","source":"_posts/hexo_new.md","raw":"---\ntitle: Hello, Hexo\ntop: true\ncover: false\ntoc: true\nimg: /medias/files/hexo.png\nmathjax: true\ndate: 2020-01-14 15:27:31\npassword:\nsummary: Hexo, . . HexoGithub Flavored Markdown, Octopress. .\ntags:\n- Hexo\ncategories:\n- \n---\n\n> Hexo\n\n### \n\nHexo + GithubHexowordpressHexopickHello Hexo\n\n## 2020.6.26\n\n1`www.yteng3456.xyz`phpHexo+Github\n\n## 2021.06.30\n\nhexo \n1._config.yml post_asset_folder: falsetrue\n2.`hexo new hello`\n\n```\n![](1.png)\n```\n\nhexogithub\n\n- gitgitssh key\n- nodejs\n- hexo `npm install -g hexo-cli `\n- git `npm install hexo-deployer-git --save`\n-  `npm install https://github.com/CodeFalling/hexo-asset-image --save`\n\n`hexo d``typeError [ERR_INVALID_ARG_TYPE]: The \"mode\" argument must be integer. Received an instance of Object`\nnodejshexo\nnodejs\n\n## 2021.08.15\n\nhexo\n\n`<!--more-->`\n\n`<center><center/>` \n\n`<br/>`\n\n`![]``<img src='' width='20' height='20>`\n\n## 2022.05.22\n\n`https://godweiyang.com/`\nMatery`https://blog.csdn.net/kuashijidexibao/article/details/112971657`\n\n\n\n|           |                      |                                                                                                    |\n| ------------- | ----------------------- | ---------------------------------------------------------------------------------------------------- |\n| title         | markdown            |                                                                                        |\n| date          |               |                                                                                                      |\n| author        |  _config.yml  author |                                                                                                      |\n| img           | featureImages      |                                                                                          |\n| top           | true                    | ()toptrue                                                                   |\n| cover         | false                   |                                                                                    |\n| coverImg      |                        |                                                               |\n| password      |                        |                                                                         |\n| toc           | true                    |  TOC TOC  config.yml  toc                                          |\n| mathjax       | false                   |   mathjax _config.yml                                            |\n| summary       |                        |                                           |\n| categories    |                        |                                                                      |\n| tags          |                        |                                                                                       |\n| reprintPolicy | cc_by                   |   cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint  pay  |\n","slug":"hexo_new","published":1,"updated":"2022-07-04T14:25:15.525Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre9h000aagvtaxknxyi2","content":"<blockquote>\n<p>Hexo</p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Hexo + GithubHexowordpressHexopickHello Hexo</p>\n<h2 id=\"2020-6-26\"><a href=\"#2020-6-26\" class=\"headerlink\" title=\"2020.6.26\"></a>2020.6.26</h2><p>1<code>www.yteng3456.xyz</code>phpHexo+Github</p>\n<h2 id=\"2021-06-30\"><a href=\"#2021-06-30\" class=\"headerlink\" title=\"2021.06.30\"></a>2021.06.30</h2><p>hexo <br>1._config.yml post_asset_folder: falsetrue<br>2.<code>hexo new hello</code></p>\n<pre><code>![](1.png)</code></pre><p>hexogithub</p>\n<ul>\n<li>gitgitssh key</li>\n<li>nodejs</li>\n<li>hexo <code>npm install -g hexo-cli</code></li>\n<li>git <code>npm install hexo-deployer-git --save</code></li>\n<li> <code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code></li>\n</ul>\n<p><code>hexo d</code><code>typeError [ERR_INVALID_ARG_TYPE]: The &quot;mode&quot; argument must be integer. Received an instance of Object</code><br>nodejshexo<br>nodejs</p>\n<h2 id=\"2021-08-15\"><a href=\"#2021-08-15\" class=\"headerlink\" title=\"2021.08.15\"></a>2021.08.15</h2><p>hexo</p>\n<p><code>&lt;!--more--&gt;</code></p>\n<p><code>&lt;center&gt;&lt;center/&gt;</code> </p>\n<p><code>&lt;br/&gt;</code></p>\n<p><code>![]</code><code>&lt;img src=&#39;&#39; width=&#39;20&#39; height=&#39;20&gt;</code></p>\n<h2 id=\"2022-05-22\"><a href=\"#2022-05-22\" class=\"headerlink\" title=\"2022.05.22\"></a>2022.05.22</h2><p><code>https://godweiyang.com/</code><br>Matery<code>https://blog.csdn.net/kuashijidexibao/article/details/112971657</code><br><br></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>title</td>\n<td>markdown</td>\n<td></td>\n</tr>\n<tr>\n<td>date</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>author</td>\n<td> _config.yml  author</td>\n<td></td>\n</tr>\n<tr>\n<td>img</td>\n<td>featureImages </td>\n<td></td>\n</tr>\n<tr>\n<td>top</td>\n<td>true</td>\n<td>()toptrue</td>\n</tr>\n<tr>\n<td>cover</td>\n<td>false</td>\n<td></td>\n</tr>\n<tr>\n<td>coverImg</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>password</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>toc</td>\n<td>true</td>\n<td> TOC TOC  config.yml  toc </td>\n</tr>\n<tr>\n<td>mathjax</td>\n<td>false</td>\n<td>  mathjax _config.yml </td>\n</tr>\n<tr>\n<td>summary</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>categories</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>tags</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>reprintPolicy</td>\n<td>cc_by</td>\n<td>  cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint  pay </td>\n</tr>\n</tbody></table>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<blockquote>\n<p>Hexo</p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Hexo + GithubHexowordpressHexopickHello Hexo</p>\n<h2 id=\"2020-6-26\"><a href=\"#2020-6-26\" class=\"headerlink\" title=\"2020.6.26\"></a>2020.6.26</h2><p>1<code>www.yteng3456.xyz</code>phpHexo+Github</p>\n<h2 id=\"2021-06-30\"><a href=\"#2021-06-30\" class=\"headerlink\" title=\"2021.06.30\"></a>2021.06.30</h2><p>hexo <br>1._config.yml post_asset_folder: falsetrue<br>2.<code>hexo new hello</code></p>\n<pre><code>![](1.png)</code></pre><p>hexogithub</p>\n<ul>\n<li>gitgitssh key</li>\n<li>nodejs</li>\n<li>hexo <code>npm install -g hexo-cli</code></li>\n<li>git <code>npm install hexo-deployer-git --save</code></li>\n<li> <code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code></li>\n</ul>\n<p><code>hexo d</code><code>typeError [ERR_INVALID_ARG_TYPE]: The &quot;mode&quot; argument must be integer. Received an instance of Object</code><br>nodejshexo<br>nodejs</p>\n<h2 id=\"2021-08-15\"><a href=\"#2021-08-15\" class=\"headerlink\" title=\"2021.08.15\"></a>2021.08.15</h2><p>hexo</p>\n<p><code>&lt;!--more--&gt;</code></p>\n<p><code>&lt;center&gt;&lt;center/&gt;</code> </p>\n<p><code>&lt;br/&gt;</code></p>\n<p><code>![]</code><code>&lt;img src=&#39;&#39; width=&#39;20&#39; height=&#39;20&gt;</code></p>\n<h2 id=\"2022-05-22\"><a href=\"#2022-05-22\" class=\"headerlink\" title=\"2022.05.22\"></a>2022.05.22</h2><p><code>https://godweiyang.com/</code><br>Matery<code>https://blog.csdn.net/kuashijidexibao/article/details/112971657</code><br><br></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>title</td>\n<td>markdown</td>\n<td></td>\n</tr>\n<tr>\n<td>date</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>author</td>\n<td> _config.yml  author</td>\n<td></td>\n</tr>\n<tr>\n<td>img</td>\n<td>featureImages </td>\n<td></td>\n</tr>\n<tr>\n<td>top</td>\n<td>true</td>\n<td>()toptrue</td>\n</tr>\n<tr>\n<td>cover</td>\n<td>false</td>\n<td></td>\n</tr>\n<tr>\n<td>coverImg</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>password</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>toc</td>\n<td>true</td>\n<td> TOC TOC  config.yml  toc </td>\n</tr>\n<tr>\n<td>mathjax</td>\n<td>false</td>\n<td>  mathjax _config.yml </td>\n</tr>\n<tr>\n<td>summary</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>categories</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>tags</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>reprintPolicy</td>\n<td>cc_by</td>\n<td>  cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint  pay </td>\n</tr>\n</tbody></table>\n"},{"title":"kafka - ","img":"/medias/files/kafka.png","summary":"ZooKeeper","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2022-10-16T06:08:24.000Z","password":null,"_content":"\nkafka\n- KafkaKafka\n- KafkaKafkaKafka\n- Kafka\n\n# Kafka\n\n\n\n## \n\n- ProducerKafka\n- ConsumerKafka\n- BrokerKafkaBrokerKafkaKafka\n- Kafka\n- IO\n- OffsetoffsetKafkaoffsetKafka\n- leaderfollowerleaderleaderfollowerleaderkafka\n- AR(assigned replicas)\n- ISR:leader(in-sync replicas)\n- OSR:leader (out-of-sync replicas)\n- HW:offsetoffset (high watermark)\n- LEO: offset (Log End Offset)\n\nleaderfollower\n(leader)\nkafkafollowerfollowerleaderleader(followerleaderleader)\n\n![](kafka-producer-consumer/img-20221016191323.png)\n\n\n## \n\n\n```\n./bin/kafka-topics.sh --zookeeper localhost:2181/kafka --create --topic topic-demo --replication-factor 3 --partitions 4\n\n\n./bin/kafka-topics.sh --zookeeper localhost:2181/kafka --describe --topic topic-demo \n\n./bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic-demo\n\n./bin/kafka-console-producer.sh --broker-list localhost:9092 --topic topic-demo\n```\n\n`zookeeper.connect`  zk\n`listeners` broker\n`broker.id` broker\n`log.dir` kafka/tmp/kafka-logs\n`log.dirs` \n`message.max.bytes` broker\n\n# \n\n## \n\n1. \n2. \n3. \n4. \n\n```java\npublic static Properties initConfig() {\n\tProperties props = new Properties();\n\tprops.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, brokerList);\n}\n\npublic static void main(String[] args) {\n\tProperties props = initConfig();\n\tKafkaProducer<String, String> producer = new KafkaProducer<>(props);\n\tProducerRecord<String, String> record = new ProducerRecord<>(topic, \"Hello, Kafka\");\n\t\n\ttry {\n\t\tproducer.send(record);\n\t} catch (Exception e) {\n\t\te.printStackTrace();\n\t}\n}\n```\n\n\n\nProducerRecord \n\n```java\npublic class ProducerRecord<K, V> {\n\tprivate final String topic;\n\tprivate final Integer paitition;\n\tprivate final Headers headers;\n\tprivate final K key;\n\tprivate final V value;\n\tprivate final Long timestamp;\n}\n```\n\n`bootstrap.servers` kafkabroker\n`key.serializer` \n`value.serializer`\n\n- KafkaProducerKafkaProducerKafkaProducer\n\n- ProducerRecord topicvalue\n\n\n\n### \n\n\nsendCallback\n\nsendFutureKafka\n\nsendCallback\n\n\n\n\n\nretries\n\n\n\n\n\nrecord1record2KafkaProducercallback1callback2\n\n\n\n### \n\nKafkaKafka\n\n\n\norg.apache.kafka.common.serialization.Serializer\n\n\n\n```java\npublic void configure(Map<String, ?>configs,boolean isKey)\npublic byte[]serialize(String topic, T data)\npublic void close()\n```\n\n\n\nAvroJSONThriftProtobufProtostuff\n\n\n\n### \n\n\n\n```java\npublic int partition(String topic, Object key,byte[] keyBytes, Object Value, byte[] valueBytes,Cluster cluster);\npublic void close();\n```\n\n\n\n- ProducerRecordpartitionpartition\n\n- keypartitionKafka xx.Partitionerpartitionclose\n  keynullkeykeykeynull\n\n  \n  \n\n\n\n### \n\n\n\nProducerInterceptor\n\n\n\nKafkaProduceronAcknowledgementCallback\n\n```java\npublic ProducerRecord<K, V> onSend(ProducerRecord<K, V> record);\npublic void onAcknowledgement(RecordMetadata metadata, Exception exception);\npublic void close();\n```\n\n\n\nKafkaProducerinterceptor.classes\n\n\n## \n\n### \n\n\n\n![](kafka-producer-consumer/producer-structure.jpg)\n\n\n\nSenderSenderRecordAccumulatorKafka\n\n\n\n`buffer.memory` RecordAccumulator\n\n`max.block.ms`\n\nRecordAccumulatorbuffer.memoryproducersendmax.block.ms\n\n\nRecordAccumulatorProducerBatchProducerBatchProducerRecord\n\n\n\nkafkajava.io.ByteBufferRecordAccumulatorBufferPoolByteBufferBufferPoolByteBuffer`batch.size`\n\n`batch.size` ByteBuffer\n\n\n\nProducerBatchbatch.sizeProducerRecordRecordAccumulator()ProducerBatchProducerBatchProducerRecordProducerBatch\n\nProducerBatchProducerRecordbatch.sizebatch.sizeProducerBatchByterBufferProducerBatch\n\n\n\nSenderRecordAccumulator`<Deque<ProducerBatch>>`  `<Node, List<ProducerBatch>>`Nodekafkabroker\n\nSender`<Node, Request>`NodeSenderkafkaInFlightRequests`Map<NodeId, Deque<Request>>`\n\n`max.in.flight.requests.per.connecttion`5\n\n\n\n### \n\nNode\n\nleastLoadedNode\nleastLoadedNodeNode\n\nleastLoadedNode********\n\n\n\n\n```\nProducerRecord<string, string> record = new ProducerRecord<>(topic, \"hello\");\n```\n\n\nKafkaProducerleaderleaderbroker****\n\n\nbootstrap.serversbrokerbroker\n\nleastLoadedNodeNodeMetadataRequestSenderMetadataRequestinFlightRequestsSendersynchronized  final\n\n\n\n### \n\n`acks`\n\nacks = 1\n\nacks = 0 \n\n`max.request.size` \n\nretries  retry.backoff.ms\n\n`retries`\n\n`retry.backoff.ms` 100ms\n\n`compression.type` none\n\n`connections.max.idle.ms` \n\n`linger.ms` ProducerBatchProducerRecord\n\n`receive.buffer.bytes` Socket  32kb\n\n`send.buffer.bytes` Socket\n\n`request.timeout.ms` Producer30000ms\n\n\n\n# \n\n\n\n## \n\n\n\n\n\n\n\n\n\n\n\n\n\nkafka\n\n- \n- \n\n\n\n`group.id`\n\n\n\n## \n\n1. \n2. \n3. \n4. \n5. \n\n```java\npublic class KafkaConsumerAnalysis {\n\tpublic static final String brokerList = \"\";\n\t...\n\t\n\tpublic static Properties initConfig() {\n\t\tProperties props = new Properties();\n\t\tprops.put(\"bootstrap.servers\", brokerList);\n\t}\n\t\n\tpublic static void main() {\n\t\tProperties props = initConfig();\n\t\tKafkaConsumer<String, String> consumer = new KafkaConsmer<>(props);\n\t\tconsumer.subscribe(Arrays.asList(topic));\n\t\t\n\t\ttry {\n\t\t\twhile(isRunning.get()) {\n\t\t\t\tConsumerRecrds<String, String> records = consumer.poll(Duration.ofMillis(1000));\n\t\t\t\t\n\t\t\t} catch (Exception e) {\n\t\t\t\tlog.error(\"\");\n\t\t\t} finally {\n\t\t\t\tconsumer.close();\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n\n\n### \n\n`bootstrap.servers` broker\n\n`group.id` \n\n`key.deserializer`  \n\n`value.deserializer`\n\norg.apache.kafka.clients.consumer.ConsumerConfig\n\nConsumerConfig\n\nConsumerConfig.GROUP_ID_CONFIG\n\n\n\n### \n\nsubscribe\n\n```java\npublic void subscribe(Collection<String> topics, ConsumerRebalanceListener listener);\npublic void subscribe(Collection<String> topics);\npublic void subscribe(Pattern pattern, ConsumerRebalanceListener listener);\npublic void subscribe(Pattern pattern);\n```\n\n\n\n1.`subscribe(Collection<String> topics)`\n\n2.\n `cosumer.subscribe(Pattern.compile(\"topic.*\"))`\n`ConsumerRebalanceListener`\n\n3.\n\n```java\npublic void assign(Collection<TopicPartition> partitions);\n```\n`public List<PartitionInfo> partitionsFor(String topic)`\n\n\nTopicPartition\n\n```java\npublic final class TopicPartition implements Serializable {\n\tprivate final int partition; //\n\tprivate final String topic; //\n\t...\n}\n```\n\n\n\npartitionsFor()\n\n```java\npublic List<PartitionInfo> partitionsFor(String topic)\n\npublic class PartitionInfo {\n\tprivate final String topic;\n\tprivate final int paitition;\n\tprivate final Node leader;\n\tprivate final Node[] replicas;  //AR\n\tprivate final Node[] inSyncReplicas; //ISR\n\tprivate final Node offlineReplicas;  //OSR\n}\n```\n\n\n\n\n\n```java\nconsumer.unsubscribe()\n```\n\nIllegalStateException\n\n\n\n:\n  `AUTO_TOPICS`\n `AUTO_PATTERN`\n `USER_ASSIGNED`\n\nsubscribe()\n\n### \n\nDeserializer\n\n```java\npublic void configure(Map<String, ?> configs, boolean isKey)\npublic T deserialize(String topic, byte[] data)\npublic void close()\n```\n\n### \n\n\n\n\n\npoll:\n\n```java\npublic ConsumerRecords<K, V> poll(final Duration timeout) \n```\n\ntimeoutpoll\n\nConsumerRecord\n\n```java\npublic class ConsumerRecord<K, V> {\n  private final String topic;\n  private final int partition; \n  private final long offset; // \n  private final timestamp; \n  private final TimestampType timestampType;\n  private final int serializedKeySize;\n  private final int serializedValueSize;\n  private final Headers headers; // \n  private final K key;\n  private final V value;\n  private volatile Long checksum; // CRC32\n  // ...\n}\n```\n\niterator\n\n`public Iterator<ConsumerRecord<K, V>> iterator()`\n\n\n`public List<ConsumerRecord<K, V>> records(TopicPartition partition)`\n\n\n`public Iterable<ConsumerRecord<K, V>> records(String topic)`\n\n\n### \n\nkafkaoffset\noffset\noffset\n\n\npoll\nkafka `_consumer_offsets`\n\nxlastConsumedOffsetcommited offset\n x + 1position\nposition = commited offset = lastConsumedOffset + 1\n\n```java\npublic long position(TopicPartition partition)\npublic OffsetAndMetadata committed(TopicPartition partition)\n```\n\n\nx [x, x+8]poll\n\nx+5x\n\n \nx+8x+5x+8\n\nkafka`enable.auto.commit``auto.commit.interval.ms`poll\n\n\n\n\nABB\n\n\n\n`public void commitSync`\n`public void commitSync(final Map<TopicOartition, OffsetAndMetadata> offsets)`\n\n\n`public void commitAsync`\n`public void commitAsync(OffsetCommitCallback callback)`\n`public void commitAsync(final Map<TopicPartition, OffsetAndMetadata> offsets, OffsetCommitCallback callback)`\n\ncommitSyncpoll\n\ncommitSyncoffsets\n\nOffsetCommitCallbackonComplete()\n\nx x+yxx\n\n\n### \n\npauseresume\n\n```java\npublic void pause(Collection<TopicPartition> partitions)\npublic void resume(Collection<TopicPartition> partitions)\n```\n\n`public Set<TopicPartition> paused()`\n\nkafka consumerclose\n```java\npublic void close()\npublic void close(Duration timeout)\npublic void close(long timeout, TimeUnit timeUnit)\n```\ntimeout30s\n\n### \n\n_consumer_offsets\n\n`auto.offset.reset`\n\n`latest` \n`earliest` \n`none`  NoOffsetForPartitionException\n\nseek\n```java\npublic void seek(TopicPartition partition, long offset)\n```\nseekpollseekpoll\n\n```java\nKafkaConsumer <String String> consumer= new KafkaConsumer<> (props); \ncosumer.subscribe(Arrays asList(topic));\nconsumer.poll(Duratio ofMillis(10000) ; \nSet<TopicPartition> assignment = consumer.assignment(); \nfor (Top cPartition tp : assignment) { \nconsumer.seek(tp , 10); \nwhile (true) { \nConsumerRecords<String , String> records = consumer.poll(DurationofMllis(1000)); \n//consume the record .\n}\n```\n  poll   \n`consumer poll(Duration.ofMillis(0)) ;`\n\n  seek  poll  0 poll  \n\n\n seek  IllegalStateException  subscrib   seek \n\n```java\nconsumer.subscribe(Arrays.asList(topic)) ; \nconsumer.seek(new TopicPartition(topic, 0), 10 );\n```\n\njava.lang.I llegalStateException: No current assignment for partition topic- demo - 0\n\n\nseek\n```java\npublic Map<Top cPartition Long> endOffsets( Collection<TopicPartition> partitions) \npublic Map<TopicPartition , Long> endOffsets( Collection<Top cPartit on> part tions\nDuration timeout)\n\npublic Map<TopicPartition , Long> beginningOff sets (Collection<TopicPartition> partitions) \npublic Map<TopicPart tion Long> beginningOffsets(Collection<TopicPartition> partitions, \nDuration timeout)\n\npublic void seekToBeginning(Collection<TopicPartition> partitions) \npublic void seekToEnd Collection<TopicPartition> partitions)\n\npublic Map<TopicPartition , OffsetAndTimestamp> offsetsForTimes(Map<TopicPartition, Long> timestampsToSearch) \npublic Map<TopicPartition OffsetAndTimestamp> offsetsForTimes(Map<TopicPartition, Long> t imestampsToSearch,Duration timeout )\n```\n\n### \n\n  \n\n  \n\n\n\n```java\nvoid onPartitionsRevoked(Collection<TopicPartition> partitions)\nvoid onPartitionsAssigned(Collection<TopicPartition> partitions)\n```\n\n```java\nMap<TopicPartition, OffsetAndMetadata> currentOffsets =new HashMap<>() ; \nconsumer.subscribe(Arrays.asList(topic) , new ConsumerRebalanceListener () { \n@Override \npublic void onPartitionsRevoked(Collection<TopicPartition> part tions) { \nconsumer.commitSync(currentOffsets) ; \ncurrentOffsets.clear(); \n@Override\npublic void onPartitionsAssigned(Collection<TopicPartition partitions) { \n//do nothing . \n}) .,\n```\n\n### \n\n org.apache.kafka.clients.consumer.Consumerlnterceptor \n```java\npublic ConsumerRecords<K, V> onConsume(ConsumerRecords<K , V> records);\npublic void onCommit(Map<TopicPartition, OffsetAndMetadata> offsets);\npublic void close();\n```\n\n\nKafkaconsumer  poll  Consume \n KafkaConsumer  onCommit \n\n interceptor classes \n\n### \n\nKatkaProducer  KafkaConsumer  KafkaConsumer acquire    ConcurrentModifcationException \n\n```java\nprivate final AtomicLong currentThread = new Atom cLong(NO CURRENT THREAD ); //Kaf aConsumer \n\nprivate void acquire() { \nlong threadid = Thread.currentThread().getid();\nif (threadid != currentThread.get() && !currentThread.compareAndSet(NO_CURRENT THREAD, threadid) ) \nthrow new ConcurrentModificationException \n(\"KafkaConsumer is not safe for multi- threaded access \") ; \nrefcount.incrementAndGet();\n}\n```\n\nacquire release \n\n```java\nprivate void release() \nif (refcount.decrementAndGet () == 0) {\n\tcurrentThread.set(NO CURRENT THREAD);\n}\n```\n\n  KafkaConsumer \n\n![](kafka-producer-consumer/img-20221030190716.png)\n\n \n\n  assign seek  \n\n```java\npublic static void main(String[] args) { \n\tProperties props = itConfig (); \n\tint consumerThreadNum = 4 ; \n\tfor(int i=O;i<consumerThreadNum;i++) { \n\tnew KafkaConsumerThread(props,topic).start();\n\t}\n}\n\npublic static class KafkaConsumerThread extends Thread{\n\tprivate KafkaConsumer<String , String> kafkaConsumer;\n\tpublic KafkaConsumerThread(Properties props, String topic) { \n\tthis.kafkaConsumer =new KafkaConsumer<>(props); \n\tthis.kafkaConsumer.subscribe(Arrays asList(topic));\n}\n\n\t@Override \n\tpublic void run() {\n\ttry { \n\t\twhile (true) { \n\t\tConsumerRecords<String, String> records = \n\t\tkafkaConsumer.poll (Duration.ofMill (1 00)) ; \n\t\tfor (ConsumerRecord<String, Stri g> record : records) { \n\t\t//   \n\t\t}\n\t}\n\t} catch (Exception e) { \n\t\te.printStackTrace(); \n\t} finally { \n\t\tkafkaConsumer.close();\n\t}\n\t}\n```\n\n TCP   consumerThreadNum  \n\n  poll  \n\n![](kafka-producer-consumer/img-20221030193459.png)\n\n```java\n\t@Override \n\tpublic void run() {\n\ttry { \n\t\twhile (true) { \n\t\tConsumerRecords<String, String> records = \n\t\tkafkaConsumer.poll(Duration.ofMill (1 00)) ; \n\t\tif (!records.isEmpty () ) { \n\t\t\texecutorService.submit(new RecordsHandler(records));  // hander\n\t\t}\n\t}\n\t} catch (Exception e) { \n\t\te.printStackTrace(); \n\t} finally { \n\t\tkafkaConsumer.close();\n\t}\n\t}\n\n\tpublic static class RecordsHandler extends Thread{ \n\tpublic final ConsumerRecords<String, String> records;\n\n\tpublic RecordsHandl er (ConsumerRecords<String, String> records) ( \n\t\tthis.records =records;\n\t}\n\n\t@Override \n\tpublic void run() {\n\t\t// records\n\t}\n\t}\n\n```\n\nRecordHandler  KafraConsumerThread  RecordHandler \n\n\n offsets \n\n![](kafka-producer-consumer/img-20221030200350.png)\n\n RecordHandler offsets  KafraConsumerThread  poll  offsets \n\n```java\nfor (TopicPartition tp : records .partitions()) { \n\tList<ConsumerRecord<String , String> tpRecords = records . records(tp); \n\t//  tpRec ords\n\tlong lastConsumedOffset = tpRecords . get (tpRecords. size() - 1) . offset() ; \n\tsynchronized (offsets) { \n\t\tif offsets.co ta  sKey (tp)) { \n\t\t\toffsets.put(tp, new OffsetAndMetadata(lastConsumedOffset + l)) ; \n\t\t} else { \n\t\t\tlong position = offsets . get(tp) .offset() ; \n\t\t\tif (position < lastConsumedOffset + 1) { \n\t\t\toffsets.put(tp, new OffsetAndMetadata(lastConsumedOffset + l))\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n```java\nsynchronized (offsets) { \nif (!offsets. isEmpty () ) { \n\tkafkaConsumer.commitSync(offsets); \n\toffsets.clear();\n\t}\n}\n```\n\n RecordHand erl  offset 99 RecordHand er2  offset 100 99  RecordHandler  200  99\n\n   \n\n![](kafka-producer-consumer/img-20221030201350.png)\n\nstartOffset  endOffset  startOffset     startOffset  \n\n \n\n   startOffset    startOffset \n\n### \n\n`fetch.min.bytes`Consumer  poll   Kafka \n 1B\n\n`fetch .max.bytes` Consumer  Kafka  52428800  50MB\n\n`fetch.max.wait.ms` Kafka  500ms\n\n`max.partition.fetch.bytes` Consumer  1048576 (B)\n\n`max.poll.records` Consumer  500 \n\n`connections.max.idle.ms` 540000 (ms  \n\n`exclude.internal.topics`Kafka _consumer_offsets  _transaction_state exclude.internal.topics Kafka  true \n\n`receive.buffer.bytes` Socket  65536 (B)\n\n`send.buffer.bytes` Socket 13 1072 (B)\n\n`request.timeout.ms` Consumer  30000ms\n\n`metadata.max.age.ms` 300000 ms\n\n`reconnect.backoff.ms`50ms\n\n`retry.backo ms`\n\n`isolation.level`read uncommitted \n read committed \n\n![](kafka-producer-consumer/img-20221030202942.png)\n\n![](kafka-producer-consumer/img-20221030202957.png)\n\n\n\n\n\n\n\n\n\n","source":"_posts/kafka-producer-consumer.md","raw":"---\ntitle: kafka - \nimg: /medias/files/kafka.png\nsummary: ZooKeeper\ntags:\n  - \n  - Kafka\ncategories:\n  - \ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2022-10-16 14:08:24\npassword:\n---\n\nkafka\n- KafkaKafka\n- KafkaKafkaKafka\n- Kafka\n\n# Kafka\n\n\n\n## \n\n- ProducerKafka\n- ConsumerKafka\n- BrokerKafkaBrokerKafkaKafka\n- Kafka\n- IO\n- OffsetoffsetKafkaoffsetKafka\n- leaderfollowerleaderleaderfollowerleaderkafka\n- AR(assigned replicas)\n- ISR:leader(in-sync replicas)\n- OSR:leader (out-of-sync replicas)\n- HW:offsetoffset (high watermark)\n- LEO: offset (Log End Offset)\n\nleaderfollower\n(leader)\nkafkafollowerfollowerleaderleader(followerleaderleader)\n\n![](kafka-producer-consumer/img-20221016191323.png)\n\n\n## \n\n\n```\n./bin/kafka-topics.sh --zookeeper localhost:2181/kafka --create --topic topic-demo --replication-factor 3 --partitions 4\n\n\n./bin/kafka-topics.sh --zookeeper localhost:2181/kafka --describe --topic topic-demo \n\n./bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic-demo\n\n./bin/kafka-console-producer.sh --broker-list localhost:9092 --topic topic-demo\n```\n\n`zookeeper.connect`  zk\n`listeners` broker\n`broker.id` broker\n`log.dir` kafka/tmp/kafka-logs\n`log.dirs` \n`message.max.bytes` broker\n\n# \n\n## \n\n1. \n2. \n3. \n4. \n\n```java\npublic static Properties initConfig() {\n\tProperties props = new Properties();\n\tprops.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, brokerList);\n}\n\npublic static void main(String[] args) {\n\tProperties props = initConfig();\n\tKafkaProducer<String, String> producer = new KafkaProducer<>(props);\n\tProducerRecord<String, String> record = new ProducerRecord<>(topic, \"Hello, Kafka\");\n\t\n\ttry {\n\t\tproducer.send(record);\n\t} catch (Exception e) {\n\t\te.printStackTrace();\n\t}\n}\n```\n\n\n\nProducerRecord \n\n```java\npublic class ProducerRecord<K, V> {\n\tprivate final String topic;\n\tprivate final Integer paitition;\n\tprivate final Headers headers;\n\tprivate final K key;\n\tprivate final V value;\n\tprivate final Long timestamp;\n}\n```\n\n`bootstrap.servers` kafkabroker\n`key.serializer` \n`value.serializer`\n\n- KafkaProducerKafkaProducerKafkaProducer\n\n- ProducerRecord topicvalue\n\n\n\n### \n\n\nsendCallback\n\nsendFutureKafka\n\nsendCallback\n\n\n\n\n\nretries\n\n\n\n\n\nrecord1record2KafkaProducercallback1callback2\n\n\n\n### \n\nKafkaKafka\n\n\n\norg.apache.kafka.common.serialization.Serializer\n\n\n\n```java\npublic void configure(Map<String, ?>configs,boolean isKey)\npublic byte[]serialize(String topic, T data)\npublic void close()\n```\n\n\n\nAvroJSONThriftProtobufProtostuff\n\n\n\n### \n\n\n\n```java\npublic int partition(String topic, Object key,byte[] keyBytes, Object Value, byte[] valueBytes,Cluster cluster);\npublic void close();\n```\n\n\n\n- ProducerRecordpartitionpartition\n\n- keypartitionKafka xx.Partitionerpartitionclose\n  keynullkeykeykeynull\n\n  \n  \n\n\n\n### \n\n\n\nProducerInterceptor\n\n\n\nKafkaProduceronAcknowledgementCallback\n\n```java\npublic ProducerRecord<K, V> onSend(ProducerRecord<K, V> record);\npublic void onAcknowledgement(RecordMetadata metadata, Exception exception);\npublic void close();\n```\n\n\n\nKafkaProducerinterceptor.classes\n\n\n## \n\n### \n\n\n\n![](kafka-producer-consumer/producer-structure.jpg)\n\n\n\nSenderSenderRecordAccumulatorKafka\n\n\n\n`buffer.memory` RecordAccumulator\n\n`max.block.ms`\n\nRecordAccumulatorbuffer.memoryproducersendmax.block.ms\n\n\nRecordAccumulatorProducerBatchProducerBatchProducerRecord\n\n\n\nkafkajava.io.ByteBufferRecordAccumulatorBufferPoolByteBufferBufferPoolByteBuffer`batch.size`\n\n`batch.size` ByteBuffer\n\n\n\nProducerBatchbatch.sizeProducerRecordRecordAccumulator()ProducerBatchProducerBatchProducerRecordProducerBatch\n\nProducerBatchProducerRecordbatch.sizebatch.sizeProducerBatchByterBufferProducerBatch\n\n\n\nSenderRecordAccumulator`<Deque<ProducerBatch>>`  `<Node, List<ProducerBatch>>`Nodekafkabroker\n\nSender`<Node, Request>`NodeSenderkafkaInFlightRequests`Map<NodeId, Deque<Request>>`\n\n`max.in.flight.requests.per.connecttion`5\n\n\n\n### \n\nNode\n\nleastLoadedNode\nleastLoadedNodeNode\n\nleastLoadedNode********\n\n\n\n\n```\nProducerRecord<string, string> record = new ProducerRecord<>(topic, \"hello\");\n```\n\n\nKafkaProducerleaderleaderbroker****\n\n\nbootstrap.serversbrokerbroker\n\nleastLoadedNodeNodeMetadataRequestSenderMetadataRequestinFlightRequestsSendersynchronized  final\n\n\n\n### \n\n`acks`\n\nacks = 1\n\nacks = 0 \n\n`max.request.size` \n\nretries  retry.backoff.ms\n\n`retries`\n\n`retry.backoff.ms` 100ms\n\n`compression.type` none\n\n`connections.max.idle.ms` \n\n`linger.ms` ProducerBatchProducerRecord\n\n`receive.buffer.bytes` Socket  32kb\n\n`send.buffer.bytes` Socket\n\n`request.timeout.ms` Producer30000ms\n\n\n\n# \n\n\n\n## \n\n\n\n\n\n\n\n\n\n\n\n\n\nkafka\n\n- \n- \n\n\n\n`group.id`\n\n\n\n## \n\n1. \n2. \n3. \n4. \n5. \n\n```java\npublic class KafkaConsumerAnalysis {\n\tpublic static final String brokerList = \"\";\n\t...\n\t\n\tpublic static Properties initConfig() {\n\t\tProperties props = new Properties();\n\t\tprops.put(\"bootstrap.servers\", brokerList);\n\t}\n\t\n\tpublic static void main() {\n\t\tProperties props = initConfig();\n\t\tKafkaConsumer<String, String> consumer = new KafkaConsmer<>(props);\n\t\tconsumer.subscribe(Arrays.asList(topic));\n\t\t\n\t\ttry {\n\t\t\twhile(isRunning.get()) {\n\t\t\t\tConsumerRecrds<String, String> records = consumer.poll(Duration.ofMillis(1000));\n\t\t\t\t\n\t\t\t} catch (Exception e) {\n\t\t\t\tlog.error(\"\");\n\t\t\t} finally {\n\t\t\t\tconsumer.close();\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n\n\n### \n\n`bootstrap.servers` broker\n\n`group.id` \n\n`key.deserializer`  \n\n`value.deserializer`\n\norg.apache.kafka.clients.consumer.ConsumerConfig\n\nConsumerConfig\n\nConsumerConfig.GROUP_ID_CONFIG\n\n\n\n### \n\nsubscribe\n\n```java\npublic void subscribe(Collection<String> topics, ConsumerRebalanceListener listener);\npublic void subscribe(Collection<String> topics);\npublic void subscribe(Pattern pattern, ConsumerRebalanceListener listener);\npublic void subscribe(Pattern pattern);\n```\n\n\n\n1.`subscribe(Collection<String> topics)`\n\n2.\n `cosumer.subscribe(Pattern.compile(\"topic.*\"))`\n`ConsumerRebalanceListener`\n\n3.\n\n```java\npublic void assign(Collection<TopicPartition> partitions);\n```\n`public List<PartitionInfo> partitionsFor(String topic)`\n\n\nTopicPartition\n\n```java\npublic final class TopicPartition implements Serializable {\n\tprivate final int partition; //\n\tprivate final String topic; //\n\t...\n}\n```\n\n\n\npartitionsFor()\n\n```java\npublic List<PartitionInfo> partitionsFor(String topic)\n\npublic class PartitionInfo {\n\tprivate final String topic;\n\tprivate final int paitition;\n\tprivate final Node leader;\n\tprivate final Node[] replicas;  //AR\n\tprivate final Node[] inSyncReplicas; //ISR\n\tprivate final Node offlineReplicas;  //OSR\n}\n```\n\n\n\n\n\n```java\nconsumer.unsubscribe()\n```\n\nIllegalStateException\n\n\n\n:\n  `AUTO_TOPICS`\n `AUTO_PATTERN`\n `USER_ASSIGNED`\n\nsubscribe()\n\n### \n\nDeserializer\n\n```java\npublic void configure(Map<String, ?> configs, boolean isKey)\npublic T deserialize(String topic, byte[] data)\npublic void close()\n```\n\n### \n\n\n\n\n\npoll:\n\n```java\npublic ConsumerRecords<K, V> poll(final Duration timeout) \n```\n\ntimeoutpoll\n\nConsumerRecord\n\n```java\npublic class ConsumerRecord<K, V> {\n  private final String topic;\n  private final int partition; \n  private final long offset; // \n  private final timestamp; \n  private final TimestampType timestampType;\n  private final int serializedKeySize;\n  private final int serializedValueSize;\n  private final Headers headers; // \n  private final K key;\n  private final V value;\n  private volatile Long checksum; // CRC32\n  // ...\n}\n```\n\niterator\n\n`public Iterator<ConsumerRecord<K, V>> iterator()`\n\n\n`public List<ConsumerRecord<K, V>> records(TopicPartition partition)`\n\n\n`public Iterable<ConsumerRecord<K, V>> records(String topic)`\n\n\n### \n\nkafkaoffset\noffset\noffset\n\n\npoll\nkafka `_consumer_offsets`\n\nxlastConsumedOffsetcommited offset\n x + 1position\nposition = commited offset = lastConsumedOffset + 1\n\n```java\npublic long position(TopicPartition partition)\npublic OffsetAndMetadata committed(TopicPartition partition)\n```\n\n\nx [x, x+8]poll\n\nx+5x\n\n \nx+8x+5x+8\n\nkafka`enable.auto.commit``auto.commit.interval.ms`poll\n\n\n\n\nABB\n\n\n\n`public void commitSync`\n`public void commitSync(final Map<TopicOartition, OffsetAndMetadata> offsets)`\n\n\n`public void commitAsync`\n`public void commitAsync(OffsetCommitCallback callback)`\n`public void commitAsync(final Map<TopicPartition, OffsetAndMetadata> offsets, OffsetCommitCallback callback)`\n\ncommitSyncpoll\n\ncommitSyncoffsets\n\nOffsetCommitCallbackonComplete()\n\nx x+yxx\n\n\n### \n\npauseresume\n\n```java\npublic void pause(Collection<TopicPartition> partitions)\npublic void resume(Collection<TopicPartition> partitions)\n```\n\n`public Set<TopicPartition> paused()`\n\nkafka consumerclose\n```java\npublic void close()\npublic void close(Duration timeout)\npublic void close(long timeout, TimeUnit timeUnit)\n```\ntimeout30s\n\n### \n\n_consumer_offsets\n\n`auto.offset.reset`\n\n`latest` \n`earliest` \n`none`  NoOffsetForPartitionException\n\nseek\n```java\npublic void seek(TopicPartition partition, long offset)\n```\nseekpollseekpoll\n\n```java\nKafkaConsumer <String String> consumer= new KafkaConsumer<> (props); \ncosumer.subscribe(Arrays asList(topic));\nconsumer.poll(Duratio ofMillis(10000) ; \nSet<TopicPartition> assignment = consumer.assignment(); \nfor (Top cPartition tp : assignment) { \nconsumer.seek(tp , 10); \nwhile (true) { \nConsumerRecords<String , String> records = consumer.poll(DurationofMllis(1000)); \n//consume the record .\n}\n```\n  poll   \n`consumer poll(Duration.ofMillis(0)) ;`\n\n  seek  poll  0 poll  \n\n\n seek  IllegalStateException  subscrib   seek \n\n```java\nconsumer.subscribe(Arrays.asList(topic)) ; \nconsumer.seek(new TopicPartition(topic, 0), 10 );\n```\n\njava.lang.I llegalStateException: No current assignment for partition topic- demo - 0\n\n\nseek\n```java\npublic Map<Top cPartition Long> endOffsets( Collection<TopicPartition> partitions) \npublic Map<TopicPartition , Long> endOffsets( Collection<Top cPartit on> part tions\nDuration timeout)\n\npublic Map<TopicPartition , Long> beginningOff sets (Collection<TopicPartition> partitions) \npublic Map<TopicPart tion Long> beginningOffsets(Collection<TopicPartition> partitions, \nDuration timeout)\n\npublic void seekToBeginning(Collection<TopicPartition> partitions) \npublic void seekToEnd Collection<TopicPartition> partitions)\n\npublic Map<TopicPartition , OffsetAndTimestamp> offsetsForTimes(Map<TopicPartition, Long> timestampsToSearch) \npublic Map<TopicPartition OffsetAndTimestamp> offsetsForTimes(Map<TopicPartition, Long> t imestampsToSearch,Duration timeout )\n```\n\n### \n\n  \n\n  \n\n\n\n```java\nvoid onPartitionsRevoked(Collection<TopicPartition> partitions)\nvoid onPartitionsAssigned(Collection<TopicPartition> partitions)\n```\n\n```java\nMap<TopicPartition, OffsetAndMetadata> currentOffsets =new HashMap<>() ; \nconsumer.subscribe(Arrays.asList(topic) , new ConsumerRebalanceListener () { \n@Override \npublic void onPartitionsRevoked(Collection<TopicPartition> part tions) { \nconsumer.commitSync(currentOffsets) ; \ncurrentOffsets.clear(); \n@Override\npublic void onPartitionsAssigned(Collection<TopicPartition partitions) { \n//do nothing . \n}) .,\n```\n\n### \n\n org.apache.kafka.clients.consumer.Consumerlnterceptor \n```java\npublic ConsumerRecords<K, V> onConsume(ConsumerRecords<K , V> records);\npublic void onCommit(Map<TopicPartition, OffsetAndMetadata> offsets);\npublic void close();\n```\n\n\nKafkaconsumer  poll  Consume \n KafkaConsumer  onCommit \n\n interceptor classes \n\n### \n\nKatkaProducer  KafkaConsumer  KafkaConsumer acquire    ConcurrentModifcationException \n\n```java\nprivate final AtomicLong currentThread = new Atom cLong(NO CURRENT THREAD ); //Kaf aConsumer \n\nprivate void acquire() { \nlong threadid = Thread.currentThread().getid();\nif (threadid != currentThread.get() && !currentThread.compareAndSet(NO_CURRENT THREAD, threadid) ) \nthrow new ConcurrentModificationException \n(\"KafkaConsumer is not safe for multi- threaded access \") ; \nrefcount.incrementAndGet();\n}\n```\n\nacquire release \n\n```java\nprivate void release() \nif (refcount.decrementAndGet () == 0) {\n\tcurrentThread.set(NO CURRENT THREAD);\n}\n```\n\n  KafkaConsumer \n\n![](kafka-producer-consumer/img-20221030190716.png)\n\n \n\n  assign seek  \n\n```java\npublic static void main(String[] args) { \n\tProperties props = itConfig (); \n\tint consumerThreadNum = 4 ; \n\tfor(int i=O;i<consumerThreadNum;i++) { \n\tnew KafkaConsumerThread(props,topic).start();\n\t}\n}\n\npublic static class KafkaConsumerThread extends Thread{\n\tprivate KafkaConsumer<String , String> kafkaConsumer;\n\tpublic KafkaConsumerThread(Properties props, String topic) { \n\tthis.kafkaConsumer =new KafkaConsumer<>(props); \n\tthis.kafkaConsumer.subscribe(Arrays asList(topic));\n}\n\n\t@Override \n\tpublic void run() {\n\ttry { \n\t\twhile (true) { \n\t\tConsumerRecords<String, String> records = \n\t\tkafkaConsumer.poll (Duration.ofMill (1 00)) ; \n\t\tfor (ConsumerRecord<String, Stri g> record : records) { \n\t\t//   \n\t\t}\n\t}\n\t} catch (Exception e) { \n\t\te.printStackTrace(); \n\t} finally { \n\t\tkafkaConsumer.close();\n\t}\n\t}\n```\n\n TCP   consumerThreadNum  \n\n  poll  \n\n![](kafka-producer-consumer/img-20221030193459.png)\n\n```java\n\t@Override \n\tpublic void run() {\n\ttry { \n\t\twhile (true) { \n\t\tConsumerRecords<String, String> records = \n\t\tkafkaConsumer.poll(Duration.ofMill (1 00)) ; \n\t\tif (!records.isEmpty () ) { \n\t\t\texecutorService.submit(new RecordsHandler(records));  // hander\n\t\t}\n\t}\n\t} catch (Exception e) { \n\t\te.printStackTrace(); \n\t} finally { \n\t\tkafkaConsumer.close();\n\t}\n\t}\n\n\tpublic static class RecordsHandler extends Thread{ \n\tpublic final ConsumerRecords<String, String> records;\n\n\tpublic RecordsHandl er (ConsumerRecords<String, String> records) ( \n\t\tthis.records =records;\n\t}\n\n\t@Override \n\tpublic void run() {\n\t\t// records\n\t}\n\t}\n\n```\n\nRecordHandler  KafraConsumerThread  RecordHandler \n\n\n offsets \n\n![](kafka-producer-consumer/img-20221030200350.png)\n\n RecordHandler offsets  KafraConsumerThread  poll  offsets \n\n```java\nfor (TopicPartition tp : records .partitions()) { \n\tList<ConsumerRecord<String , String> tpRecords = records . records(tp); \n\t//  tpRec ords\n\tlong lastConsumedOffset = tpRecords . get (tpRecords. size() - 1) . offset() ; \n\tsynchronized (offsets) { \n\t\tif offsets.co ta  sKey (tp)) { \n\t\t\toffsets.put(tp, new OffsetAndMetadata(lastConsumedOffset + l)) ; \n\t\t} else { \n\t\t\tlong position = offsets . get(tp) .offset() ; \n\t\t\tif (position < lastConsumedOffset + 1) { \n\t\t\toffsets.put(tp, new OffsetAndMetadata(lastConsumedOffset + l))\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n```java\nsynchronized (offsets) { \nif (!offsets. isEmpty () ) { \n\tkafkaConsumer.commitSync(offsets); \n\toffsets.clear();\n\t}\n}\n```\n\n RecordHand erl  offset 99 RecordHand er2  offset 100 99  RecordHandler  200  99\n\n   \n\n![](kafka-producer-consumer/img-20221030201350.png)\n\nstartOffset  endOffset  startOffset     startOffset  \n\n \n\n   startOffset    startOffset \n\n### \n\n`fetch.min.bytes`Consumer  poll   Kafka \n 1B\n\n`fetch .max.bytes` Consumer  Kafka  52428800  50MB\n\n`fetch.max.wait.ms` Kafka  500ms\n\n`max.partition.fetch.bytes` Consumer  1048576 (B)\n\n`max.poll.records` Consumer  500 \n\n`connections.max.idle.ms` 540000 (ms  \n\n`exclude.internal.topics`Kafka _consumer_offsets  _transaction_state exclude.internal.topics Kafka  true \n\n`receive.buffer.bytes` Socket  65536 (B)\n\n`send.buffer.bytes` Socket 13 1072 (B)\n\n`request.timeout.ms` Consumer  30000ms\n\n`metadata.max.age.ms` 300000 ms\n\n`reconnect.backoff.ms`50ms\n\n`retry.backo ms`\n\n`isolation.level`read uncommitted \n read committed \n\n![](kafka-producer-consumer/img-20221030202942.png)\n\n![](kafka-producer-consumer/img-20221030202957.png)\n\n\n\n\n\n\n\n\n\n","slug":"kafka-producer-consumer","published":1,"updated":"2022-10-30T13:03:18.388Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre9h000cagvtstpma2s5","content":"<p>kafka</p>\n<ul>\n<li>KafkaKafka</li>\n<li>KafkaKafkaKafka</li>\n<li>Kafka</li>\n</ul>\n<h1 id=\"Kafka\"><a href=\"#Kafka\" class=\"headerlink\" title=\"Kafka\"></a>Kafka</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>ProducerKafka</li>\n<li>ConsumerKafka</li>\n<li>BrokerKafkaBrokerKafkaKafka</li>\n<li>Kafka</li>\n<li>IO</li>\n<li>OffsetoffsetKafkaoffsetKafka</li>\n<li>leaderfollowerleaderleaderfollowerleaderkafka</li>\n<li>AR(assigned replicas)</li>\n<li>ISR:leader(in-sync replicas)</li>\n<li>OSR:leader (out-of-sync replicas)</li>\n<li>HW:offsetoffset (high watermark)</li>\n<li>LEO: offset (Log End Offset)</li>\n</ul>\n<p>leaderfollower<br>(leader)<br>kafkafollowerfollowerleaderleader(followerleaderleader)</p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221016191323.png\" alt></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><pre><code>./bin/kafka-topics.sh --zookeeper localhost:2181/kafka --create --topic topic-demo --replication-factor 3 --partitions 4\n\n\n./bin/kafka-topics.sh --zookeeper localhost:2181/kafka --describe --topic topic-demo \n\n./bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic-demo\n\n./bin/kafka-console-producer.sh --broker-list localhost:9092 --topic topic-demo</code></pre><p><code>zookeeper.connect</code>  zk<br><code>listeners</code> broker<br><code>broker.id</code> broker<br><code>log.dir</code> kafka/tmp/kafka-logs<br><code>log.dirs</code> <br><code>message.max.bytes</code> broker</p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> Properties <span class=\"token function\">initConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Properties props <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Properties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    props<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>ProducerConfig<span class=\"token punctuation\">.</span>BOOTSTRAP_SERVERS_CONFIG<span class=\"token punctuation\">,</span> brokerList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Properties props <span class=\"token operator\">=</span> <span class=\"token function\">initConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    KafkaProducer<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> producer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">KafkaProducer</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ProducerRecord<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> record <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProducerRecord</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Hello, Kafka\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        producer<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ProducerRecord </p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ProducerRecord</span><span class=\"token operator\">&lt;</span>K<span class=\"token punctuation\">,</span> V<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> String topic<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> Integer paitition<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> Headers headers<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> K key<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> V value<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> Long timestamp<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><code>bootstrap.servers</code> kafkabroker<br><code>key.serializer</code> <br><code>value.serializer</code></p>\n<ul>\n<li><p>KafkaProducerKafkaProducerKafkaProducer</p>\n</li>\n<li><p>ProducerRecord topicvalue</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>sendCallback</p>\n<p>sendFutureKafka</p>\n<p>sendCallback</p>\n<p></p>\n<p>retries</p>\n<p></p>\n<p>record1record2KafkaProducercallback1callback2</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>KafkaKafka</p>\n<p>org.apache.kafka.common.serialization.Serializer</p>\n<p></p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span>Map<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> <span class=\"token operator\">?</span><span class=\"token operator\">></span>configs<span class=\"token punctuation\">,</span><span class=\"token keyword\">boolean</span> isKey<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span>String topic<span class=\"token punctuation\">,</span> T data<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>AvroJSONThriftProtobufProtostuff</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">partition</span><span class=\"token punctuation\">(</span>String topic<span class=\"token punctuation\">,</span> Object key<span class=\"token punctuation\">,</span><span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> keyBytes<span class=\"token punctuation\">,</span> Object Value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> valueBytes<span class=\"token punctuation\">,</span>Cluster cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<ul>\n<li><p>ProducerRecordpartitionpartition</p>\n</li>\n<li><p>keypartitionKafka xx.Partitionerpartitionclose<br>keynullkeykeykeynull</p>\n</li>\n</ul>\n<p>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>ProducerInterceptor</p>\n<p>KafkaProduceronAcknowledgementCallback</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> ProducerRecord<span class=\"token operator\">&lt;</span>K<span class=\"token punctuation\">,</span> V<span class=\"token operator\">></span> <span class=\"token function\">onSend</span><span class=\"token punctuation\">(</span>ProducerRecord<span class=\"token operator\">&lt;</span>K<span class=\"token punctuation\">,</span> V<span class=\"token operator\">></span> record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onAcknowledgement</span><span class=\"token punctuation\">(</span>RecordMetadata metadata<span class=\"token punctuation\">,</span> Exception exception<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>KafkaProducerinterceptor.classes</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"/2022/10/16/kafka-producer-consumer/producer-structure.jpg\" alt=\"\"></p>\n<p>SenderSenderRecordAccumulatorKafka</p>\n<p><code>buffer.memory</code> RecordAccumulator</p>\n<p><code>max.block.ms</code></p>\n<p>RecordAccumulatorbuffer.memoryproducersendmax.block.ms</p>\n<p>RecordAccumulatorProducerBatchProducerBatchProducerRecord</p>\n<p>kafkajava.io.ByteBufferRecordAccumulatorBufferPoolByteBufferBufferPoolByteBuffer<code>batch.size</code></p>\n<p><code>batch.size</code> ByteBuffer</p>\n<p>ProducerBatchbatch.sizeProducerRecordRecordAccumulator()ProducerBatchProducerBatchProducerRecordProducerBatch</p>\n<p>ProducerBatchProducerRecordbatch.sizebatch.sizeProducerBatchByterBufferProducerBatch</p>\n<p>SenderRecordAccumulator<code>&lt;Deque&lt;ProducerBatch&gt;&gt;</code>  <code>&lt;Node, List&lt;ProducerBatch&gt;&gt;</code>Nodekafkabroker</p>\n<p>Sender<code>&lt;Node, Request&gt;</code>NodeSenderkafkaInFlightRequests<code>Map&lt;NodeId, Deque&lt;Request&gt;&gt;</code></p>\n<p><code>max.in.flight.requests.per.connecttion</code>5</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Node</p>\n<p>leastLoadedNode<br>leastLoadedNodeNode</p>\n<p>leastLoadedNode<strong></strong><strong></strong></p>\n<p></p>\n<pre><code>ProducerRecord&lt;string, string&gt; record = new ProducerRecord&lt;&gt;(topic, &quot;hello&quot;);</code></pre><p><br>KafkaProducerleaderleaderbroker<strong></strong></p>\n<p>bootstrap.serversbrokerbroker</p>\n<p>leastLoadedNodeNodeMetadataRequestSenderMetadataRequestinFlightRequestsSendersynchronized  final</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>acks</code></p>\n<p>acks = 1</p>\n<p>acks = 0 </p>\n<p><code>max.request.size</code> </p>\n<p>retries  retry.backoff.ms</p>\n<p><code>retries</code></p>\n<p><code>retry.backoff.ms</code> 100ms</p>\n<p><code>compression.type</code> none</p>\n<p><code>connections.max.idle.ms</code> </p>\n<p><code>linger.ms</code> ProducerBatchProducerRecord</p>\n<p><code>receive.buffer.bytes</code> Socket  32kb</p>\n<p><code>send.buffer.bytes</code> Socket</p>\n<p><code>request.timeout.ms</code> Producer30000ms</p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p></p>\n<p><br></p>\n<p></p>\n<p>kafka</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p><code>group.id</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">KafkaConsumerAnalysis</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> String brokerList <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> Properties <span class=\"token function\">initConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Properties props <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Properties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        props<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bootstrap.servers\"</span><span class=\"token punctuation\">,</span> brokerList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Properties props <span class=\"token operator\">=</span> <span class=\"token function\">initConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        KafkaConsumer<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> consumer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">KafkaConsmer</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        consumer<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Arrays<span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>isRunning<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                ConsumerRecrds<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> records <span class=\"token operator\">=</span> consumer<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span>Duration<span class=\"token punctuation\">.</span><span class=\"token function\">ofMillis</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                log<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n                consumer<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>bootstrap.servers</code> broker</p>\n<p><code>group.id</code> </p>\n<p><code>key.deserializer</code>  </p>\n<p><code>value.deserializer</code></p>\n<p>org.apache.kafka.clients.consumer.ConsumerConfig</p>\n<p>ConsumerConfig</p>\n<p>ConsumerConfig.GROUP_ID_CONFIG</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>subscribe</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> topics<span class=\"token punctuation\">,</span> ConsumerRebalanceListener listener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> topics<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Pattern pattern<span class=\"token punctuation\">,</span> ConsumerRebalanceListener listener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Pattern pattern<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>1.<code>subscribe(Collection&lt;String&gt; topics)</code></p>\n<p>2.<br> <code>cosumer.subscribe(Pattern.compile(&quot;topic.*&quot;))</code><br><code>ConsumerRebalanceListener</code></p>\n<p>3.</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><code>public List&lt;PartitionInfo&gt; partitionsFor(String topic)</code></p>\n<p>TopicPartition</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TopicPartition</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Serializable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> partition<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">//</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> String topic<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">//</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>partitionsFor()</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> List<span class=\"token operator\">&lt;</span>PartitionInfo<span class=\"token operator\">></span> <span class=\"token function\">partitionsFor</span><span class=\"token punctuation\">(</span>String topic<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PartitionInfo</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> String topic<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> paitition<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> Node leader<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> Node<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> replicas<span class=\"token punctuation\">;</span>  <span class=\"token comment\" spellcheck=\"true\">//AR</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> Node<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> inSyncReplicas<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">//ISR</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> Node offlineReplicas<span class=\"token punctuation\">;</span>  <span class=\"token comment\" spellcheck=\"true\">//OSR</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p></p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\">consumer<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>IllegalStateException</p>\n<p>:<br>  <code>AUTO_TOPICS</code><br> <code>AUTO_PATTERN</code><br> <code>USER_ASSIGNED</code></p>\n<p>subscribe()</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Deserializer</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span>Map<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> <span class=\"token operator\">?</span><span class=\"token operator\">></span> configs<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> isKey<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> T <span class=\"token function\">deserialize</span><span class=\"token punctuation\">(</span>String topic<span class=\"token punctuation\">,</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> data<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><br></p>\n<p>poll:</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> ConsumerRecords<span class=\"token operator\">&lt;</span>K<span class=\"token punctuation\">,</span> V<span class=\"token operator\">></span> <span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> Duration timeout<span class=\"token punctuation\">)</span> <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>timeoutpoll</p>\n<p>ConsumerRecord</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConsumerRecord</span><span class=\"token operator\">&lt;</span>K<span class=\"token punctuation\">,</span> V<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> String topic<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> partition<span class=\"token punctuation\">;</span> \n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> offset<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// </span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> timestamp<span class=\"token punctuation\">;</span> \n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> TimestampType timestampType<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> serializedKeySize<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> serializedValueSize<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> Headers headers<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// </span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> K key<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> V value<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">volatile</span> Long checksum<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// CRC32</span>\n  <span class=\"token comment\" spellcheck=\"true\">// ...</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>iterator</p>\n<p><code>public Iterator&lt;ConsumerRecord&lt;K, V&gt;&gt; iterator()</code></p>\n<p><br><code>public List&lt;ConsumerRecord&lt;K, V&gt;&gt; records(TopicPartition partition)</code></p>\n<p><br><code>public Iterable&lt;ConsumerRecord&lt;K, V&gt;&gt; records(String topic)</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>kafkaoffset<br>offset<br>offset</p>\n<p>poll<br>kafka <code>_consumer_offsets</code></p>\n<p>xlastConsumedOffsetcommited offset<br> x + 1position<br>position = commited offset = lastConsumedOffset + 1</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">position</span><span class=\"token punctuation\">(</span>TopicPartition partition<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> OffsetAndMetadata <span class=\"token function\">committed</span><span class=\"token punctuation\">(</span>TopicPartition partition<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><br>x [x, x+8]poll<br><br>x+5x</p>\n<p> <br>x+8x+5x+8</p>\n<p>kafka<code>enable.auto.commit</code><code>auto.commit.interval.ms</code>poll</p>\n<p><br></p>\n<p>ABB</p>\n<p><br><br><code>public void commitSync</code><br><code>public void commitSync(final Map&lt;TopicOartition, OffsetAndMetadata&gt; offsets)</code></p>\n<p><br><code>public void commitAsync</code><br><code>public void commitAsync(OffsetCommitCallback callback)</code><br><code>public void commitAsync(final Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets, OffsetCommitCallback callback)</code></p>\n<p>commitSyncpoll</p>\n<p>commitSyncoffsets</p>\n<p>OffsetCommitCallbackonComplete()</p>\n<p>x x+yxx<br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>pauseresume</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">pause</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">resume</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><br><code>public Set&lt;TopicPartition&gt; paused()</code></p>\n<p>kafka consumerclose</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>Duration timeout<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> timeout<span class=\"token punctuation\">,</span> TimeUnit timeUnit<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>timeout30s</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>_consumer_offsets</p>\n<p><code>auto.offset.reset</code><br><br><code>latest</code> <br><code>earliest</code> <br><code>none</code>  NoOffsetForPartitionException</p>\n<p>seek</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">seek</span><span class=\"token punctuation\">(</span>TopicPartition partition<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> offset<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>seekpollseekpoll</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\">KafkaConsumer <span class=\"token operator\">&lt;</span>String String<span class=\"token operator\">></span> consumer<span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">KafkaConsumer</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \ncosumer<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Arrays <span class=\"token function\">asList</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsumer<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span>Duratio <span class=\"token function\">ofMillis</span><span class=\"token punctuation\">(</span><span class=\"token number\">10000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \nSet<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> assignment <span class=\"token operator\">=</span> consumer<span class=\"token punctuation\">.</span><span class=\"token function\">assignment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>Top cPartition tp <span class=\"token operator\">:</span> assignment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \nconsumer<span class=\"token punctuation\">.</span><span class=\"token function\">seek</span><span class=\"token punctuation\">(</span>tp <span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \nConsumerRecords<span class=\"token operator\">&lt;</span>String <span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> records <span class=\"token operator\">=</span> consumer<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token function\">DurationofMllis</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\" spellcheck=\"true\">//consume the record .</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>  poll   <br><code>consumer poll(Duration.ofMillis(0)) ;</code></p>\n<p>  seek  poll  0 poll  </p>\n<p> seek  IllegalStateException  subscrib   seek </p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\">consumer<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Arrays<span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \nconsumer<span class=\"token punctuation\">.</span><span class=\"token function\">seek</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TopicPartition</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><br>java.lang.I llegalStateException: No current assignment for partition topic- demo - 0</p>\n<p>seek</p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> Map<span class=\"token operator\">&lt;</span>Top cPartition Long<span class=\"token operator\">></span> <span class=\"token function\">endOffsets</span><span class=\"token punctuation\">(</span> Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">public</span> Map<span class=\"token operator\">&lt;</span>TopicPartition <span class=\"token punctuation\">,</span> Long<span class=\"token operator\">></span> <span class=\"token function\">endOffsets</span><span class=\"token punctuation\">(</span> Collection<span class=\"token operator\">&lt;</span>Top cPartit on<span class=\"token operator\">></span> part tions\nDuration timeout<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span> Map<span class=\"token operator\">&lt;</span>TopicPartition <span class=\"token punctuation\">,</span> Long<span class=\"token operator\">></span> beginningOff <span class=\"token function\">sets</span> <span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">public</span> Map<span class=\"token operator\">&lt;</span>TopicPart tion Long<span class=\"token operator\">></span> <span class=\"token function\">beginningOffsets</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">,</span> \nDuration timeout<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">seekToBeginning</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> seekToEnd Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span> Map<span class=\"token operator\">&lt;</span>TopicPartition <span class=\"token punctuation\">,</span> OffsetAndTimestamp<span class=\"token operator\">></span> <span class=\"token function\">offsetsForTimes</span><span class=\"token punctuation\">(</span>Map<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token punctuation\">,</span> Long<span class=\"token operator\">></span> timestampsToSearch<span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">public</span> Map<span class=\"token operator\">&lt;</span>TopicPartition OffsetAndTimestamp<span class=\"token operator\">></span> <span class=\"token function\">offsetsForTimes</span><span class=\"token punctuation\">(</span>Map<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token punctuation\">,</span> Long<span class=\"token operator\">></span> t imestampsToSearch<span class=\"token punctuation\">,</span>Duration timeout <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<p>  </p>\n<p></p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">void</span> <span class=\"token function\">onPartitionsRevoked</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">onPartitionsAssigned</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> partitions<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\">Map<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token punctuation\">,</span> OffsetAndMetadata<span class=\"token operator\">></span> currentOffsets <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \nconsumer<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Arrays<span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConsumerRebalanceListener</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n<span class=\"token annotation punctuation\">@Override</span> \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onPartitionsRevoked</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token operator\">></span> part tions<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \nconsumer<span class=\"token punctuation\">.</span><span class=\"token function\">commitSync</span><span class=\"token punctuation\">(</span>currentOffsets<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \ncurrentOffsets<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onPartitionsAssigned</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span>TopicPartition partitions<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n<span class=\"token comment\" spellcheck=\"true\">//do nothing . </span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> org.apache.kafka.clients.consumer.Consumerlnterceptor </p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> ConsumerRecords<span class=\"token operator\">&lt;</span>K<span class=\"token punctuation\">,</span> V<span class=\"token operator\">></span> <span class=\"token function\">onConsume</span><span class=\"token punctuation\">(</span>ConsumerRecords<span class=\"token operator\">&lt;</span>K <span class=\"token punctuation\">,</span> V<span class=\"token operator\">></span> records<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCommit</span><span class=\"token punctuation\">(</span>Map<span class=\"token operator\">&lt;</span>TopicPartition<span class=\"token punctuation\">,</span> OffsetAndMetadata<span class=\"token operator\">></span> offsets<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>Kafkaconsumer  poll  Consume <br> KafkaConsumer  onCommit </p>\n<p> interceptor classes </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>KatkaProducer  KafkaConsumer  KafkaConsumer acquire    ConcurrentModifcationException </p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> AtomicLong currentThread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Atom</span> <span class=\"token function\">cLong</span><span class=\"token punctuation\">(</span>NO CURRENT THREAD <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">//Kaf aConsumer </span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">acquire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n<span class=\"token keyword\">long</span> threadid <span class=\"token operator\">=</span> Thread<span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>threadid <span class=\"token operator\">!=</span> currentThread<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>currentThread<span class=\"token punctuation\">.</span><span class=\"token function\">compareAndSet</span><span class=\"token punctuation\">(</span>NO_CURRENT THREAD<span class=\"token punctuation\">,</span> threadid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConcurrentModificationException</span> \n<span class=\"token punctuation\">(</span><span class=\"token string\">\"KafkaConsumer is not safe for multi- threaded access \"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \nrefcount<span class=\"token punctuation\">.</span><span class=\"token function\">incrementAndGet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>acquire release </p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>refcount<span class=\"token punctuation\">.</span><span class=\"token function\">decrementAndGet</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    currentThread<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>NO CURRENT THREAD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>  KafkaConsumer </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030190716.png\" alt></p>\n<p> </p>\n<p>  assign seek  </p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    Properties props <span class=\"token operator\">=</span> <span class=\"token function\">itConfig</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">int</span> consumerThreadNum <span class=\"token operator\">=</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span>O<span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>consumerThreadNum<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">KafkaConsumerThread</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">,</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">KafkaConsumerThread</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> KafkaConsumer<span class=\"token operator\">&lt;</span>String <span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> kafkaConsumer<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">KafkaConsumerThread</span><span class=\"token punctuation\">(</span>Properties props<span class=\"token punctuation\">,</span> String topic<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>kafkaConsumer <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">KafkaConsumer</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>kafkaConsumer<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>Arrays <span class=\"token function\">asList</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span> \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n        ConsumerRecords<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> records <span class=\"token operator\">=</span> \n        kafkaConsumer<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span> <span class=\"token punctuation\">(</span>Duration<span class=\"token punctuation\">.</span><span class=\"token function\">ofMill</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>ConsumerRecord<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> Stri g<span class=\"token operator\">></span> record <span class=\"token operator\">:</span> records<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n        <span class=\"token comment\" spellcheck=\"true\">//   </span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span> \n        kafkaConsumer<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p> TCP   consumerThreadNum  </p>\n<p>  poll  </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030193459.png\" alt></p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\">    <span class=\"token annotation punctuation\">@Override</span> \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n        ConsumerRecords<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> records <span class=\"token operator\">=</span> \n        kafkaConsumer<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span>Duration<span class=\"token punctuation\">.</span><span class=\"token function\">ofMill</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>records<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n            executorService<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RecordsHandler</span><span class=\"token punctuation\">(</span>records<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\" spellcheck=\"true\">// hander</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span> \n        kafkaConsumer<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RecordsHandler</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> ConsumerRecords<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> records<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> RecordsHandl <span class=\"token function\">er</span> <span class=\"token punctuation\">(</span>ConsumerRecords<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> records<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span> \n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>records <span class=\"token operator\">=</span>records<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span> \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\" spellcheck=\"true\">// records</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>RecordHandler  KafraConsumerThread  RecordHandler </p>\n<p><br> offsets </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030200350.png\" alt></p>\n<p> RecordHandler offsets  KafraConsumerThread  poll  offsets </p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>TopicPartition tp <span class=\"token operator\">:</span> records <span class=\"token punctuation\">.</span><span class=\"token function\">partitions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    List<span class=\"token operator\">&lt;</span>ConsumerRecord<span class=\"token operator\">&lt;</span>String <span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> tpRecords <span class=\"token operator\">=</span> records <span class=\"token punctuation\">.</span> <span class=\"token function\">records</span><span class=\"token punctuation\">(</span>tp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token comment\" spellcheck=\"true\">//  tpRec ords</span>\n    <span class=\"token keyword\">long</span> lastConsumedOffset <span class=\"token operator\">=</span> tpRecords <span class=\"token punctuation\">.</span> <span class=\"token function\">get</span> <span class=\"token punctuation\">(</span>tpRecords<span class=\"token punctuation\">.</span> <span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span> <span class=\"token function\">offset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>offsets<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">if</span> offsets<span class=\"token punctuation\">.</span>co ta  <span class=\"token function\">sKey</span> <span class=\"token punctuation\">(</span>tp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n            offsets<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>tp<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OffsetAndMetadata</span><span class=\"token punctuation\">(</span>lastConsumedOffset <span class=\"token operator\">+</span> l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> \n            <span class=\"token keyword\">long</span> position <span class=\"token operator\">=</span> offsets <span class=\"token punctuation\">.</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span><span class=\"token function\">offset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span> \n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>position <span class=\"token operator\">&lt;</span> lastConsumedOffset <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n            offsets<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>tp<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OffsetAndMetadata</span><span class=\"token punctuation\">(</span>lastConsumedOffset <span class=\"token operator\">+</span> l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>offsets<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>offsets<span class=\"token punctuation\">.</span> <span class=\"token function\">isEmpty</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    kafkaConsumer<span class=\"token punctuation\">.</span><span class=\"token function\">commitSync</span><span class=\"token punctuation\">(</span>offsets<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    offsets<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p> RecordHand erl  offset 99 RecordHand er2  offset 100 99  RecordHandler  200  99</p>\n<p>   </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030201350.png\" alt></p>\n<p>startOffset  endOffset  startOffset     startOffset  </p>\n<p> </p>\n<p>   startOffset    startOffset </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>fetch.min.bytes</code>Consumer  poll   Kafka <br> 1B</p>\n<p><code>fetch .max.bytes</code> Consumer  Kafka  52428800  50MB</p>\n<p><code>fetch.max.wait.ms</code> Kafka  500ms</p>\n<p><code>max.partition.fetch.bytes</code> Consumer  1048576 (B)</p>\n<p><code>max.poll.records</code> Consumer  500 </p>\n<p><code>connections.max.idle.ms</code> 540000 (ms  </p>\n<p><code>exclude.internal.topics</code>Kafka _consumer_offsets  _transaction_state exclude.internal.topics Kafka  true </p>\n<p><code>receive.buffer.bytes</code> Socket  65536 (B)</p>\n<p><code>send.buffer.bytes</code> Socket 13 1072 (B)</p>\n<p><code>request.timeout.ms</code> Consumer  30000ms</p>\n<p><code>metadata.max.age.ms</code> 300000 ms</p>\n<p><code>reconnect.backoff.ms</code>50ms</p>\n<p><code>retry.backo ms</code></p>\n<p><code>isolation.level</code>read uncommitted <br> read committed </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030202942.png\" alt></p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030202957.png\" alt></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<p>kafka</p>\n<ul>\n<li>KafkaKafka</li>\n<li>KafkaKafkaKafka</li>\n<li>Kafka</li>\n</ul>\n<h1 id=\"Kafka\"><a href=\"#Kafka\" class=\"headerlink\" title=\"Kafka\"></a>Kafka</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>ProducerKafka</li>\n<li>ConsumerKafka</li>\n<li>BrokerKafkaBrokerKafkaKafka</li>\n<li>Kafka</li>\n<li>IO</li>\n<li>OffsetoffsetKafkaoffsetKafka</li>\n<li>leaderfollowerleaderleaderfollowerleaderkafka</li>\n<li>AR(assigned replicas)</li>\n<li>ISR:leader(in-sync replicas)</li>\n<li>OSR:leader (out-of-sync replicas)</li>\n<li>HW:offsetoffset (high watermark)</li>\n<li>LEO: offset (Log End Offset)</li>\n</ul>\n<p>leaderfollower<br>(leader)<br>kafkafollowerfollowerleaderleader(followerleaderleader)</p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221016191323.png\" alt></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><pre><code>./bin/kafka-topics.sh --zookeeper localhost:2181/kafka --create --topic topic-demo --replication-factor 3 --partitions 4\n\n\n./bin/kafka-topics.sh --zookeeper localhost:2181/kafka --describe --topic topic-demo \n\n./bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic-demo\n\n./bin/kafka-console-producer.sh --broker-list localhost:9092 --topic topic-demo</code></pre><p><code>zookeeper.connect</code>  zk<br><code>listeners</code> broker<br><code>broker.id</code> broker<br><code>log.dir</code> kafka/tmp/kafka-logs<br><code>log.dirs</code> <br><code>message.max.bytes</code> broker</p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<pre><code class=\"java\">public static Properties initConfig() {\n    Properties props = new Properties();\n    props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, brokerList);\n}\n\npublic static void main(String[] args) {\n    Properties props = initConfig();\n    KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(props);\n    ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(topic, &quot;Hello, Kafka&quot;);\n\n    try {\n        producer.send(record);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}</code></pre>\n<p>ProducerRecord </p>\n<pre><code class=\"java\">public class ProducerRecord&lt;K, V&gt; {\n    private final String topic;\n    private final Integer paitition;\n    private final Headers headers;\n    private final K key;\n    private final V value;\n    private final Long timestamp;\n}</code></pre>\n<p><code>bootstrap.servers</code> kafkabroker<br><code>key.serializer</code> <br><code>value.serializer</code></p>\n<ul>\n<li><p>KafkaProducerKafkaProducerKafkaProducer</p>\n</li>\n<li><p>ProducerRecord topicvalue</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>sendCallback</p>\n<p>sendFutureKafka</p>\n<p>sendCallback</p>\n<p></p>\n<p>retries</p>\n<p></p>\n<p>record1record2KafkaProducercallback1callback2</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>KafkaKafka</p>\n<p>org.apache.kafka.common.serialization.Serializer</p>\n<p></p>\n<pre><code class=\"java\">public void configure(Map&lt;String, ?&gt;configs,boolean isKey)\npublic byte[]serialize(String topic, T data)\npublic void close()</code></pre>\n<p>AvroJSONThriftProtobufProtostuff</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code class=\"java\">public int partition(String topic, Object key,byte[] keyBytes, Object Value, byte[] valueBytes,Cluster cluster);\npublic void close();</code></pre>\n<ul>\n<li><p>ProducerRecordpartitionpartition</p>\n</li>\n<li><p>keypartitionKafka xx.Partitionerpartitionclose<br>keynullkeykeykeynull</p>\n</li>\n</ul>\n<p>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>ProducerInterceptor</p>\n<p>KafkaProduceronAcknowledgementCallback</p>\n<pre><code class=\"java\">public ProducerRecord&lt;K, V&gt; onSend(ProducerRecord&lt;K, V&gt; record);\npublic void onAcknowledgement(RecordMetadata metadata, Exception exception);\npublic void close();</code></pre>\n<p>KafkaProducerinterceptor.classes</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"/2022/10/16/kafka-producer-consumer/producer-structure.jpg\" alt=\"\"></p>\n<p>SenderSenderRecordAccumulatorKafka</p>\n<p><code>buffer.memory</code> RecordAccumulator</p>\n<p><code>max.block.ms</code></p>\n<p>RecordAccumulatorbuffer.memoryproducersendmax.block.ms</p>\n<p>RecordAccumulatorProducerBatchProducerBatchProducerRecord</p>\n<p>kafkajava.io.ByteBufferRecordAccumulatorBufferPoolByteBufferBufferPoolByteBuffer<code>batch.size</code></p>\n<p><code>batch.size</code> ByteBuffer</p>\n<p>ProducerBatchbatch.sizeProducerRecordRecordAccumulator()ProducerBatchProducerBatchProducerRecordProducerBatch</p>\n<p>ProducerBatchProducerRecordbatch.sizebatch.sizeProducerBatchByterBufferProducerBatch</p>\n<p>SenderRecordAccumulator<code>&lt;Deque&lt;ProducerBatch&gt;&gt;</code>  <code>&lt;Node, List&lt;ProducerBatch&gt;&gt;</code>Nodekafkabroker</p>\n<p>Sender<code>&lt;Node, Request&gt;</code>NodeSenderkafkaInFlightRequests<code>Map&lt;NodeId, Deque&lt;Request&gt;&gt;</code></p>\n<p><code>max.in.flight.requests.per.connecttion</code>5</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Node</p>\n<p>leastLoadedNode<br>leastLoadedNodeNode</p>\n<p>leastLoadedNode<strong></strong><strong></strong></p>\n<p></p>\n<pre><code>ProducerRecord&lt;string, string&gt; record = new ProducerRecord&lt;&gt;(topic, &quot;hello&quot;);</code></pre><p><br>KafkaProducerleaderleaderbroker<strong></strong></p>\n<p>bootstrap.serversbrokerbroker</p>\n<p>leastLoadedNodeNodeMetadataRequestSenderMetadataRequestinFlightRequestsSendersynchronized  final</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>acks</code></p>\n<p>acks = 1</p>\n<p>acks = 0 </p>\n<p><code>max.request.size</code> </p>\n<p>retries  retry.backoff.ms</p>\n<p><code>retries</code></p>\n<p><code>retry.backoff.ms</code> 100ms</p>\n<p><code>compression.type</code> none</p>\n<p><code>connections.max.idle.ms</code> </p>\n<p><code>linger.ms</code> ProducerBatchProducerRecord</p>\n<p><code>receive.buffer.bytes</code> Socket  32kb</p>\n<p><code>send.buffer.bytes</code> Socket</p>\n<p><code>request.timeout.ms</code> Producer30000ms</p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p></p>\n<p><br></p>\n<p></p>\n<p>kafka</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p><code>group.id</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<pre><code class=\"java\">public class KafkaConsumerAnalysis {\n    public static final String brokerList = &quot;&quot;;\n    ...\n\n    public static Properties initConfig() {\n        Properties props = new Properties();\n        props.put(&quot;bootstrap.servers&quot;, brokerList);\n    }\n\n    public static void main() {\n        Properties props = initConfig();\n        KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsmer&lt;&gt;(props);\n        consumer.subscribe(Arrays.asList(topic));\n\n        try {\n            while(isRunning.get()) {\n                ConsumerRecrds&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(1000));\n\n            } catch (Exception e) {\n                log.error(&quot;&quot;);\n            } finally {\n                consumer.close();\n            }\n        }\n    }\n}</code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>bootstrap.servers</code> broker</p>\n<p><code>group.id</code> </p>\n<p><code>key.deserializer</code>  </p>\n<p><code>value.deserializer</code></p>\n<p>org.apache.kafka.clients.consumer.ConsumerConfig</p>\n<p>ConsumerConfig</p>\n<p>ConsumerConfig.GROUP_ID_CONFIG</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>subscribe</p>\n<pre><code class=\"java\">public void subscribe(Collection&lt;String&gt; topics, ConsumerRebalanceListener listener);\npublic void subscribe(Collection&lt;String&gt; topics);\npublic void subscribe(Pattern pattern, ConsumerRebalanceListener listener);\npublic void subscribe(Pattern pattern);</code></pre>\n<p>1.<code>subscribe(Collection&lt;String&gt; topics)</code></p>\n<p>2.<br> <code>cosumer.subscribe(Pattern.compile(&quot;topic.*&quot;))</code><br><code>ConsumerRebalanceListener</code></p>\n<p>3.</p>\n<pre><code class=\"java\">public void assign(Collection&lt;TopicPartition&gt; partitions);</code></pre>\n<p><code>public List&lt;PartitionInfo&gt; partitionsFor(String topic)</code></p>\n<p>TopicPartition</p>\n<pre><code class=\"java\">public final class TopicPartition implements Serializable {\n    private final int partition; //\n    private final String topic; //\n    ...\n}</code></pre>\n<p>partitionsFor()</p>\n<pre><code class=\"java\">public List&lt;PartitionInfo&gt; partitionsFor(String topic)\n\npublic class PartitionInfo {\n    private final String topic;\n    private final int paitition;\n    private final Node leader;\n    private final Node[] replicas;  //AR\n    private final Node[] inSyncReplicas; //ISR\n    private final Node offlineReplicas;  //OSR\n}</code></pre>\n<p></p>\n<pre><code class=\"java\">consumer.unsubscribe()</code></pre>\n<p>IllegalStateException</p>\n<p>:<br>  <code>AUTO_TOPICS</code><br> <code>AUTO_PATTERN</code><br> <code>USER_ASSIGNED</code></p>\n<p>subscribe()</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Deserializer</p>\n<pre><code class=\"java\">public void configure(Map&lt;String, ?&gt; configs, boolean isKey)\npublic T deserialize(String topic, byte[] data)\npublic void close()</code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><br></p>\n<p>poll:</p>\n<pre><code class=\"java\">public ConsumerRecords&lt;K, V&gt; poll(final Duration timeout) </code></pre>\n<p>timeoutpoll</p>\n<p>ConsumerRecord</p>\n<pre><code class=\"java\">public class ConsumerRecord&lt;K, V&gt; {\n  private final String topic;\n  private final int partition; \n  private final long offset; // \n  private final timestamp; \n  private final TimestampType timestampType;\n  private final int serializedKeySize;\n  private final int serializedValueSize;\n  private final Headers headers; // \n  private final K key;\n  private final V value;\n  private volatile Long checksum; // CRC32\n  // ...\n}</code></pre>\n<p>iterator</p>\n<p><code>public Iterator&lt;ConsumerRecord&lt;K, V&gt;&gt; iterator()</code></p>\n<p><br><code>public List&lt;ConsumerRecord&lt;K, V&gt;&gt; records(TopicPartition partition)</code></p>\n<p><br><code>public Iterable&lt;ConsumerRecord&lt;K, V&gt;&gt; records(String topic)</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>kafkaoffset<br>offset<br>offset</p>\n<p>poll<br>kafka <code>_consumer_offsets</code></p>\n<p>xlastConsumedOffsetcommited offset<br> x + 1position<br>position = commited offset = lastConsumedOffset + 1</p>\n<pre><code class=\"java\">public long position(TopicPartition partition)\npublic OffsetAndMetadata committed(TopicPartition partition)</code></pre>\n<p><br>x [x, x+8]poll<br><br>x+5x</p>\n<p> <br>x+8x+5x+8</p>\n<p>kafka<code>enable.auto.commit</code><code>auto.commit.interval.ms</code>poll</p>\n<p><br></p>\n<p>ABB</p>\n<p><br><br><code>public void commitSync</code><br><code>public void commitSync(final Map&lt;TopicOartition, OffsetAndMetadata&gt; offsets)</code></p>\n<p><br><code>public void commitAsync</code><br><code>public void commitAsync(OffsetCommitCallback callback)</code><br><code>public void commitAsync(final Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets, OffsetCommitCallback callback)</code></p>\n<p>commitSyncpoll</p>\n<p>commitSyncoffsets</p>\n<p>OffsetCommitCallbackonComplete()</p>\n<p>x x+yxx<br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>pauseresume</p>\n<pre><code class=\"java\">public void pause(Collection&lt;TopicPartition&gt; partitions)\npublic void resume(Collection&lt;TopicPartition&gt; partitions)</code></pre>\n<p><br><code>public Set&lt;TopicPartition&gt; paused()</code></p>\n<p>kafka consumerclose</p>\n<pre><code class=\"java\">public void close()\npublic void close(Duration timeout)\npublic void close(long timeout, TimeUnit timeUnit)</code></pre>\n<p>timeout30s</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>_consumer_offsets</p>\n<p><code>auto.offset.reset</code><br><br><code>latest</code> <br><code>earliest</code> <br><code>none</code>  NoOffsetForPartitionException</p>\n<p>seek</p>\n<pre><code class=\"java\">public void seek(TopicPartition partition, long offset)</code></pre>\n<p>seekpollseekpoll</p>\n<pre><code class=\"java\">KafkaConsumer &lt;String String&gt; consumer= new KafkaConsumer&lt;&gt; (props); \ncosumer.subscribe(Arrays asList(topic));\nconsumer.poll(Duratio ofMillis(10000) ; \nSet&lt;TopicPartition&gt; assignment = consumer.assignment(); \nfor (Top cPartition tp : assignment) { \nconsumer.seek(tp , 10); \nwhile (true) { \nConsumerRecords&lt;String , String&gt; records = consumer.poll(DurationofMllis(1000)); \n//consume the record .\n}</code></pre>\n<p>  poll   <br><code>consumer poll(Duration.ofMillis(0)) ;</code></p>\n<p>  seek  poll  0 poll  </p>\n<p> seek  IllegalStateException  subscrib   seek </p>\n<pre><code class=\"java\">consumer.subscribe(Arrays.asList(topic)) ; \nconsumer.seek(new TopicPartition(topic, 0), 10 );</code></pre>\n<p><br>java.lang.I llegalStateException: No current assignment for partition topic- demo - 0</p>\n<p>seek</p>\n<pre><code class=\"java\">public Map&lt;Top cPartition Long&gt; endOffsets( Collection&lt;TopicPartition&gt; partitions) \npublic Map&lt;TopicPartition , Long&gt; endOffsets( Collection&lt;Top cPartit on&gt; part tions\nDuration timeout)\n\npublic Map&lt;TopicPartition , Long&gt; beginningOff sets (Collection&lt;TopicPartition&gt; partitions) \npublic Map&lt;TopicPart tion Long&gt; beginningOffsets(Collection&lt;TopicPartition&gt; partitions, \nDuration timeout)\n\npublic void seekToBeginning(Collection&lt;TopicPartition&gt; partitions) \npublic void seekToEnd Collection&lt;TopicPartition&gt; partitions)\n\npublic Map&lt;TopicPartition , OffsetAndTimestamp&gt; offsetsForTimes(Map&lt;TopicPartition, Long&gt; timestampsToSearch) \npublic Map&lt;TopicPartition OffsetAndTimestamp&gt; offsetsForTimes(Map&lt;TopicPartition, Long&gt; t imestampsToSearch,Duration timeout )</code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<p>  </p>\n<p></p>\n<pre><code class=\"java\">void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions)\nvoid onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions)</code></pre>\n<pre><code class=\"java\">Map&lt;TopicPartition, OffsetAndMetadata&gt; currentOffsets =new HashMap&lt;&gt;() ; \nconsumer.subscribe(Arrays.asList(topic) , new ConsumerRebalanceListener () { \n@Override \npublic void onPartitionsRevoked(Collection&lt;TopicPartition&gt; part tions) { \nconsumer.commitSync(currentOffsets) ; \ncurrentOffsets.clear(); \n@Override\npublic void onPartitionsAssigned(Collection&lt;TopicPartition partitions) { \n//do nothing . \n}) .,</code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> org.apache.kafka.clients.consumer.Consumerlnterceptor </p>\n<pre><code class=\"java\">public ConsumerRecords&lt;K, V&gt; onConsume(ConsumerRecords&lt;K , V&gt; records);\npublic void onCommit(Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets);\npublic void close();</code></pre>\n<p>Kafkaconsumer  poll  Consume <br> KafkaConsumer  onCommit </p>\n<p> interceptor classes </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>KatkaProducer  KafkaConsumer  KafkaConsumer acquire    ConcurrentModifcationException </p>\n<pre><code class=\"java\">private final AtomicLong currentThread = new Atom cLong(NO CURRENT THREAD ); //Kaf aConsumer \n\nprivate void acquire() { \nlong threadid = Thread.currentThread().getid();\nif (threadid != currentThread.get() &amp;&amp; !currentThread.compareAndSet(NO_CURRENT THREAD, threadid) ) \nthrow new ConcurrentModificationException \n(&quot;KafkaConsumer is not safe for multi- threaded access &quot;) ; \nrefcount.incrementAndGet();\n}</code></pre>\n<p>acquire release </p>\n<pre><code class=\"java\">private void release() \nif (refcount.decrementAndGet () == 0) {\n    currentThread.set(NO CURRENT THREAD);\n}</code></pre>\n<p>  KafkaConsumer </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030190716.png\" alt></p>\n<p> </p>\n<p>  assign seek  </p>\n<pre><code class=\"java\">public static void main(String[] args) { \n    Properties props = itConfig (); \n    int consumerThreadNum = 4 ; \n    for(int i=O;i&lt;consumerThreadNum;i++) { \n    new KafkaConsumerThread(props,topic).start();\n    }\n}\n\npublic static class KafkaConsumerThread extends Thread{\n    private KafkaConsumer&lt;String , String&gt; kafkaConsumer;\n    public KafkaConsumerThread(Properties props, String topic) { \n    this.kafkaConsumer =new KafkaConsumer&lt;&gt;(props); \n    this.kafkaConsumer.subscribe(Arrays asList(topic));\n}\n\n    @Override \n    public void run() {\n    try { \n        while (true) { \n        ConsumerRecords&lt;String, String&gt; records = \n        kafkaConsumer.poll (Duration.ofMill (1 00)) ; \n        for (ConsumerRecord&lt;String, Stri g&gt; record : records) { \n        //   \n        }\n    }\n    } catch (Exception e) { \n        e.printStackTrace(); \n    } finally { \n        kafkaConsumer.close();\n    }\n    }</code></pre>\n<p> TCP   consumerThreadNum  </p>\n<p>  poll  </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030193459.png\" alt></p>\n<pre><code class=\"java\">    @Override \n    public void run() {\n    try { \n        while (true) { \n        ConsumerRecords&lt;String, String&gt; records = \n        kafkaConsumer.poll(Duration.ofMill (1 00)) ; \n        if (!records.isEmpty () ) { \n            executorService.submit(new RecordsHandler(records));  // hander\n        }\n    }\n    } catch (Exception e) { \n        e.printStackTrace(); \n    } finally { \n        kafkaConsumer.close();\n    }\n    }\n\n    public static class RecordsHandler extends Thread{ \n    public final ConsumerRecords&lt;String, String&gt; records;\n\n    public RecordsHandl er (ConsumerRecords&lt;String, String&gt; records) ( \n        this.records =records;\n    }\n\n    @Override \n    public void run() {\n        // records\n    }\n    }\n</code></pre>\n<p>RecordHandler  KafraConsumerThread  RecordHandler </p>\n<p><br> offsets </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030200350.png\" alt></p>\n<p> RecordHandler offsets  KafraConsumerThread  poll  offsets </p>\n<pre><code class=\"java\">for (TopicPartition tp : records .partitions()) { \n    List&lt;ConsumerRecord&lt;String , String&gt; tpRecords = records . records(tp); \n    //  tpRec ords\n    long lastConsumedOffset = tpRecords . get (tpRecords. size() - 1) . offset() ; \n    synchronized (offsets) { \n        if offsets.co ta  sKey (tp)) { \n            offsets.put(tp, new OffsetAndMetadata(lastConsumedOffset + l)) ; \n        } else { \n            long position = offsets . get(tp) .offset() ; \n            if (position &lt; lastConsumedOffset + 1) { \n            offsets.put(tp, new OffsetAndMetadata(lastConsumedOffset + l))\n            }\n        }\n    }\n}</code></pre>\n<pre><code class=\"java\">synchronized (offsets) { \nif (!offsets. isEmpty () ) { \n    kafkaConsumer.commitSync(offsets); \n    offsets.clear();\n    }\n}</code></pre>\n<p> RecordHand erl  offset 99 RecordHand er2  offset 100 99  RecordHandler  200  99</p>\n<p>   </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030201350.png\" alt></p>\n<p>startOffset  endOffset  startOffset     startOffset  </p>\n<p> </p>\n<p>   startOffset    startOffset </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>fetch.min.bytes</code>Consumer  poll   Kafka <br> 1B</p>\n<p><code>fetch .max.bytes</code> Consumer  Kafka  52428800  50MB</p>\n<p><code>fetch.max.wait.ms</code> Kafka  500ms</p>\n<p><code>max.partition.fetch.bytes</code> Consumer  1048576 (B)</p>\n<p><code>max.poll.records</code> Consumer  500 </p>\n<p><code>connections.max.idle.ms</code> 540000 (ms  </p>\n<p><code>exclude.internal.topics</code>Kafka _consumer_offsets  _transaction_state exclude.internal.topics Kafka  true </p>\n<p><code>receive.buffer.bytes</code> Socket  65536 (B)</p>\n<p><code>send.buffer.bytes</code> Socket 13 1072 (B)</p>\n<p><code>request.timeout.ms</code> Consumer  30000ms</p>\n<p><code>metadata.max.age.ms</code> 300000 ms</p>\n<p><code>reconnect.backoff.ms</code>50ms</p>\n<p><code>retry.backo ms</code></p>\n<p><code>isolation.level</code>read uncommitted <br> read committed </p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030202942.png\" alt></p>\n<p><img src=\"/2022/10/16/kafka-producer-consumer/img-20221030202957.png\" alt></p>\n"},{"title":"kafka - ","img":"/medias/files/kafka-topic-partition.jpg","summary":" Kafka ","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2022-10-30T13:00:34.000Z","password":null,"_content":"\n Kafka  Kafka \n\n# \n\n \n\n## \n\n broker  auto.create.topics.enable  true  true) ,  num.partitions1  default.replication.factor 1 \n\n\n```\nbin/kafka-top cs .sh - zookeeper localhost: 2181/kafka \n--create --topic top create --partitions 4 --replication-factor 2\n```\n\n Kafka  log.dir log.dirs tmp/kafka-logs\n![](kafka-topic-and-partition/img-20221030211533.png)\n\n\ntopic-create-0 topic-create-1\n![](kafka-topic-and-partition/img-20221030211753.png)\n\n Log \n![](kafka-topic-and-partition/img-20221030211824.png)\n\n broker  ZooKeeper \n zooKeeper  brokers/topics/ \n![](kafka-topic-and-partition/img-20221030212257.png)\n\n \"2\"[1, 2] 2 2 brokerld 1 brokerId 2\n\nkafka topics replica-assignment \nreplica assignment \n`-- replica-assignment <String : broker_id_ for_part1_replica1: broker_id for \npartl_replica2 , broker_id _for_part2_replica1: broker_ id_ for _part2_replica2 , ... >`\n   \n\n\n`if-not-exists`\n'__'\n\n## \n\n broker \n\n replica assignment  replica-assignment \n\n kafka-topics.sh    brok broker.rack  disable-rack aware  \n\n```java\nprivate def assignRepl casToBrokersRackUnaware(\n  nPartit ons: Int , \n  replicat on Factor: Int ,  \n  brokerList :  q[Int] ,  broker \n  fixedStartindex: Int ,   \n  startPartitionid: Int):  \n  Map[Int, Seq[Int]] = { \n    val ret = mutable.Map[Int, Seg[Int]] () \n    val brokerArray = brokerList.toArray //brokerid \n     fixedStartindex 0  broker \n     broker Id \n    val startIndex = if (fixedStartindex >= 0) fixedStartindex \n      else rand.nextint(brokerArray.length) \n    0\n    var currentPartitionId = math.max(O , startPartitionid)\n     broker\n    var nextReplicaShift = if xedStartindex >= 0) fixedStartindex\n      else rand.nextint(brokerArray.length) \n      broker\n    for (_ <- 0 until nPartitions) ( \n      if (currentPartitionid > 0 && (currentPartitonId % brokerArray. length == 0) ) \n      nextReplicaShift += 1 \n      val firstReplicaindex = (currentPartitionid + startindex % brokerArray.length\n      val replicaBuffer = mutable . ArrayBuffer(brokerArray(firstReplicaindex)) \n       br oker\n      for (j <- 0 until replicatFactor - 1) \n        replicaBuffer += brokerArray ( \n        replicaIndex(firstReplicaIndex nextReplicaShift\n        j, brokerArray.length))   broker\n        \n        ret.put(currentPartitionid, replicaBuffer) \n         \n        currentPartitionid += 1\n      }\n    ret\n    }\n```\n\n\n## \n\nkafka-topics. 4 create list describe alter\nlist describe \n\n topics-with-overrides     \n\nunder-replicated-partitions  unavai able-partitions \n\n## \n\n alert\n\n key  key  null  key\n\n## \n\nkafka-configs \n\nkafka configs.sh broker  \n\n## \n\n broker  \n cleanup.policy  broker  log.cleanup policy\n\n![](kafka-topic-and-partition/img-20221106222237.png)\n\n![](kafka-topic-and-partition/img-20221106222301.png)\n\n![](kafka-topic-and-partition/img-20221106222336.png)\n\n![](kafka-topic-and-partition/img-20221106222348.png)\n\n## \n\nkafka-topics.sh  delete \n\n\n kafka_topics.sh  ZooKeeper  /admin/delete_topics    Kafka \n\n![](kafka-topic-and-partition/img-20221106222536.png)\n\n![](kafka-topic-and-partition/img-20221106222544.png)\n\n#  KafkaAdminClient\n\n## \n\nTopicommand\n\n-  CreateTopicsResult createTopics(Collection<NewTopic> newTopics)\n-  DeleteTopicsResult deleteTopics(Collection<String> topics)\n-  ListTopicsResult listTopics()\n-  DescribeTopicsResult describeTopics(Collection<String> topicNames)\n-  escribeConfigsResult describeConfigs(Collection<ConfigResource> resources)\n-  AlterConfigsResult alterConfigs(Map<ConfigResource, Config> configs)\n-  CreatePartitionsResult createPartitions(Map<String, NewPartitions> new Partitions)\n\n## \n\nKafka broker  create.topic.policy.class.namenull\norg.apache.kafka.server.policy.CreateTopicPolicy \n\n\n![](kafka-topic-and-partition/img-20221106223639.png)\n\n# \n\n## \n leader  follower\n\n leader   \n\nKafka  broker  auto.leader.rebalance.enable  trueKafka 5 broker broker 10%\n\nkafka-perferred-replica election.sh  leader \n\n## \n\n leader  follower  \n\n roker \n\nKafka kafka-reassin-partitions.sh broker\n\n\n\n## \n\n\n\n kafka-config.sh  kafka-reassign-partitions.sh\n\n- kafka-config.sh  broker  follower.replication.throttled.rate  leader.replication.throttled.rate  follower  leader B/s \n\n- kafka reassign-partitions.sh  throttle \n\n\n## \n\n kafka-reassign-partition.sh \n\n# \n\n## \n\nKafka  kafka-producer-perf-test.sh kafka-consumer-perf-test.sh\n\n##  \n\n\n Kafka  \n\n \n \nacks   \n\n![](kafka-topic-and-partition/img-20221106230140.png)\n1\n\n![](kafka-topic-and-partition/img-20221106230222.png)\n\n\n## \n\n Kafka \n\nToo many open flies  Linux  Socket  Linux   ulimit \n\nulimit  shell -H-S\n\n## \n\n ","source":"_posts/kafka-topic-and-partition.md","raw":"---\ntitle: kafka - \nimg: /medias/files/kafka-topic-partition.jpg\nsummary:  Kafka \ntags:\n  - \n  - Kafka\ncategories:\n  - \ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2022-10-30 21:00:34\npassword:\n---\n\n Kafka  Kafka \n\n# \n\n \n\n## \n\n broker  auto.create.topics.enable  true  true) ,  num.partitions1  default.replication.factor 1 \n\n\n```\nbin/kafka-top cs .sh - zookeeper localhost: 2181/kafka \n--create --topic top create --partitions 4 --replication-factor 2\n```\n\n Kafka  log.dir log.dirs tmp/kafka-logs\n![](kafka-topic-and-partition/img-20221030211533.png)\n\n\ntopic-create-0 topic-create-1\n![](kafka-topic-and-partition/img-20221030211753.png)\n\n Log \n![](kafka-topic-and-partition/img-20221030211824.png)\n\n broker  ZooKeeper \n zooKeeper  brokers/topics/ \n![](kafka-topic-and-partition/img-20221030212257.png)\n\n \"2\"[1, 2] 2 2 brokerld 1 brokerId 2\n\nkafka topics replica-assignment \nreplica assignment \n`-- replica-assignment <String : broker_id_ for_part1_replica1: broker_id for \npartl_replica2 , broker_id _for_part2_replica1: broker_ id_ for _part2_replica2 , ... >`\n   \n\n\n`if-not-exists`\n'__'\n\n## \n\n broker \n\n replica assignment  replica-assignment \n\n kafka-topics.sh    brok broker.rack  disable-rack aware  \n\n```java\nprivate def assignRepl casToBrokersRackUnaware(\n  nPartit ons: Int , \n  replicat on Factor: Int ,  \n  brokerList :  q[Int] ,  broker \n  fixedStartindex: Int ,   \n  startPartitionid: Int):  \n  Map[Int, Seq[Int]] = { \n    val ret = mutable.Map[Int, Seg[Int]] () \n    val brokerArray = brokerList.toArray //brokerid \n     fixedStartindex 0  broker \n     broker Id \n    val startIndex = if (fixedStartindex >= 0) fixedStartindex \n      else rand.nextint(brokerArray.length) \n    0\n    var currentPartitionId = math.max(O , startPartitionid)\n     broker\n    var nextReplicaShift = if xedStartindex >= 0) fixedStartindex\n      else rand.nextint(brokerArray.length) \n      broker\n    for (_ <- 0 until nPartitions) ( \n      if (currentPartitionid > 0 && (currentPartitonId % brokerArray. length == 0) ) \n      nextReplicaShift += 1 \n      val firstReplicaindex = (currentPartitionid + startindex % brokerArray.length\n      val replicaBuffer = mutable . ArrayBuffer(brokerArray(firstReplicaindex)) \n       br oker\n      for (j <- 0 until replicatFactor - 1) \n        replicaBuffer += brokerArray ( \n        replicaIndex(firstReplicaIndex nextReplicaShift\n        j, brokerArray.length))   broker\n        \n        ret.put(currentPartitionid, replicaBuffer) \n         \n        currentPartitionid += 1\n      }\n    ret\n    }\n```\n\n\n## \n\nkafka-topics. 4 create list describe alter\nlist describe \n\n topics-with-overrides     \n\nunder-replicated-partitions  unavai able-partitions \n\n## \n\n alert\n\n key  key  null  key\n\n## \n\nkafka-configs \n\nkafka configs.sh broker  \n\n## \n\n broker  \n cleanup.policy  broker  log.cleanup policy\n\n![](kafka-topic-and-partition/img-20221106222237.png)\n\n![](kafka-topic-and-partition/img-20221106222301.png)\n\n![](kafka-topic-and-partition/img-20221106222336.png)\n\n![](kafka-topic-and-partition/img-20221106222348.png)\n\n## \n\nkafka-topics.sh  delete \n\n\n kafka_topics.sh  ZooKeeper  /admin/delete_topics    Kafka \n\n![](kafka-topic-and-partition/img-20221106222536.png)\n\n![](kafka-topic-and-partition/img-20221106222544.png)\n\n#  KafkaAdminClient\n\n## \n\nTopicommand\n\n-  CreateTopicsResult createTopics(Collection<NewTopic> newTopics)\n-  DeleteTopicsResult deleteTopics(Collection<String> topics)\n-  ListTopicsResult listTopics()\n-  DescribeTopicsResult describeTopics(Collection<String> topicNames)\n-  escribeConfigsResult describeConfigs(Collection<ConfigResource> resources)\n-  AlterConfigsResult alterConfigs(Map<ConfigResource, Config> configs)\n-  CreatePartitionsResult createPartitions(Map<String, NewPartitions> new Partitions)\n\n## \n\nKafka broker  create.topic.policy.class.namenull\norg.apache.kafka.server.policy.CreateTopicPolicy \n\n\n![](kafka-topic-and-partition/img-20221106223639.png)\n\n# \n\n## \n leader  follower\n\n leader   \n\nKafka  broker  auto.leader.rebalance.enable  trueKafka 5 broker broker 10%\n\nkafka-perferred-replica election.sh  leader \n\n## \n\n leader  follower  \n\n roker \n\nKafka kafka-reassin-partitions.sh broker\n\n\n\n## \n\n\n\n kafka-config.sh  kafka-reassign-partitions.sh\n\n- kafka-config.sh  broker  follower.replication.throttled.rate  leader.replication.throttled.rate  follower  leader B/s \n\n- kafka reassign-partitions.sh  throttle \n\n\n## \n\n kafka-reassign-partition.sh \n\n# \n\n## \n\nKafka  kafka-producer-perf-test.sh kafka-consumer-perf-test.sh\n\n##  \n\n\n Kafka  \n\n \n \nacks   \n\n![](kafka-topic-and-partition/img-20221106230140.png)\n1\n\n![](kafka-topic-and-partition/img-20221106230222.png)\n\n\n## \n\n Kafka \n\nToo many open flies  Linux  Socket  Linux   ulimit \n\nulimit  shell -H-S\n\n## \n\n ","slug":"kafka-topic-and-partition","published":1,"updated":"2022-11-27T07:25:03.759Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre9x000fagvtqfxgev52","content":"<p> Kafka  Kafka </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> broker  auto.create.topics.enable  true  true) ,  num.partitions1  default.replication.factor 1 </p>\n<p></p>\n<pre><code>bin/kafka-top cs .sh - zookeeper localhost: 2181/kafka \n--create --topic top create --partitions 4 --replication-factor 2</code></pre><p> Kafka  log.dir log.dirs tmp/kafka-logs<br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221030211533.png\" alt></p>\n<p>topic-create-0 topic-create-1<br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221030211753.png\" alt></p>\n<p> Log <br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221030211824.png\" alt></p>\n<p> broker  ZooKeeper <br> zooKeeper  brokers/topics/ <br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221030212257.png\" alt></p>\n<p> 2[1, 2] 2 2 brokerld 1 brokerId 2</p>\n<p>kafka topics replica-assignment <br>replica assignment <br><code>-- replica-assignment &lt;String : broker_id_ for_part1_replica1: broker_id for \npartl_replica2 , broker_id _for_part2_replica1: broker_ id_ for _part2_replica2 , ... &gt;</code><br>   <br></p>\n<p><code>if-not-exists</code><br>__</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> broker </p>\n<p> replica assignment  replica-assignment </p>\n<p> kafka-topics.sh    brok broker.rack  disable-rack aware  </p>\n<pre class=\"line-numbers language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> def assignRepl <span class=\"token function\">casToBrokersRackUnaware</span><span class=\"token punctuation\">(</span>\n  nPartit ons<span class=\"token operator\">:</span> Int <span class=\"token punctuation\">,</span> \n  replicat on Factor<span class=\"token operator\">:</span> Int <span class=\"token punctuation\">,</span>  \n  brokerList <span class=\"token operator\">:</span>  q<span class=\"token punctuation\">[</span>Int<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">,</span>  broker \n  fixedStartindex<span class=\"token operator\">:</span> Int <span class=\"token punctuation\">,</span>   \n  startPartitionid<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>  \n  Map<span class=\"token punctuation\">[</span>Int<span class=\"token punctuation\">,</span> Seq<span class=\"token punctuation\">[</span>Int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n    val ret <span class=\"token operator\">=</span> mutable<span class=\"token punctuation\">.</span>Map<span class=\"token punctuation\">[</span>Int<span class=\"token punctuation\">,</span> Seg<span class=\"token punctuation\">[</span>Int<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n    val brokerArray <span class=\"token operator\">=</span> brokerList<span class=\"token punctuation\">.</span>toArray <span class=\"token comment\" spellcheck=\"true\">//brokerid </span>\n     fixedStartindex <span class=\"token number\">0</span>  broker \n     broker Id \n    val startIndex <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fixedStartindex <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> fixedStartindex \n      <span class=\"token keyword\">else</span> rand<span class=\"token punctuation\">.</span><span class=\"token function\">nextint</span><span class=\"token punctuation\">(</span>brokerArray<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> \n    <span class=\"token number\">0</span>\n    var currentPartitionId <span class=\"token operator\">=</span> math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>O <span class=\"token punctuation\">,</span> startPartitionid<span class=\"token punctuation\">)</span>\n     broker\n    var nextReplicaShift <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> xedStartindex <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> fixedStartindex\n      <span class=\"token keyword\">else</span> rand<span class=\"token punctuation\">.</span><span class=\"token function\">nextint</span><span class=\"token punctuation\">(</span>brokerArray<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> \n      broker\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>_ <span class=\"token operator\">&lt;</span><span class=\"token operator\">-</span> <span class=\"token number\">0</span> until nPartitions<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span> \n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentPartitionid <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>currentPartitonId <span class=\"token operator\">%</span> brokerArray<span class=\"token punctuation\">.</span> length <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> \n      nextReplicaShift <span class=\"token operator\">+=</span> <span class=\"token number\">1</span> \n      val firstReplicaindex <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>currentPartitionid <span class=\"token operator\">+</span> startindex <span class=\"token operator\">%</span> brokerArray<span class=\"token punctuation\">.</span>length\n      val replicaBuffer <span class=\"token operator\">=</span> mutable <span class=\"token punctuation\">.</span> <span class=\"token function\">ArrayBuffer</span><span class=\"token punctuation\">(</span><span class=\"token function\">brokerArray</span><span class=\"token punctuation\">(</span>firstReplicaindex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n       br oker\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">&lt;</span><span class=\"token operator\">-</span> <span class=\"token number\">0</span> until replicatFactor <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> \n        replicaBuffer <span class=\"token operator\">+=</span> <span class=\"token function\">brokerArray</span> <span class=\"token punctuation\">(</span> \n        <span class=\"token function\">replicaIndex</span><span class=\"token punctuation\">(</span>firstReplicaIndex nextReplicaShift\n        j<span class=\"token punctuation\">,</span> brokerArray<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>   broker\n        \n        ret<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>currentPartitionid<span class=\"token punctuation\">,</span> replicaBuffer<span class=\"token punctuation\">)</span> \n         \n        currentPartitionid <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span>\n    ret\n    <span class=\"token punctuation\">}</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>kafka-topics. 4 create list describe alter<br>list describe </p>\n<p> topics-with-overrides     </p>\n<p>under-replicated-partitions  unavai able-partitions </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> alert</p>\n<p> key  key  null  key</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>kafka-configs </p>\n<p>kafka configs.sh broker  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> broker <br> cleanup.policy  broker  log.cleanup policy</p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222237.png\" alt></p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222301.png\" alt></p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222336.png\" alt></p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222348.png\" alt></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>kafka-topics.sh  delete </p>\n<p> kafka_topics.sh  ZooKeeper  /admin/delete_topics    Kafka </p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222536.png\" alt></p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222544.png\" alt></p>\n<h1 id=\"-KafkaAdminClient\"><a href=\"#-KafkaAdminClient\" class=\"headerlink\" title=\" KafkaAdminClient\"></a> KafkaAdminClient</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Topicommand</p>\n<ul>\n<li> CreateTopicsResult createTopics(Collection<newtopic> newTopics)</newtopic></li>\n<li> DeleteTopicsResult deleteTopics(Collection<string> topics)</string></li>\n<li> ListTopicsResult listTopics()</li>\n<li> DescribeTopicsResult describeTopics(Collection<string> topicNames)</string></li>\n<li> escribeConfigsResult describeConfigs(Collection<configresource> resources)</configresource></li>\n<li> AlterConfigsResult alterConfigs(Map&lt;ConfigResource, Config&gt; configs)</li>\n<li> CreatePartitionsResult createPartitions(Map&lt;String, NewPartitions&gt; new Partitions)</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Kafka broker  create.topic.policy.class.namenull<br>org.apache.kafka.server.policy.CreateTopicPolicy </p>\n<p><br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106223639.png\" alt></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> leader  follower</p>\n<p> leader   </p>\n<p>Kafka  broker  auto.leader.rebalance.enable  trueKafka 5 broker broker 10%</p>\n<p>kafka-perferred-replica election.sh  leader </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> leader  follower  </p>\n<p> roker </p>\n<p>Kafka kafka-reassin-partitions.sh broker</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p> kafka-config.sh  kafka-reassign-partitions.sh</p>\n<ul>\n<li><p>kafka-config.sh  broker  follower.replication.throttled.rate  leader.replication.throttled.rate  follower  leader B/s </p>\n</li>\n<li><p>kafka reassign-partitions.sh  throttle </p>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> kafka-reassign-partition.sh </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Kafka  kafka-producer-perf-test.sh kafka-consumer-perf-test.sh</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br> Kafka  </p>\n<p> <br> <br>acks   </p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106230140.png\" alt><br>1</p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106230222.png\" alt><br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Kafka </p>\n<p>Too many open flies  Linux  Socket  Linux   ulimit </p>\n<p>ulimit  shell -H-S</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<p> Kafka  Kafka </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> broker  auto.create.topics.enable  true  true) ,  num.partitions1  default.replication.factor 1 </p>\n<p></p>\n<pre><code>bin/kafka-top cs .sh - zookeeper localhost: 2181/kafka \n--create --topic top create --partitions 4 --replication-factor 2</code></pre><p> Kafka  log.dir log.dirs tmp/kafka-logs<br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221030211533.png\" alt></p>\n<p>topic-create-0 topic-create-1<br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221030211753.png\" alt></p>\n<p> Log <br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221030211824.png\" alt></p>\n<p> broker  ZooKeeper <br> zooKeeper  brokers/topics/ <br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221030212257.png\" alt></p>\n<p> 2[1, 2] 2 2 brokerld 1 brokerId 2</p>\n<p>kafka topics replica-assignment <br>replica assignment <br><code>-- replica-assignment &lt;String : broker_id_ for_part1_replica1: broker_id for \npartl_replica2 , broker_id _for_part2_replica1: broker_ id_ for _part2_replica2 , ... &gt;</code><br>   <br></p>\n<p><code>if-not-exists</code><br>__</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> broker </p>\n<p> replica assignment  replica-assignment </p>\n<p> kafka-topics.sh    brok broker.rack  disable-rack aware  </p>\n<pre><code class=\"java\">private def assignRepl casToBrokersRackUnaware(\n  nPartit ons: Int , \n  replicat on Factor: Int ,  \n  brokerList :  q[Int] ,  broker \n  fixedStartindex: Int ,   \n  startPartitionid: Int):  \n  Map[Int, Seq[Int]] = { \n    val ret = mutable.Map[Int, Seg[Int]] () \n    val brokerArray = brokerList.toArray //brokerid \n     fixedStartindex 0  broker \n     broker Id \n    val startIndex = if (fixedStartindex &gt;= 0) fixedStartindex \n      else rand.nextint(brokerArray.length) \n    0\n    var currentPartitionId = math.max(O , startPartitionid)\n     broker\n    var nextReplicaShift = if xedStartindex &gt;= 0) fixedStartindex\n      else rand.nextint(brokerArray.length) \n      broker\n    for (_ &lt;- 0 until nPartitions) ( \n      if (currentPartitionid &gt; 0 &amp;&amp; (currentPartitonId % brokerArray. length == 0) ) \n      nextReplicaShift += 1 \n      val firstReplicaindex = (currentPartitionid + startindex % brokerArray.length\n      val replicaBuffer = mutable . ArrayBuffer(brokerArray(firstReplicaindex)) \n       br oker\n      for (j &lt;- 0 until replicatFactor - 1) \n        replicaBuffer += brokerArray ( \n        replicaIndex(firstReplicaIndex nextReplicaShift\n        j, brokerArray.length))   broker\n        \n        ret.put(currentPartitionid, replicaBuffer) \n         \n        currentPartitionid += 1\n      }\n    ret\n    }</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>kafka-topics. 4 create list describe alter<br>list describe </p>\n<p> topics-with-overrides     </p>\n<p>under-replicated-partitions  unavai able-partitions </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> alert</p>\n<p> key  key  null  key</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>kafka-configs </p>\n<p>kafka configs.sh broker  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> broker <br> cleanup.policy  broker  log.cleanup policy</p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222237.png\" alt></p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222301.png\" alt></p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222336.png\" alt></p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222348.png\" alt></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>kafka-topics.sh  delete </p>\n<p> kafka_topics.sh  ZooKeeper  /admin/delete_topics    Kafka </p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222536.png\" alt></p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106222544.png\" alt></p>\n<h1 id=\"-KafkaAdminClient\"><a href=\"#-KafkaAdminClient\" class=\"headerlink\" title=\" KafkaAdminClient\"></a> KafkaAdminClient</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Topicommand</p>\n<ul>\n<li> CreateTopicsResult createTopics(Collection<newtopic> newTopics)</newtopic></li>\n<li> DeleteTopicsResult deleteTopics(Collection<string> topics)</string></li>\n<li> ListTopicsResult listTopics()</li>\n<li> DescribeTopicsResult describeTopics(Collection<string> topicNames)</string></li>\n<li> escribeConfigsResult describeConfigs(Collection<configresource> resources)</configresource></li>\n<li> AlterConfigsResult alterConfigs(Map&lt;ConfigResource, Config&gt; configs)</li>\n<li> CreatePartitionsResult createPartitions(Map&lt;String, NewPartitions&gt; new Partitions)</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Kafka broker  create.topic.policy.class.namenull<br>org.apache.kafka.server.policy.CreateTopicPolicy </p>\n<p><br><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106223639.png\" alt></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> leader  follower</p>\n<p> leader   </p>\n<p>Kafka  broker  auto.leader.rebalance.enable  trueKafka 5 broker broker 10%</p>\n<p>kafka-perferred-replica election.sh  leader </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> leader  follower  </p>\n<p> roker </p>\n<p>Kafka kafka-reassin-partitions.sh broker</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p> kafka-config.sh  kafka-reassign-partitions.sh</p>\n<ul>\n<li><p>kafka-config.sh  broker  follower.replication.throttled.rate  leader.replication.throttled.rate  follower  leader B/s </p>\n</li>\n<li><p>kafka reassign-partitions.sh  throttle </p>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> kafka-reassign-partition.sh </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Kafka  kafka-producer-perf-test.sh kafka-consumer-perf-test.sh</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br> Kafka  </p>\n<p> <br> <br>acks   </p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106230140.png\" alt><br>1</p>\n<p><img src=\"/2022/10/30/kafka-topic-and-partition/img-20221106230222.png\" alt><br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Kafka </p>\n<p>Too many open flies  Linux  Socket  Linux   ulimit </p>\n<p>ulimit  shell -H-S</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n"},{"title":"ovn LS","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2022-09-27T14:41:49.000Z","img":"/medias/files/ovn.jpg","summary":"","password":null,"_content":"\nOVN(Logical Switch)(Logical Switch Port)\n\nlsplsovs portovsovs\n```\n(host1)vm1 - lsp1 - ls1\n(host1)vm2 - lsp2 -\n(host2)vm3 - lsp3 -\n```\n\n\n\n\n****\nhttps://www.ovn.org/support/dist-docs/ovn-architecture.7.pdf\nhttps://www.cnblogs.com/laolieren/p/ovn-architecture.html","source":"_posts/ovn-ls-pipeline.md","raw":"---\ntitle: ovn LS\ntags:\n  - OVN\n  - LS\ncategories:\n  - Network\ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2022-09-27 22:41:49\nimg: /medias/files/ovn.jpg\nsummary: \npassword:\n---\n\nOVN(Logical Switch)(Logical Switch Port)\n\nlsplsovs portovsovs\n```\n(host1)vm1 - lsp1 - ls1\n(host1)vm2 - lsp2 -\n(host2)vm3 - lsp3 -\n```\n\n\n\n\n****\nhttps://www.ovn.org/support/dist-docs/ovn-architecture.7.pdf\nhttps://www.cnblogs.com/laolieren/p/ovn-architecture.html","slug":"ovn-ls-pipeline","published":1,"updated":"2022-10-16T05:11:08.141Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre9x000gagvtu6pktrd9","content":"<p>OVN(Logical Switch)(Logical Switch Port)</p>\n<p>lsplsovs portovsovs</p>\n<pre><code>(host1)vm1 - lsp1 - ls1\n(host1)vm2 - lsp2 -\n(host2)vm3 - lsp3 -</code></pre><p><strong></strong><br><a href=\"https://www.ovn.org/support/dist-docs/ovn-architecture.7.pdf\" target=\"_blank\" rel=\"noopener\">https://www.ovn.org/support/dist-docs/ovn-architecture.7.pdf</a><br><a href=\"https://www.cnblogs.com/laolieren/p/ovn-architecture.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/laolieren/p/ovn-architecture.html</a></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<p>OVN(Logical Switch)(Logical Switch Port)</p>\n<p>lsplsovs portovsovs</p>\n<pre><code>(host1)vm1 - lsp1 - ls1\n(host1)vm2 - lsp2 -\n(host2)vm3 - lsp3 -</code></pre><p><strong></strong><br><a href=\"https://www.ovn.org/support/dist-docs/ovn-architecture.7.pdf\" target=\"_blank\" rel=\"noopener\">https://www.ovn.org/support/dist-docs/ovn-architecture.7.pdf</a><br><a href=\"https://www.cnblogs.com/laolieren/p/ovn-architecture.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/laolieren/p/ovn-architecture.html</a></p>\n"},{"title":"win-11 linux","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2022-06-25T13:09:00.000Z","img":"/medias/files/wsl.jpg","summary":"linux","password":null,"_content":"\nhttps://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview\n\n\n# \n\n- \nwindows  -> \n22000\n\n![](win11_wsl/img-20220625215308.png)\n\n- \nwindows windows - \nlinuxwindowswindows****\n![](win11_wsl/img-20220625215633.png)\n\n# wslubuntu\n\n\n- windows`Windows Subsystem`\nwsl\n![](win11_wsl/img-20220625220014.png)\n\n- wsl2\n`wsl --set-default-version 2`\n\n- windows`ubuntu`linux\n\n![](win11_wsl/img-20220625220129.png)\n\n- \n![](win11_wsl/img-20220625221705.png)\n\n\n# \n\nwsl\n`wsl -l -v`\n\nwsl\n`wsl -d <>`\n\nwsl2\n`wsl --set-version <> 2`\n\n\n`wsl --shutdown -n <>`\n\n# \n\n- linux``\n`netsh winsock reset`\n","source":"_posts/win11_wsl.md","raw":"---\ntitle: win-11 linux\ntags:\n  - WSL\ncategories:\n  - \ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2022-06-25 21:09:00\nimg: /medias/files/wsl.jpg\nsummary: linux\npassword:\n---\n\nhttps://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview\n\n\n# \n\n- \nwindows  -> \n22000\n\n![](win11_wsl/img-20220625215308.png)\n\n- \nwindows windows - \nlinuxwindowswindows****\n![](win11_wsl/img-20220625215633.png)\n\n# wslubuntu\n\n\n- windows`Windows Subsystem`\nwsl\n![](win11_wsl/img-20220625220014.png)\n\n- wsl2\n`wsl --set-default-version 2`\n\n- windows`ubuntu`linux\n\n![](win11_wsl/img-20220625220129.png)\n\n- \n![](win11_wsl/img-20220625221705.png)\n\n\n# \n\nwsl\n`wsl -l -v`\n\nwsl\n`wsl -d <>`\n\nwsl2\n`wsl --set-version <> 2`\n\n\n`wsl --shutdown -n <>`\n\n# \n\n- linux``\n`netsh winsock reset`\n","slug":"win11_wsl","published":1,"updated":"2022-07-04T14:25:05.788Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre9x000kagvtebzgef0d","content":"<p><a href=\"https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview\" target=\"_blank\" rel=\"noopener\">https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview</a></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul>\n<li><br>windows  -&gt; <br>22000</li>\n</ul>\n<p><img src=\"/2022/06/25/win11-wsl/img-20220625215308.png\" alt></p>\n<ul>\n<li><br>windows windows - <br>linuxwindowswindows<strong></strong><br><img src=\"/2022/06/25/win11-wsl/img-20220625215633.png\" alt></li>\n</ul>\n<h1 id=\"wslubuntu\"><a href=\"#wslubuntu\" class=\"headerlink\" title=\"wslubuntu\"></a>wslubuntu</h1><ul>\n<li><p>windows<code>Windows Subsystem</code><br>wsl<br><img src=\"/2022/06/25/win11-wsl/img-20220625220014.png\" alt></p>\n</li>\n<li><p>wsl2<br><code>wsl --set-default-version 2</code></p>\n</li>\n<li><p>windows<code>ubuntu</code>linux<br><br><img src=\"/2022/06/25/win11-wsl/img-20220625220129.png\" alt></p>\n</li>\n<li><p><br><img src=\"/2022/06/25/win11-wsl/img-20220625221705.png\" alt></p>\n</li>\n</ul>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>wsl<br><code>wsl -l -v</code></p>\n<p>wsl<br><code>wsl -d &lt;&gt;</code></p>\n<p>wsl2<br><code>wsl --set-version &lt;&gt; 2</code></p>\n<p><br><code>wsl --shutdown -n &lt;&gt;</code></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul>\n<li>linux<code></code><br><code>netsh winsock reset</code></li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<p><a href=\"https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview\" target=\"_blank\" rel=\"noopener\">https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview</a></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul>\n<li><br>windows  -&gt; <br>22000</li>\n</ul>\n<p><img src=\"/2022/06/25/win11-wsl/img-20220625215308.png\" alt></p>\n<ul>\n<li><br>windows windows - <br>linuxwindowswindows<strong></strong><br><img src=\"/2022/06/25/win11-wsl/img-20220625215633.png\" alt></li>\n</ul>\n<h1 id=\"wslubuntu\"><a href=\"#wslubuntu\" class=\"headerlink\" title=\"wslubuntu\"></a>wslubuntu</h1><ul>\n<li><p>windows<code>Windows Subsystem</code><br>wsl<br><img src=\"/2022/06/25/win11-wsl/img-20220625220014.png\" alt></p>\n</li>\n<li><p>wsl2<br><code>wsl --set-default-version 2</code></p>\n</li>\n<li><p>windows<code>ubuntu</code>linux<br><br><img src=\"/2022/06/25/win11-wsl/img-20220625220129.png\" alt></p>\n</li>\n<li><p><br><img src=\"/2022/06/25/win11-wsl/img-20220625221705.png\" alt></p>\n</li>\n</ul>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>wsl<br><code>wsl -l -v</code></p>\n<p>wsl<br><code>wsl -d &lt;&gt;</code></p>\n<p>wsl2<br><code>wsl --set-version &lt;&gt; 2</code></p>\n<p><br><code>wsl --shutdown -n &lt;&gt;</code></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul>\n<li>linux<code></code><br><code>netsh winsock reset</code></li>\n</ul>\n"},{"title":"ovs port vlan","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2022-07-05T14:39:49.000Z","img":"/medias/files/ovs_vlan.jpg","summary":"http://www.openvswitch.org/support/dist-docs/ovs-vswitchd.conf.db.5.html","password":null,"_content":"\n## vlan \n\naccesstrunknative-taggednative-untagged\n\n### \n\nvlanid0vlan tag\nnative-taggednative-untaggednative vlanporttag\n\n  {% pullquote mindmap mindmap-md %}\n- OVS vlan\n  - access\n    - \n      - vlan tagvlan(tag=0)\n      - vlan tagvlanid0\n    - \n      - vlan\n  - trunk\n    - \n      - trunk\n        - vlan\n        - vlan\n      - trunk\n        - vlan tagvlan id\n        - vlan tag\n    - \n      - vlan\n  - native-tagged\n    - \n      - vlan tagvlan id\n      - vlan tagnative vlan\n    - \n      - vlan\n  - native-untagged\n    - \n      - vlan tagvlan id\n      - vlan tagnative vlan\n    - \n      - vid == native vlanvlan\n      - vid != native vlanvlan\n\n{% endpullquote %}\n\nvlan_modenative-taggednative-untaggednative vlan\n\n## \n\n### vm\n\n```\nip netns add vm1\nip link add vm1-vif type veth peer name vm1\nip link set vm1 netns vm1\nip netns exec vm1 ip link set vm1 address 00:00:00:00:00:03\nip netns exec vm1 ip addr add 10.10.10.2/24 dev vm1\nip netns exec vm1 ip link set vm1 up\nip link set vm1-vif up\n\nip netns add vm2\nip link add vm2-vif type veth peer name vm2\nip link set vm2 netns vm2\nip netns exec vm2 ip link set vm2 address 00:00:00:00:00:04\nip netns exec vm2 ip addr add 10.10.10.3/24 dev vm2\nip netns exec vm2 ip link set vm2 up\nip link set vm2-vif up\n```\n\n### vm\n\n```\novs-vsctl add-br -br-int\novs-vsctl add-port br-int vm1-vif\novs-vsctl add-port br-int vm2-vif\n```\n\n\n![](ovs-port-vlan/img-20220705225523.png)\n\n### \n\n#### \n\ntcpdumpovs-tcpdumpOVSvlan\n\novs-tcpdumpovs-tcpdump\n\ntcpdumpvmveth pair\n\n\n\n```\nvm1-eth0-(tcpdump)vm1-vif(ovs-tcpdump)-OVS Bridge-vm2-vif-vm2-eth0\n```\n\n### access\nvlan/vlan0tagvlan\nvlanvlanvlan\n\n#### tag=0\n\ntag=0vlanid0tag(vlan_id0vlan)\n\n```\novs-vsctl set Port vm1-vif vlan_mode=access\novs-vsctl set Port vm2-vif vlan_mode=access\novs-vsctl set Port vm1-vif tag=0\novs-vsctl set Port vm2-vif tag=0\n```\n![](ovs-port-vlan/img-20220707221449.png)\n\n** vlan**\n- vm1vlanvm1-vif port access tag=0vlan\n![](ovs-port-vlan/img-20220707222722.png)\n![](ovs-port-vlan/img-20220707222806.png)\n\n\n** vlan 0**\n- vm1vlan0, vm1-vifvlan\n![](ovs-port-vlan/img-20220711222809.png)\n\n\n** vlan 11**\n- vm1 vlan 11vm1-vif port access tag=0\n![](ovs-port-vlan/img-20220711222511.png)\n![](ovs-port-vlan/img-20220711222607.png)\n\n\n** vlan**\n- vm2-vifvlanvlan\n![](ovs-port-vlan/img-20220711223215.png)\n\n** vlan 0**\nvlan 0\n\n\n** vlan 11**\n- vm1-vif accesstag11vm2-vif accesstag=0\n- vlan 11vm2-vif\n![](ovs-port-vlan/img-20220713200925.png)\n\n\n#### tag!=0\n\n```\novs-vsctl set Port vm1-vif vlan_mode=access\novs-vsctl set Port vm2-vif vlan_mode=access\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif tag=10\n```\n![](ovs-port-vlan/img-20220707222905.png)\n\n** vlan**\n- vm1vlanvm1-vif port access tag=10vlan 10\n![](ovs-port-vlan/img-20220707223104.png)\n\n\n** vlan 0**\nlinux \n```\nip netns exec vm1 vconfig add vm1 0\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.0 10.10.10.2\n```\n- vm1 vlan 0vm1-vif port access vlan 10\n![](ovs-port-vlan/img-20220710224012.png)\n![](ovs-port-vlan/img-20220710224207.png)\n\n\n**vlan 10**\nlinux \n```\nip netns exec vm1 vconfig add vm1 10\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.10 10.10.10.2\n```\n- vm1vlan 10vm1-vif port access \n![](ovs-port-vlan/img-20220710223431.png)\n![](ovs-port-vlan/img-20220710223519.png)\n\n\n** vlan11**\n```\nip netns exec vm1 vconfig add vm1 11\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.11 10.10.10.2\n```\n- vm1vlan 11vm1-vif port\n![](ovs-port-vlan/img-20220713201315.png)\n\n\n** vlan**\n- vm1-viftrunktrunksvm2-vifaccesstag=10vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713201940.png)\n\n\n** vlan 0**\nvlan 0\n\n\n** vlan 10**\n- vm1-vifaccesstag=10vm2-vifaccesstag=10\n- vm1-vif portvlan 10vm2-vifvm2-vifvlan\n![](ovs-port-vlan/img-20220713203016.png)\n\n\n** vlan 11**\n- vm1-vifaccesstag=11 vm2-vifaccesstag=10\n- vm1-vif portvlan 11vm2-vif\n![](ovs-port-vlan/img-20220713203212.png)\n\n\n### trunk\ntrunks\nvlanvlanvlanid0(vlan)\nvlan\ntrunks\nvlanvlan_range\nvlan_rangevlan\n\n##### trunks\nvlanovs porttrunk allvlan\n\n```\novs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm2-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif trunks=[]\novs-vsctl set Port vm2-vif trunks=[]\n```\n![](ovs-port-vlan/img-20220713213515.png)\n\n**vlan**\n- vm1vlanvm1-vifvlan\n![](ovs-port-vlan/img-20220713203933.png)\n\n\n**vlan 0**\n- vm1 vlan 0vm1-vifvlan\n![](ovs-port-vlan/img-20220710225805.png)\n![](ovs-port-vlan/img-20220710225731.png)\n\n\n**vlan 10**\n- vm1vlan 10vm1-vif vlan\n![](ovs-port-vlan/img-20220710230349.png)\n![](ovs-port-vlan/img-20220713204049.png)\n\n\n** vlan**\n- vm1-vifvlanvm2-vif\n- vm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713204432.png)\n\n\n** vlan 0**\nvlan 0\n\n\n** vlan 10**\n- vm1-vif accesstag=10\n- vm1-vifvlan 10vm2-vif vm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713204647.png)\n\n\n##### trunks\nvlanovs porttrunk\n```\novs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm2-vif trunks=[10]\n```\n![](ovs-port-vlan/img-20220713213553.png)\n\n**vlan**\n- vm1 vlanvm1-vif\n![](ovs-port-vlan/img-20220710231215.png)\n\n\n**vlan 0**\n- vm1 vlan 0vm1-vif\n![](ovs-port-vlan/img-20220710231542.png)\n\n\n**vlan 10**\n- vm1 vlan10vm1-vifvm2-vifvm2vlan10\n![](ovs-port-vlan/img-20220710231015.png)\n\n\n**vlan 11**\n- vm1 vlan 0vm1-vif\n![](ovs-port-vlan/img-20220710231738.png)\n\n\n** vlan**\n- vm1-vif trunktrunks=[]\n- vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713205845.png)\n\n\n** vlan 0**\nvlan 0\n\n\n** vlan 10**\n- vm1-vif accesstag=10\n- vm1-vifvlan 10vm2-vifvm2-vifvlan 10\n![](ovs-port-vlan/img-20220713210045.png)\n\n\n** vlan 11**\n- vm1-vif accesstag=10\n- vm1-vifvlan 11vm2-vif\n![](ovs-port-vlan/img-20220713210138.png)\n\n### native-tagged\nnative-vlantag\nvlannative vlanvlan\nvlan\n\n\n\n#### native vlantrunks\n```\novs-vsctl set Port vm1-vif vlan_mode=native-tagged\novs-vsctl set Port vm2-vif vlan_mode=native-tagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=10\n```\n![](ovs-port-vlan/img-20220713213626.png)\n\n** vlan**\n- vm1vlanvm1-vifnative vlan 10\n![](ovs-port-vlan/img-20220713211909.png)\n\n\n** vlan 0**\n- vm1vlan 0vm1-vifnative vlan 10\n![](ovs-port-vlan/img-20220713212047.png)\n\n\n** vlan 10**\n- vm1vlan 10vm1-vifvlan\n![](ovs-port-vlan/img-20220713212213.png)\n\n** vlan 11**\n- vm1 vlan 11vm1-vif\n![](ovs-port-vlan/img-20220713212418.png)\n\n\n** vlan**\n- vm1-viftrunktrunks=[]\n- vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713212741.png)\n\n\n** vlan 0**\nvlan 0\n\n\n** vlan 10**\n- vm1-vif accesstag=10\n- vm1-vifvlan 10vm2-vifvm2-vifvlan\n![](ovs-port-vlan/img-20220713212843.png)\n\n\n** vlan 11**\n- vm1-vif accesstag=11\n- vm1-vifvlan 11vm2-vif\n![](ovs-port-vlan/img-20220713213027.png)\n\n\n#### native vlantrunks\n```\novs-vsctl set Port vm1-vif vlan_mode=native-tagged\novs-vsctl set Port vm2-vif vlan_mode=native-tagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=11\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=11\n```\n![](ovs-port-vlan/img-20220713213656.png)\n\n** vlan**\n- vm1vlanvm1-vifvlan 11\n![](ovs-port-vlan/img-20220713213800.png)\n\n\n** vlan 0**\n- vm1vlan 0vm1-vifvlan 11\n![](ovs-port-vlan/img-20220713213923.png)\n\n\n** vlan 10**\n- vm1 vlan 10vm1-vifvlan\n![](ovs-port-vlan/img-20220713214019.png)\n\n\n** vlan 11**\n- vm1 vlan 11vm1-vifvlan\n![](ovs-port-vlan/img-20220713214125.png)\n\n\n** vlan 12**\n- vm1 vlan 12vm1-vif\n![](ovs-port-vlan/img-20220713214218.png)\n\n\n** vlan**\n- vm1trunktrunks=[]\n- vm1vlanvm2-vif\n![](ovs-port-vlan/img-20220713214451.png)\n\n\n** vlan 0**\nvlan 0\n\n** vlan 10**\n- vm1accesstag=10\n- vm1-vif vlan 10vm2-vifvm2-vifvlan\n![](ovs-port-vlan/img-20220713214701.png)\n\n** vlan 11**\n- vm1accesstag=11\n- vm1-vifvlan 11vm2-vifvm2-vifvlan\n![](ovs-port-vlan/img-20220713214834.png)\n\n** vlan 12**\n- vm1accesstag=12\n- vm1-vifvlan 12vm2-vif\n![](ovs-port-vlan/img-20220713214945.png)\n\n### native-untagged\nnative vlantag\nvlannative vlanvlan\nnative vlanvlanvlan\n\n#### native vlantrunks\n```\novs-vsctl set Port vm1-vif vlan_mode=native-untagged\novs-vsctl set Port vm2-vif vlan_mode=native-untagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=10\n```\n![](ovs-port-vlan/img-20220713215316.png)\n\n** vlan**\n- vm1vlanvm1-vifvlan 10\n![](ovs-port-vlan/img-20220713215402.png)\n\n\n** vlan 0**\n- vm1vlan 0vm1-vifvlan 10\n![](ovs-port-vlan/img-20220713215454.png)\n\n\n** vlan 10**\n- vm1 vlan 10vm1-vifvlan \n![](ovs-port-vlan/img-20220713215625.png)\n\n\n** vlan 11**\n- vm1 vlan 11vm1-vif\n![](ovs-port-vlan/img-20220713215748.png)\n\n\n** vlan**\n- vm1-vif trunktrunks=[]\n- vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713220011.png)\n\n\n** vlan 0**\nvlan 0\n\n** vlan 10**\n- vm1-vif accesstag=10\n- vm1-vifvlan 10vm2-vif,vm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713220151.png)\n\n** vlan 11**\n- vm1-vif accesstag=11\n- vm1-vifvlan 11vm2-vif\n![](ovs-port-vlan/img-20220713220356.png)\n\n#### native vlantrunks\n```\novs-vsctl set Port vm1-vif vlan_mode=native-untagged\novs-vsctl set Port vm2-vif vlan_mode=native-untagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=11\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=11\n```\n![](ovs-port-vlan/img-20220713220442.png)\n\n\n** vlan**\n- vm1vlanvm1-vifvlan 11\n![](ovs-port-vlan/img-20220713220628.png)\n\n\n** vlan 0**\n- vm1vlan 0vm1-vifvlan 11\n![](ovs-port-vlan/img-20220713220741.png)\n\n\n** vlan 10**\n- vm1vlan 10vm1-vifvlan \n![](ovs-port-vlan/img-20220713220829.png)\n\n\n** vlan 11**\n- vm1vlan 11vm1-vifvlan \n![](ovs-port-vlan/img-20220713220933.png)\n\n\n** vlan 12**\n- vm1vlan 11vm1-vif\n![](ovs-port-vlan/img-20220713221021.png)\n\n\n** vlan**\n- vm1-viftrunk trunks=0\n- vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713221252.png)\n\n\n** vlan 0**\nvlan 0\n\n** vlan 10**\n- vm1-vifaccess tag=10\n- vm1-vifvlan 10vm2-vifvm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713221436.png)\n\n\n** vlan 11**\n- vm1-vifaccess tag=11\n- vm1-vifvlan 11vm2-vifvm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713221610.png)\n\n\n** vlan 12**\n- vm1-vifaccess tag=12\n- vm1-vifvlan 12vm2-vif\n![](ovs-port-vlan/img-20220713221726.png)\n\n\n\n****\n`npm install hexo-simple-mindmap`\novs-tcpdump `https://docs.openvswitch.org/en/latest/ref/ovs-tcpdump.8/`","source":"_posts/ovs-port-vlan.md","raw":"---\ntitle: ovs port vlan\ntags:\n  - OVS\n  - VLAN\n  - ACCESS\n  - TRUNK\ncategories:\n  - NetWork\ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2022-07-05 22:39:49\nimg: /medias/files/ovs_vlan.jpg\nsummary: http://www.openvswitch.org/support/dist-docs/ovs-vswitchd.conf.db.5.html\npassword:\n---\n\n## vlan \n\naccesstrunknative-taggednative-untagged\n\n### \n\nvlanid0vlan tag\nnative-taggednative-untaggednative vlanporttag\n\n  {% pullquote mindmap mindmap-md %}\n- OVS vlan\n  - access\n    - \n      - vlan tagvlan(tag=0)\n      - vlan tagvlanid0\n    - \n      - vlan\n  - trunk\n    - \n      - trunk\n        - vlan\n        - vlan\n      - trunk\n        - vlan tagvlan id\n        - vlan tag\n    - \n      - vlan\n  - native-tagged\n    - \n      - vlan tagvlan id\n      - vlan tagnative vlan\n    - \n      - vlan\n  - native-untagged\n    - \n      - vlan tagvlan id\n      - vlan tagnative vlan\n    - \n      - vid == native vlanvlan\n      - vid != native vlanvlan\n\n{% endpullquote %}\n\nvlan_modenative-taggednative-untaggednative vlan\n\n## \n\n### vm\n\n```\nip netns add vm1\nip link add vm1-vif type veth peer name vm1\nip link set vm1 netns vm1\nip netns exec vm1 ip link set vm1 address 00:00:00:00:00:03\nip netns exec vm1 ip addr add 10.10.10.2/24 dev vm1\nip netns exec vm1 ip link set vm1 up\nip link set vm1-vif up\n\nip netns add vm2\nip link add vm2-vif type veth peer name vm2\nip link set vm2 netns vm2\nip netns exec vm2 ip link set vm2 address 00:00:00:00:00:04\nip netns exec vm2 ip addr add 10.10.10.3/24 dev vm2\nip netns exec vm2 ip link set vm2 up\nip link set vm2-vif up\n```\n\n### vm\n\n```\novs-vsctl add-br -br-int\novs-vsctl add-port br-int vm1-vif\novs-vsctl add-port br-int vm2-vif\n```\n\n\n![](ovs-port-vlan/img-20220705225523.png)\n\n### \n\n#### \n\ntcpdumpovs-tcpdumpOVSvlan\n\novs-tcpdumpovs-tcpdump\n\ntcpdumpvmveth pair\n\n\n\n```\nvm1-eth0-(tcpdump)vm1-vif(ovs-tcpdump)-OVS Bridge-vm2-vif-vm2-eth0\n```\n\n### access\nvlan/vlan0tagvlan\nvlanvlanvlan\n\n#### tag=0\n\ntag=0vlanid0tag(vlan_id0vlan)\n\n```\novs-vsctl set Port vm1-vif vlan_mode=access\novs-vsctl set Port vm2-vif vlan_mode=access\novs-vsctl set Port vm1-vif tag=0\novs-vsctl set Port vm2-vif tag=0\n```\n![](ovs-port-vlan/img-20220707221449.png)\n\n** vlan**\n- vm1vlanvm1-vif port access tag=0vlan\n![](ovs-port-vlan/img-20220707222722.png)\n![](ovs-port-vlan/img-20220707222806.png)\n\n\n** vlan 0**\n- vm1vlan0, vm1-vifvlan\n![](ovs-port-vlan/img-20220711222809.png)\n\n\n** vlan 11**\n- vm1 vlan 11vm1-vif port access tag=0\n![](ovs-port-vlan/img-20220711222511.png)\n![](ovs-port-vlan/img-20220711222607.png)\n\n\n** vlan**\n- vm2-vifvlanvlan\n![](ovs-port-vlan/img-20220711223215.png)\n\n** vlan 0**\nvlan 0\n\n\n** vlan 11**\n- vm1-vif accesstag11vm2-vif accesstag=0\n- vlan 11vm2-vif\n![](ovs-port-vlan/img-20220713200925.png)\n\n\n#### tag!=0\n\n```\novs-vsctl set Port vm1-vif vlan_mode=access\novs-vsctl set Port vm2-vif vlan_mode=access\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif tag=10\n```\n![](ovs-port-vlan/img-20220707222905.png)\n\n** vlan**\n- vm1vlanvm1-vif port access tag=10vlan 10\n![](ovs-port-vlan/img-20220707223104.png)\n\n\n** vlan 0**\nlinux \n```\nip netns exec vm1 vconfig add vm1 0\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.0 10.10.10.2\n```\n- vm1 vlan 0vm1-vif port access vlan 10\n![](ovs-port-vlan/img-20220710224012.png)\n![](ovs-port-vlan/img-20220710224207.png)\n\n\n**vlan 10**\nlinux \n```\nip netns exec vm1 vconfig add vm1 10\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.10 10.10.10.2\n```\n- vm1vlan 10vm1-vif port access \n![](ovs-port-vlan/img-20220710223431.png)\n![](ovs-port-vlan/img-20220710223519.png)\n\n\n** vlan11**\n```\nip netns exec vm1 vconfig add vm1 11\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.11 10.10.10.2\n```\n- vm1vlan 11vm1-vif port\n![](ovs-port-vlan/img-20220713201315.png)\n\n\n** vlan**\n- vm1-viftrunktrunksvm2-vifaccesstag=10vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713201940.png)\n\n\n** vlan 0**\nvlan 0\n\n\n** vlan 10**\n- vm1-vifaccesstag=10vm2-vifaccesstag=10\n- vm1-vif portvlan 10vm2-vifvm2-vifvlan\n![](ovs-port-vlan/img-20220713203016.png)\n\n\n** vlan 11**\n- vm1-vifaccesstag=11 vm2-vifaccesstag=10\n- vm1-vif portvlan 11vm2-vif\n![](ovs-port-vlan/img-20220713203212.png)\n\n\n### trunk\ntrunks\nvlanvlanvlanid0(vlan)\nvlan\ntrunks\nvlanvlan_range\nvlan_rangevlan\n\n##### trunks\nvlanovs porttrunk allvlan\n\n```\novs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm2-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif trunks=[]\novs-vsctl set Port vm2-vif trunks=[]\n```\n![](ovs-port-vlan/img-20220713213515.png)\n\n**vlan**\n- vm1vlanvm1-vifvlan\n![](ovs-port-vlan/img-20220713203933.png)\n\n\n**vlan 0**\n- vm1 vlan 0vm1-vifvlan\n![](ovs-port-vlan/img-20220710225805.png)\n![](ovs-port-vlan/img-20220710225731.png)\n\n\n**vlan 10**\n- vm1vlan 10vm1-vif vlan\n![](ovs-port-vlan/img-20220710230349.png)\n![](ovs-port-vlan/img-20220713204049.png)\n\n\n** vlan**\n- vm1-vifvlanvm2-vif\n- vm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713204432.png)\n\n\n** vlan 0**\nvlan 0\n\n\n** vlan 10**\n- vm1-vif accesstag=10\n- vm1-vifvlan 10vm2-vif vm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713204647.png)\n\n\n##### trunks\nvlanovs porttrunk\n```\novs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm2-vif trunks=[10]\n```\n![](ovs-port-vlan/img-20220713213553.png)\n\n**vlan**\n- vm1 vlanvm1-vif\n![](ovs-port-vlan/img-20220710231215.png)\n\n\n**vlan 0**\n- vm1 vlan 0vm1-vif\n![](ovs-port-vlan/img-20220710231542.png)\n\n\n**vlan 10**\n- vm1 vlan10vm1-vifvm2-vifvm2vlan10\n![](ovs-port-vlan/img-20220710231015.png)\n\n\n**vlan 11**\n- vm1 vlan 0vm1-vif\n![](ovs-port-vlan/img-20220710231738.png)\n\n\n** vlan**\n- vm1-vif trunktrunks=[]\n- vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713205845.png)\n\n\n** vlan 0**\nvlan 0\n\n\n** vlan 10**\n- vm1-vif accesstag=10\n- vm1-vifvlan 10vm2-vifvm2-vifvlan 10\n![](ovs-port-vlan/img-20220713210045.png)\n\n\n** vlan 11**\n- vm1-vif accesstag=10\n- vm1-vifvlan 11vm2-vif\n![](ovs-port-vlan/img-20220713210138.png)\n\n### native-tagged\nnative-vlantag\nvlannative vlanvlan\nvlan\n\n\n\n#### native vlantrunks\n```\novs-vsctl set Port vm1-vif vlan_mode=native-tagged\novs-vsctl set Port vm2-vif vlan_mode=native-tagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=10\n```\n![](ovs-port-vlan/img-20220713213626.png)\n\n** vlan**\n- vm1vlanvm1-vifnative vlan 10\n![](ovs-port-vlan/img-20220713211909.png)\n\n\n** vlan 0**\n- vm1vlan 0vm1-vifnative vlan 10\n![](ovs-port-vlan/img-20220713212047.png)\n\n\n** vlan 10**\n- vm1vlan 10vm1-vifvlan\n![](ovs-port-vlan/img-20220713212213.png)\n\n** vlan 11**\n- vm1 vlan 11vm1-vif\n![](ovs-port-vlan/img-20220713212418.png)\n\n\n** vlan**\n- vm1-viftrunktrunks=[]\n- vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713212741.png)\n\n\n** vlan 0**\nvlan 0\n\n\n** vlan 10**\n- vm1-vif accesstag=10\n- vm1-vifvlan 10vm2-vifvm2-vifvlan\n![](ovs-port-vlan/img-20220713212843.png)\n\n\n** vlan 11**\n- vm1-vif accesstag=11\n- vm1-vifvlan 11vm2-vif\n![](ovs-port-vlan/img-20220713213027.png)\n\n\n#### native vlantrunks\n```\novs-vsctl set Port vm1-vif vlan_mode=native-tagged\novs-vsctl set Port vm2-vif vlan_mode=native-tagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=11\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=11\n```\n![](ovs-port-vlan/img-20220713213656.png)\n\n** vlan**\n- vm1vlanvm1-vifvlan 11\n![](ovs-port-vlan/img-20220713213800.png)\n\n\n** vlan 0**\n- vm1vlan 0vm1-vifvlan 11\n![](ovs-port-vlan/img-20220713213923.png)\n\n\n** vlan 10**\n- vm1 vlan 10vm1-vifvlan\n![](ovs-port-vlan/img-20220713214019.png)\n\n\n** vlan 11**\n- vm1 vlan 11vm1-vifvlan\n![](ovs-port-vlan/img-20220713214125.png)\n\n\n** vlan 12**\n- vm1 vlan 12vm1-vif\n![](ovs-port-vlan/img-20220713214218.png)\n\n\n** vlan**\n- vm1trunktrunks=[]\n- vm1vlanvm2-vif\n![](ovs-port-vlan/img-20220713214451.png)\n\n\n** vlan 0**\nvlan 0\n\n** vlan 10**\n- vm1accesstag=10\n- vm1-vif vlan 10vm2-vifvm2-vifvlan\n![](ovs-port-vlan/img-20220713214701.png)\n\n** vlan 11**\n- vm1accesstag=11\n- vm1-vifvlan 11vm2-vifvm2-vifvlan\n![](ovs-port-vlan/img-20220713214834.png)\n\n** vlan 12**\n- vm1accesstag=12\n- vm1-vifvlan 12vm2-vif\n![](ovs-port-vlan/img-20220713214945.png)\n\n### native-untagged\nnative vlantag\nvlannative vlanvlan\nnative vlanvlanvlan\n\n#### native vlantrunks\n```\novs-vsctl set Port vm1-vif vlan_mode=native-untagged\novs-vsctl set Port vm2-vif vlan_mode=native-untagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=10\n```\n![](ovs-port-vlan/img-20220713215316.png)\n\n** vlan**\n- vm1vlanvm1-vifvlan 10\n![](ovs-port-vlan/img-20220713215402.png)\n\n\n** vlan 0**\n- vm1vlan 0vm1-vifvlan 10\n![](ovs-port-vlan/img-20220713215454.png)\n\n\n** vlan 10**\n- vm1 vlan 10vm1-vifvlan \n![](ovs-port-vlan/img-20220713215625.png)\n\n\n** vlan 11**\n- vm1 vlan 11vm1-vif\n![](ovs-port-vlan/img-20220713215748.png)\n\n\n** vlan**\n- vm1-vif trunktrunks=[]\n- vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713220011.png)\n\n\n** vlan 0**\nvlan 0\n\n** vlan 10**\n- vm1-vif accesstag=10\n- vm1-vifvlan 10vm2-vif,vm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713220151.png)\n\n** vlan 11**\n- vm1-vif accesstag=11\n- vm1-vifvlan 11vm2-vif\n![](ovs-port-vlan/img-20220713220356.png)\n\n#### native vlantrunks\n```\novs-vsctl set Port vm1-vif vlan_mode=native-untagged\novs-vsctl set Port vm2-vif vlan_mode=native-untagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=11\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=11\n```\n![](ovs-port-vlan/img-20220713220442.png)\n\n\n** vlan**\n- vm1vlanvm1-vifvlan 11\n![](ovs-port-vlan/img-20220713220628.png)\n\n\n** vlan 0**\n- vm1vlan 0vm1-vifvlan 11\n![](ovs-port-vlan/img-20220713220741.png)\n\n\n** vlan 10**\n- vm1vlan 10vm1-vifvlan \n![](ovs-port-vlan/img-20220713220829.png)\n\n\n** vlan 11**\n- vm1vlan 11vm1-vifvlan \n![](ovs-port-vlan/img-20220713220933.png)\n\n\n** vlan 12**\n- vm1vlan 11vm1-vif\n![](ovs-port-vlan/img-20220713221021.png)\n\n\n** vlan**\n- vm1-viftrunk trunks=0\n- vm1-vifvlanvm2-vif\n![](ovs-port-vlan/img-20220713221252.png)\n\n\n** vlan 0**\nvlan 0\n\n** vlan 10**\n- vm1-vifaccess tag=10\n- vm1-vifvlan 10vm2-vifvm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713221436.png)\n\n\n** vlan 11**\n- vm1-vifaccess tag=11\n- vm1-vifvlan 11vm2-vifvm2-vifvlanvm2\n![](ovs-port-vlan/img-20220713221610.png)\n\n\n** vlan 12**\n- vm1-vifaccess tag=12\n- vm1-vifvlan 12vm2-vif\n![](ovs-port-vlan/img-20220713221726.png)\n\n\n\n****\n`npm install hexo-simple-mindmap`\novs-tcpdump `https://docs.openvswitch.org/en/latest/ref/ovs-tcpdump.8/`","slug":"ovs-port-vlan","published":1,"updated":"2022-09-27T14:34:06.756Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clg8yre9x000magvtw1nlgy8p","content":"<h2 id=\"vlan-\"><a href=\"#vlan-\" class=\"headerlink\" title=\"vlan \"></a>vlan </h2><p>accesstrunknative-taggednative-untagged</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>vlanid0vlan tag<br>native-taggednative-untaggednative vlanporttag</p>\n  <blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li>OVS vlan<ul>\n<li>access<ul>\n<li><ul>\n<li>vlan tagvlan(tag=0)</li>\n<li>vlan tagvlanid0</li>\n</ul>\n</li>\n<li><ul>\n<li>vlan</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>trunk<ul>\n<li><ul>\n<li>trunk<ul>\n<li>vlan</li>\n<li>vlan</li>\n</ul>\n</li>\n<li>trunk<ul>\n<li>vlan tagvlan id</li>\n<li>vlan tag</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li>vlan</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>native-tagged<ul>\n<li><ul>\n<li>vlan tagvlan id</li>\n<li>vlan tagnative vlan</li>\n</ul>\n</li>\n<li><ul>\n<li>vlan</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>native-untagged<ul>\n<li><ul>\n<li>vlan tagvlan id</li>\n<li>vlan tagnative vlan</li>\n</ul>\n</li>\n<li><ul>\n<li>vid == native vlanvlan</li>\n<li>vid != native vlanvlan</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n\n<p>vlan_modenative-taggednative-untaggednative vlan</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"vm\"><a href=\"#vm\" class=\"headerlink\" title=\"vm\"></a>vm</h3><pre><code>ip netns add vm1\nip link add vm1-vif type veth peer name vm1\nip link set vm1 netns vm1\nip netns exec vm1 ip link set vm1 address 00:00:00:00:00:03\nip netns exec vm1 ip addr add 10.10.10.2/24 dev vm1\nip netns exec vm1 ip link set vm1 up\nip link set vm1-vif up\n\nip netns add vm2\nip link add vm2-vif type veth peer name vm2\nip link set vm2 netns vm2\nip netns exec vm2 ip link set vm2 address 00:00:00:00:00:04\nip netns exec vm2 ip addr add 10.10.10.3/24 dev vm2\nip netns exec vm2 ip link set vm2 up\nip link set vm2-vif up</code></pre><h3 id=\"vm\"><a href=\"#vm\" class=\"headerlink\" title=\"vm\"></a>vm</h3><pre><code>ovs-vsctl add-br -br-int\novs-vsctl add-port br-int vm1-vif\novs-vsctl add-port br-int vm2-vif</code></pre><p><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220705225523.png\" alt></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>tcpdumpovs-tcpdumpOVSvlan</p>\n<p>ovs-tcpdumpovs-tcpdump</p>\n<p>tcpdumpvmveth pair</p>\n<p></p>\n<pre><code>vm1-eth0-(tcpdump)vm1-vif(ovs-tcpdump)-OVS Bridge-vm2-vif-vm2-eth0</code></pre><h3 id=\"access\"><a href=\"#access\" class=\"headerlink\" title=\"access\"></a>access</h3><p>vlan/vlan0tagvlan<br>vlanvlanvlan</p>\n<h4 id=\"tag-0\"><a href=\"#tag-0\" class=\"headerlink\" title=\"tag=0\"></a>tag=0</h4><p>tag=0vlanid0tag(vlan_id0vlan)</p>\n<pre><code>ovs-vsctl set Port vm1-vif vlan_mode=access\novs-vsctl set Port vm2-vif vlan_mode=access\novs-vsctl set Port vm1-vif tag=0\novs-vsctl set Port vm2-vif tag=0</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220707221449.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vif port access tag=0vlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220707222722.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220707222806.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan0, vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220711222809.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 11vm1-vif port access tag=0<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220711222511.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220711222607.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm2-vifvlanvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220711223215.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vif accesstag11vm2-vif accesstag=0</li>\n<li>vlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713200925.png\" alt></li>\n</ul>\n<h4 id=\"tag-0-1\"><a href=\"#tag-0-1\" class=\"headerlink\" title=\"tag!=0\"></a>tag!=0</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=access\novs-vsctl set Port vm2-vif vlan_mode=access\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif tag=10</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220707222905.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vif port access tag=10vlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220707223104.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>linux </p>\n<pre><code>ip netns exec vm1 vconfig add vm1 0\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.0 10.10.10.2</code></pre><ul>\n<li>vm1 vlan 0vm1-vif port access vlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710224012.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710224207.png\" alt></li>\n</ul>\n<p><strong>vlan 10</strong><br>linux </p>\n<pre><code>ip netns exec vm1 vconfig add vm1 10\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.10 10.10.10.2</code></pre><ul>\n<li>vm1vlan 10vm1-vif port access <br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710223431.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710223519.png\" alt></li>\n</ul>\n<p><strong> vlan11</strong></p>\n<pre><code>ip netns exec vm1 vconfig add vm1 11\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.11 10.10.10.2</code></pre><ul>\n<li>vm1vlan 11vm1-vif port<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713201315.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-viftrunktrunksvm2-vifaccesstag=10vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713201940.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vifaccesstag=10vm2-vifaccesstag=10</li>\n<li>vm1-vif portvlan 10vm2-vifvm2-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713203016.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vifaccesstag=11 vm2-vifaccesstag=10</li>\n<li>vm1-vif portvlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713203212.png\" alt></li>\n</ul>\n<h3 id=\"trunk\"><a href=\"#trunk\" class=\"headerlink\" title=\"trunk\"></a>trunk</h3><p>trunks<br>vlanvlanvlanid0(vlan)<br>vlan<br>trunks<br>vlanvlan_range<br>vlan_rangevlan</p>\n<h5 id=\"trunks\"><a href=\"#trunks\" class=\"headerlink\" title=\"trunks\"></a>trunks</h5><p>vlanovs porttrunk allvlan</p>\n<pre><code>ovs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm2-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif trunks=[]\novs-vsctl set Port vm2-vif trunks=[]</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213515.png\" alt></p>\n<p><strong>vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713203933.png\" alt></li>\n</ul>\n<p><strong>vlan 0</strong></p>\n<ul>\n<li>vm1 vlan 0vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710225805.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710225731.png\" alt></li>\n</ul>\n<p><strong>vlan 10</strong></p>\n<ul>\n<li>vm1vlan 10vm1-vif vlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710230349.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713204049.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-vifvlanvm2-vif</li>\n<li>vm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713204432.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 10vm2-vif vm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713204647.png\" alt></li>\n</ul>\n<h5 id=\"trunks\"><a href=\"#trunks\" class=\"headerlink\" title=\"trunks\"></a>trunks</h5><p>vlanovs porttrunk</p>\n<pre><code>ovs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm2-vif trunks=[10]</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213553.png\" alt></p>\n<p><strong>vlan</strong></p>\n<ul>\n<li>vm1 vlanvm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710231215.png\" alt></li>\n</ul>\n<p><strong>vlan 0</strong></p>\n<ul>\n<li>vm1 vlan 0vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710231542.png\" alt></li>\n</ul>\n<p><strong>vlan 10</strong></p>\n<ul>\n<li>vm1 vlan10vm1-vifvm2-vifvm2vlan10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710231015.png\" alt></li>\n</ul>\n<p><strong>vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 0vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710231738.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-vif trunktrunks=[]</li>\n<li>vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713205845.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 10vm2-vifvm2-vifvlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713210045.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713210138.png\" alt></li>\n</ul>\n<h3 id=\"native-tagged\"><a href=\"#native-tagged\" class=\"headerlink\" title=\"native-tagged\"></a>native-tagged</h3><p>native-vlantag<br>vlannative vlanvlan<br>vlan</p>\n<h4 id=\"native-vlantrunks\"><a href=\"#native-vlantrunks\" class=\"headerlink\" title=\"native vlantrunks\"></a>native vlantrunks</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=native-tagged\novs-vsctl set Port vm2-vif vlan_mode=native-tagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=10</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213626.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifnative vlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713211909.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan 0vm1-vifnative vlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212047.png\" alt></li>\n</ul>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1vlan 10vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212213.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 11vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212418.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-viftrunktrunks=[]</li>\n<li>vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212741.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 10vm2-vifvm2-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212843.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vif accesstag=11</li>\n<li>vm1-vifvlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213027.png\" alt></li>\n</ul>\n<h4 id=\"native-vlantrunks\"><a href=\"#native-vlantrunks\" class=\"headerlink\" title=\"native vlantrunks\"></a>native vlantrunks</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=native-tagged\novs-vsctl set Port vm2-vif vlan_mode=native-tagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=11\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=11</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213656.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifvlan 11<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213800.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan 0vm1-vifvlan 11<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213923.png\" alt></li>\n</ul>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1 vlan 10vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214019.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 11vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214125.png\" alt></li>\n</ul>\n<p><strong> vlan 12</strong></p>\n<ul>\n<li>vm1 vlan 12vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214218.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1trunktrunks=[]</li>\n<li>vm1vlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214451.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1accesstag=10</li>\n<li>vm1-vif vlan 10vm2-vifvm2-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214701.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1accesstag=11</li>\n<li>vm1-vifvlan 11vm2-vifvm2-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214834.png\" alt></li>\n</ul>\n<p><strong> vlan 12</strong></p>\n<ul>\n<li>vm1accesstag=12</li>\n<li>vm1-vifvlan 12vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214945.png\" alt></li>\n</ul>\n<h3 id=\"native-untagged\"><a href=\"#native-untagged\" class=\"headerlink\" title=\"native-untagged\"></a>native-untagged</h3><p>native vlantag<br>vlannative vlanvlan<br>native vlanvlanvlan</p>\n<h4 id=\"native-vlantrunks-1\"><a href=\"#native-vlantrunks-1\" class=\"headerlink\" title=\"native vlantrunks\"></a>native vlantrunks</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=native-untagged\novs-vsctl set Port vm2-vif vlan_mode=native-untagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=10</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215316.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifvlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215402.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan 0vm1-vifvlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215454.png\" alt></li>\n</ul>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1 vlan 10vm1-vifvlan <br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215625.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 11vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215748.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-vif trunktrunks=[]</li>\n<li>vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220011.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 10vm2-vif,vm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220151.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vif accesstag=11</li>\n<li>vm1-vifvlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220356.png\" alt></li>\n</ul>\n<h4 id=\"native-vlantrunks-1\"><a href=\"#native-vlantrunks-1\" class=\"headerlink\" title=\"native vlantrunks\"></a>native vlantrunks</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=native-untagged\novs-vsctl set Port vm2-vif vlan_mode=native-untagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=11\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=11</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220442.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifvlan 11<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220628.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan 0vm1-vifvlan 11<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220741.png\" alt></li>\n</ul>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1vlan 10vm1-vifvlan <br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220829.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1vlan 11vm1-vifvlan <br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220933.png\" alt></li>\n</ul>\n<p><strong> vlan 12</strong></p>\n<ul>\n<li>vm1vlan 11vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221021.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-viftrunk trunks=0</li>\n<li>vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221252.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vifaccess tag=10</li>\n<li>vm1-vifvlan 10vm2-vifvm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221436.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vifaccess tag=11</li>\n<li>vm1-vifvlan 11vm2-vifvm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221610.png\" alt></li>\n</ul>\n<p><strong> vlan 12</strong></p>\n<ul>\n<li>vm1-vifaccess tag=12</li>\n<li>vm1-vifvlan 12vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221726.png\" alt></li>\n</ul>\n<p><strong></strong><br><code>npm install hexo-simple-mindmap</code><br>ovs-tcpdump <code>https://docs.openvswitch.org/en/latest/ref/ovs-tcpdump.8/</code></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","site":{"data":{"musics":[{"name":"","artist":"","url":"/medias/music/yequ.mp3","cover":"/medias/music/avatars/yequ.jpg"},{"name":"","artist":"","url":"/medias/music/yiluxiangbei.mp3","cover":"/medias/music/avatars/yiluxiangbei.jpg"},{"name":"","artist":"","url":"/medias/music/tiantangdemogui.mp3","cover":"/medias/music/avatars/tiantangdemogui.jpg"},{"name":"","artist":"","url":"/medias/music/daoshu.mp3","cover":"/medias/music/avatars/daoshu.jpg"}],"friends":[{"name":"","url":"https://zhuanlan.zhihu.com/godweiyang","title":"","introduction":"","avatar":"/medias/avatars/myzhihu.png"}]}},"excerpt":"","more":"<h2 id=\"vlan-\"><a href=\"#vlan-\" class=\"headerlink\" title=\"vlan \"></a>vlan </h2><p>accesstrunknative-taggednative-untagged</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>vlanid0vlan tag<br>native-taggednative-untaggednative vlanporttag</p>\n  <blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li>OVS vlan<ul>\n<li>access<ul>\n<li><ul>\n<li>vlan tagvlan(tag=0)</li>\n<li>vlan tagvlanid0</li>\n</ul>\n</li>\n<li><ul>\n<li>vlan</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>trunk<ul>\n<li><ul>\n<li>trunk<ul>\n<li>vlan</li>\n<li>vlan</li>\n</ul>\n</li>\n<li>trunk<ul>\n<li>vlan tagvlan id</li>\n<li>vlan tag</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li>vlan</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>native-tagged<ul>\n<li><ul>\n<li>vlan tagvlan id</li>\n<li>vlan tagnative vlan</li>\n</ul>\n</li>\n<li><ul>\n<li>vlan</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>native-untagged<ul>\n<li><ul>\n<li>vlan tagvlan id</li>\n<li>vlan tagnative vlan</li>\n</ul>\n</li>\n<li><ul>\n<li>vid == native vlanvlan</li>\n<li>vid != native vlanvlan</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n\n<p>vlan_modenative-taggednative-untaggednative vlan</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"vm\"><a href=\"#vm\" class=\"headerlink\" title=\"vm\"></a>vm</h3><pre><code>ip netns add vm1\nip link add vm1-vif type veth peer name vm1\nip link set vm1 netns vm1\nip netns exec vm1 ip link set vm1 address 00:00:00:00:00:03\nip netns exec vm1 ip addr add 10.10.10.2/24 dev vm1\nip netns exec vm1 ip link set vm1 up\nip link set vm1-vif up\n\nip netns add vm2\nip link add vm2-vif type veth peer name vm2\nip link set vm2 netns vm2\nip netns exec vm2 ip link set vm2 address 00:00:00:00:00:04\nip netns exec vm2 ip addr add 10.10.10.3/24 dev vm2\nip netns exec vm2 ip link set vm2 up\nip link set vm2-vif up</code></pre><h3 id=\"vm\"><a href=\"#vm\" class=\"headerlink\" title=\"vm\"></a>vm</h3><pre><code>ovs-vsctl add-br -br-int\novs-vsctl add-port br-int vm1-vif\novs-vsctl add-port br-int vm2-vif</code></pre><p><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220705225523.png\" alt></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>tcpdumpovs-tcpdumpOVSvlan</p>\n<p>ovs-tcpdumpovs-tcpdump</p>\n<p>tcpdumpvmveth pair</p>\n<p></p>\n<pre><code>vm1-eth0-(tcpdump)vm1-vif(ovs-tcpdump)-OVS Bridge-vm2-vif-vm2-eth0</code></pre><h3 id=\"access\"><a href=\"#access\" class=\"headerlink\" title=\"access\"></a>access</h3><p>vlan/vlan0tagvlan<br>vlanvlanvlan</p>\n<h4 id=\"tag-0\"><a href=\"#tag-0\" class=\"headerlink\" title=\"tag=0\"></a>tag=0</h4><p>tag=0vlanid0tag(vlan_id0vlan)</p>\n<pre><code>ovs-vsctl set Port vm1-vif vlan_mode=access\novs-vsctl set Port vm2-vif vlan_mode=access\novs-vsctl set Port vm1-vif tag=0\novs-vsctl set Port vm2-vif tag=0</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220707221449.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vif port access tag=0vlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220707222722.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220707222806.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan0, vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220711222809.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 11vm1-vif port access tag=0<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220711222511.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220711222607.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm2-vifvlanvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220711223215.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vif accesstag11vm2-vif accesstag=0</li>\n<li>vlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713200925.png\" alt></li>\n</ul>\n<h4 id=\"tag-0-1\"><a href=\"#tag-0-1\" class=\"headerlink\" title=\"tag!=0\"></a>tag!=0</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=access\novs-vsctl set Port vm2-vif vlan_mode=access\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif tag=10</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220707222905.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vif port access tag=10vlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220707223104.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>linux </p>\n<pre><code>ip netns exec vm1 vconfig add vm1 0\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.0 10.10.10.2</code></pre><ul>\n<li>vm1 vlan 0vm1-vif port access vlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710224012.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710224207.png\" alt></li>\n</ul>\n<p><strong>vlan 10</strong><br>linux </p>\n<pre><code>ip netns exec vm1 vconfig add vm1 10\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.10 10.10.10.2</code></pre><ul>\n<li>vm1vlan 10vm1-vif port access <br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710223431.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710223519.png\" alt></li>\n</ul>\n<p><strong> vlan11</strong></p>\n<pre><code>ip netns exec vm1 vconfig add vm1 11\nip netns exec vm1 ifconfig vm1 0.0.0.0\nip netns exec vm1 ifconfig vm1.11 10.10.10.2</code></pre><ul>\n<li>vm1vlan 11vm1-vif port<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713201315.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-viftrunktrunksvm2-vifaccesstag=10vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713201940.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vifaccesstag=10vm2-vifaccesstag=10</li>\n<li>vm1-vif portvlan 10vm2-vifvm2-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713203016.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vifaccesstag=11 vm2-vifaccesstag=10</li>\n<li>vm1-vif portvlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713203212.png\" alt></li>\n</ul>\n<h3 id=\"trunk\"><a href=\"#trunk\" class=\"headerlink\" title=\"trunk\"></a>trunk</h3><p>trunks<br>vlanvlanvlanid0(vlan)<br>vlan<br>trunks<br>vlanvlan_range<br>vlan_rangevlan</p>\n<h5 id=\"trunks\"><a href=\"#trunks\" class=\"headerlink\" title=\"trunks\"></a>trunks</h5><p>vlanovs porttrunk allvlan</p>\n<pre><code>ovs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm2-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif trunks=[]\novs-vsctl set Port vm2-vif trunks=[]</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213515.png\" alt></p>\n<p><strong>vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713203933.png\" alt></li>\n</ul>\n<p><strong>vlan 0</strong></p>\n<ul>\n<li>vm1 vlan 0vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710225805.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710225731.png\" alt></li>\n</ul>\n<p><strong>vlan 10</strong></p>\n<ul>\n<li>vm1vlan 10vm1-vif vlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710230349.png\" alt><br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713204049.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-vifvlanvm2-vif</li>\n<li>vm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713204432.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 10vm2-vif vm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713204647.png\" alt></li>\n</ul>\n<h5 id=\"trunks\"><a href=\"#trunks\" class=\"headerlink\" title=\"trunks\"></a>trunks</h5><p>vlanovs porttrunk</p>\n<pre><code>ovs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif vlan_mode=trunk\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm2-vif trunks=[10]</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213553.png\" alt></p>\n<p><strong>vlan</strong></p>\n<ul>\n<li>vm1 vlanvm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710231215.png\" alt></li>\n</ul>\n<p><strong>vlan 0</strong></p>\n<ul>\n<li>vm1 vlan 0vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710231542.png\" alt></li>\n</ul>\n<p><strong>vlan 10</strong></p>\n<ul>\n<li>vm1 vlan10vm1-vifvm2-vifvm2vlan10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710231015.png\" alt></li>\n</ul>\n<p><strong>vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 0vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220710231738.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-vif trunktrunks=[]</li>\n<li>vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713205845.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 10vm2-vifvm2-vifvlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713210045.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713210138.png\" alt></li>\n</ul>\n<h3 id=\"native-tagged\"><a href=\"#native-tagged\" class=\"headerlink\" title=\"native-tagged\"></a>native-tagged</h3><p>native-vlantag<br>vlannative vlanvlan<br>vlan</p>\n<h4 id=\"native-vlantrunks\"><a href=\"#native-vlantrunks\" class=\"headerlink\" title=\"native vlantrunks\"></a>native vlantrunks</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=native-tagged\novs-vsctl set Port vm2-vif vlan_mode=native-tagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=10</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213626.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifnative vlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713211909.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan 0vm1-vifnative vlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212047.png\" alt></li>\n</ul>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1vlan 10vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212213.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 11vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212418.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-viftrunktrunks=[]</li>\n<li>vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212741.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 10vm2-vifvm2-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713212843.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vif accesstag=11</li>\n<li>vm1-vifvlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213027.png\" alt></li>\n</ul>\n<h4 id=\"native-vlantrunks\"><a href=\"#native-vlantrunks\" class=\"headerlink\" title=\"native vlantrunks\"></a>native vlantrunks</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=native-tagged\novs-vsctl set Port vm2-vif vlan_mode=native-tagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=11\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=11</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213656.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifvlan 11<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213800.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan 0vm1-vifvlan 11<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713213923.png\" alt></li>\n</ul>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1 vlan 10vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214019.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 11vm1-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214125.png\" alt></li>\n</ul>\n<p><strong> vlan 12</strong></p>\n<ul>\n<li>vm1 vlan 12vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214218.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1trunktrunks=[]</li>\n<li>vm1vlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214451.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1accesstag=10</li>\n<li>vm1-vif vlan 10vm2-vifvm2-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214701.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1accesstag=11</li>\n<li>vm1-vifvlan 11vm2-vifvm2-vifvlan<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214834.png\" alt></li>\n</ul>\n<p><strong> vlan 12</strong></p>\n<ul>\n<li>vm1accesstag=12</li>\n<li>vm1-vifvlan 12vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713214945.png\" alt></li>\n</ul>\n<h3 id=\"native-untagged\"><a href=\"#native-untagged\" class=\"headerlink\" title=\"native-untagged\"></a>native-untagged</h3><p>native vlantag<br>vlannative vlanvlan<br>native vlanvlanvlan</p>\n<h4 id=\"native-vlantrunks-1\"><a href=\"#native-vlantrunks-1\" class=\"headerlink\" title=\"native vlantrunks\"></a>native vlantrunks</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=native-untagged\novs-vsctl set Port vm2-vif vlan_mode=native-untagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=10\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=10</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215316.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifvlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215402.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan 0vm1-vifvlan 10<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215454.png\" alt></li>\n</ul>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1 vlan 10vm1-vifvlan <br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215625.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1 vlan 11vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713215748.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-vif trunktrunks=[]</li>\n<li>vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220011.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vif accesstag=10</li>\n<li>vm1-vifvlan 10vm2-vif,vm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220151.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vif accesstag=11</li>\n<li>vm1-vifvlan 11vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220356.png\" alt></li>\n</ul>\n<h4 id=\"native-vlantrunks-1\"><a href=\"#native-vlantrunks-1\" class=\"headerlink\" title=\"native vlantrunks\"></a>native vlantrunks</h4><pre><code>ovs-vsctl set Port vm1-vif vlan_mode=native-untagged\novs-vsctl set Port vm2-vif vlan_mode=native-untagged\novs-vsctl set Port vm1-vif trunks=[10]\novs-vsctl set Port vm1-vif tag=11\novs-vsctl set Port vm2-vif trunks=[10]\novs-vsctl set Port vm2-vif tag=11</code></pre><p><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220442.png\" alt></p>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1vlanvm1-vifvlan 11<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220628.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong></p>\n<ul>\n<li>vm1vlan 0vm1-vifvlan 11<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220741.png\" alt></li>\n</ul>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1vlan 10vm1-vifvlan <br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220829.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1vlan 11vm1-vifvlan <br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713220933.png\" alt></li>\n</ul>\n<p><strong> vlan 12</strong></p>\n<ul>\n<li>vm1vlan 11vm1-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221021.png\" alt></li>\n</ul>\n<p><strong> vlan</strong></p>\n<ul>\n<li>vm1-viftrunk trunks=0</li>\n<li>vm1-vifvlanvm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221252.png\" alt></li>\n</ul>\n<p><strong> vlan 0</strong><br>vlan 0</p>\n<p><strong> vlan 10</strong></p>\n<ul>\n<li>vm1-vifaccess tag=10</li>\n<li>vm1-vifvlan 10vm2-vifvm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221436.png\" alt></li>\n</ul>\n<p><strong> vlan 11</strong></p>\n<ul>\n<li>vm1-vifaccess tag=11</li>\n<li>vm1-vifvlan 11vm2-vifvm2-vifvlanvm2<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221610.png\" alt></li>\n</ul>\n<p><strong> vlan 12</strong></p>\n<ul>\n<li>vm1-vifaccess tag=12</li>\n<li>vm1-vifvlan 12vm2-vif<br><img src=\"/2022/07/05/ovs-port-vlan/img-20220713221726.png\" alt></li>\n</ul>\n<p><strong></strong><br><code>npm install hexo-simple-mindmap</code><br>ovs-tcpdump <code>https://docs.openvswitch.org/en/latest/ref/ovs-tcpdump.8/</code></p>\n"}],"PostAsset":[{"_id":"source/_posts/kafka-producer-consumer/img-20221016191323.png","slug":"img-20221016191323.png","post":"clg8yre9h000cagvtstpma2s5","modified":1,"renderable":0},{"_id":"source/_posts/kafka-producer-consumer/img-20221030190716.png","slug":"img-20221030190716.png","post":"clg8yre9h000cagvtstpma2s5","modified":1,"renderable":0},{"_id":"source/_posts/kafka-topic-and-partition/img-20221030211753.png","slug":"img-20221030211753.png","post":"clg8yre9x000fagvtqfxgev52","modified":1,"renderable":0},{"_id":"source/_posts/kafka-topic-and-partition/img-20221030211824.png","slug":"img-20221030211824.png","post":"clg8yre9x000fagvtqfxgev52","modified":1,"renderable":0},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222348.png","slug":"img-20221106222348.png","post":"clg8yre9x000fagvtqfxgev52","modified":1,"renderable":0},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222536.png","slug":"img-20221106222536.png","post":"clg8yre9x000fagvtqfxgev52","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220710225805.png","slug":"img-20220710225805.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220710230349.png","slug":"img-20220710230349.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220711222511.png","slug":"img-20220711222511.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713200925.png","slug":"img-20220713200925.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713203933.png","slug":"img-20220713203933.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713205845.png","slug":"img-20220713205845.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713212741.png","slug":"img-20220713212741.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713220011.png","slug":"img-20220713220011.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/kafka-producer-consumer/img-20221030200350.png","slug":"img-20221030200350.png","post":"clg8yre9h000cagvtstpma2s5","modified":1,"renderable":0},{"_id":"source/_posts/kafka-producer-consumer/img-20221030193459.png","slug":"img-20221030193459.png","post":"clg8yre9h000cagvtstpma2s5","modified":1,"renderable":0},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222237.png","slug":"img-20221106222237.png","post":"clg8yre9x000fagvtqfxgev52","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220710225731.png","slug":"img-20220710225731.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220710231015.png","slug":"img-20220710231015.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713201315.png","slug":"img-20220713201315.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713203212.png","slug":"img-20220713203212.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713210138.png","slug":"img-20220713210138.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713211909.png","slug":"img-20220713211909.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713212414.png","slug":"img-20220713212414.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713212418.png","slug":"img-20220713212418.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713213027.png","slug":"img-20220713213027.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713214218.png","slug":"img-20220713214218.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713214451.png","slug":"img-20220713214451.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713214945.png","slug":"img-20220713214945.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713215748.png","slug":"img-20220713215748.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713220356.png","slug":"img-20220713220356.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713221021.png","slug":"img-20220713221021.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713221726.png","slug":"img-20220713221726.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220710231738.png","slug":"img-20220710231738.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220711222809.png","slug":"img-20220711222809.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713212047.png","slug":"img-20220713212047.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713212213.png","slug":"img-20220713212213.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713213800.png","slug":"img-20220713213800.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713214125.png","slug":"img-20220713214125.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/win11_wsl/img-20220625215308.png","post":"clg8yre9x000kagvtebzgef0d","slug":"img-20220625215308.png","modified":1,"renderable":1},{"_id":"source/_posts/win11_wsl/img-20220625215633.png","post":"clg8yre9x000kagvtebzgef0d","slug":"img-20220625215633.png","modified":1,"renderable":1},{"_id":"source/_posts/win11_wsl/img-20220625220014.png","post":"clg8yre9x000kagvtebzgef0d","slug":"img-20220625220014.png","modified":1,"renderable":1},{"_id":"source/_posts/win11_wsl/img-20220625220129.png","post":"clg8yre9x000kagvtebzgef0d","slug":"img-20220625220129.png","modified":1,"renderable":1},{"_id":"source/_posts/win11_wsl/img-20220625221705.png","post":"clg8yre9x000kagvtebzgef0d","slug":"img-20220625221705.png","modified":1,"renderable":1},{"_id":"source/_posts/kafka-producer-consumer/img-20221030201350.png","post":"clg8yre9h000cagvtstpma2s5","slug":"img-20221030201350.png","modified":1,"renderable":1},{"_id":"source/_posts/kafka-producer-consumer/img-20221030202942.png","slug":"img-20221030202942.png","post":"clg8yre9h000cagvtstpma2s5","modified":1,"renderable":0},{"_id":"source/_posts/kafka-producer-consumer/img-20221030202957.png","slug":"img-20221030202957.png","post":"clg8yre9h000cagvtstpma2s5","modified":1,"renderable":0},{"_id":"source/_posts/kafka-producer-consumer/producer-structure.jpg","post":"clg8yre9h000cagvtstpma2s5","slug":"producer-structure.jpg","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713215625.png","slug":"img-20220713215625.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/kafka-topic-and-partition/img-20221030211533.png","post":"clg8yre9x000fagvtqfxgev52","slug":"img-20221030211533.png","modified":1,"renderable":1},{"_id":"source/_posts/kafka-topic-and-partition/img-20221030212257.png","post":"clg8yre9x000fagvtqfxgev52","slug":"img-20221030212257.png","modified":1,"renderable":1},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222301.png","slug":"img-20221106222301.png","post":"clg8yre9x000fagvtqfxgev52","modified":1,"renderable":0},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222336.png","post":"clg8yre9x000fagvtqfxgev52","slug":"img-20221106222336.png","modified":1,"renderable":1},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106222544.png","post":"clg8yre9x000fagvtqfxgev52","slug":"img-20221106222544.png","modified":1,"renderable":1},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106223639.png","post":"clg8yre9x000fagvtqfxgev52","slug":"img-20221106223639.png","modified":1,"renderable":1},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106230140.png","post":"clg8yre9x000fagvtqfxgev52","slug":"img-20221106230140.png","modified":1,"renderable":1},{"_id":"source/_posts/kafka-topic-and-partition/img-20221106230222.png","post":"clg8yre9x000fagvtqfxgev52","slug":"img-20221106230222.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713220741.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713220741.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713220933.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713220933.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713220829.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713220829.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713221252.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713221252.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713210045.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713210045.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713214019.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713214019.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220705225523.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220705225523.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220706221734.png","slug":"img-20220706221734.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220707221449.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220707221449.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220707222722.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220707222722.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220707222806.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220707222806.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220707222905.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220707222905.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220707223104.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220707223104.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220710223431.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220710223431.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220710223519.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220710223519.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220710224012.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220710224012.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220710224207.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220710224207.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220710231215.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220710231215.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220710231542.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220710231542.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220711222607.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220711222607.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220711223215.png","slug":"img-20220711223215.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713201940.png","slug":"img-20220713201940.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713203016.png","slug":"img-20220713203016.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713204049.png","slug":"img-20220713204049.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713204432.png","slug":"img-20220713204432.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713204647.png","slug":"img-20220713204647.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713212843.png","slug":"img-20220713212843.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713213515.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713213515.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713213553.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713213553.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713213626.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713213626.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713213656.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713213656.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713213923.png","slug":"img-20220713213923.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713214701.png","slug":"img-20220713214701.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713214834.png","slug":"img-20220713214834.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713215316.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713215316.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713215402.png","slug":"img-20220713215402.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713215454.png","slug":"img-20220713215454.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713220151.png","slug":"img-20220713220151.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713220442.png","post":"clg8yre9x000magvtw1nlgy8p","slug":"img-20220713220442.png","modified":1,"renderable":1},{"_id":"source/_posts/ovs-port-vlan/img-20220713220628.png","slug":"img-20220713220628.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713221436.png","slug":"img-20220713221436.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0},{"_id":"source/_posts/ovs-port-vlan/img-20220713221610.png","slug":"img-20220713221610.png","post":"clg8yre9x000magvtw1nlgy8p","modified":1,"renderable":0}],"PostCategory":[{"post_id":"clg8yre9h000aagvtaxknxyi2","category_id":"clg8yre9h0005agvtyeznptzk","_id":"clg8yre9x000hagvtt3bb8i2w"},{"post_id":"clg8yre9h000cagvtstpma2s5","category_id":"clg8yre9h0005agvtyeznptzk","_id":"clg8yre9x000lagvt88xzdc58"},{"post_id":"clg8yre9x000fagvtqfxgev52","category_id":"clg8yre9h0005agvtyeznptzk","_id":"clg8yre9x000nagvt2epeiz39"},{"post_id":"clg8yre9h0008agvtiuu84svp","category_id":"clg8yre9x000iagvt1ntrjqsl","_id":"clg8yre9x000ragvt3i1hknnf"},{"post_id":"clg8yre920002agvtfhggbhzy","category_id":"clg8yre9h0005agvtyeznptzk","_id":"clg8yre9x000xagvt3wrxloj7"},{"post_id":"clg8yre920002agvtfhggbhzy","category_id":"clg8yre9x000oagvt9y9za8fo","_id":"clg8yre9x000zagvt8hczpfaf"},{"post_id":"clg8yre9h0004agvtk8jmc69n","category_id":"clg8yre9h0005agvtyeznptzk","_id":"clg8yre9x0010agvtjz0y3w2n"},{"post_id":"clg8yre9h0004agvtk8jmc69n","category_id":"clg8yre9x000oagvt9y9za8fo","_id":"clg8yread0013agvtq0iyh5kl"},{"post_id":"clg8yre9x000gagvtu6pktrd9","category_id":"clg8yre9x000wagvt1i4objj8","_id":"clg8yread0016agvttznu0ubw"},{"post_id":"clg8yre9x000kagvtebzgef0d","category_id":"clg8yread0011agvtsathc0lj","_id":"clg8yread001bagvtfks3havt"},{"post_id":"clg8yre9x000magvtw1nlgy8p","category_id":"clg8yread0017agvtrxqmv4xx","_id":"clg8yread001eagvthiaiu4io"}],"PostTag":[{"post_id":"clg8yre920002agvtfhggbhzy","tag_id":"clg8yre9h0006agvtrkq201q4","_id":"clg8yre9x000qagvt10u6z3cw"},{"post_id":"clg8yre920002agvtfhggbhzy","tag_id":"clg8yre9x000eagvt541owyte","_id":"clg8yre9x000sagvtloto28zh"},{"post_id":"clg8yre920002agvtfhggbhzy","tag_id":"clg8yre9x000jagvtbobthuzq","_id":"clg8yre9x000vagvtra0lpf01"},{"post_id":"clg8yre9h0004agvtk8jmc69n","tag_id":"clg8yre9h0006agvtrkq201q4","_id":"clg8yread0014agvty7j54wp4"},{"post_id":"clg8yre9h0004agvtk8jmc69n","tag_id":"clg8yre9x000eagvt541owyte","_id":"clg8yread0015agvtiyue9luy"},{"post_id":"clg8yre9h0004agvtk8jmc69n","tag_id":"clg8yre9x000yagvthksdjfzi","_id":"clg8yread0019agvtk1ikkfye"},{"post_id":"clg8yre9h0008agvtiuu84svp","tag_id":"clg8yread0012agvtj815wqrm","_id":"clg8yread001aagvtuehwd4tj"},{"post_id":"clg8yre9h000aagvtaxknxyi2","tag_id":"clg8yread0018agvta5a7qdn9","_id":"clg8yread001dagvtvdoigtj9"},{"post_id":"clg8yre9h000cagvtstpma2s5","tag_id":"clg8yre9h0006agvtrkq201q4","_id":"clg8yread001gagvtvk6x2mon"},{"post_id":"clg8yre9h000cagvtstpma2s5","tag_id":"clg8yread001cagvtwmi27fi9","_id":"clg8yread001hagvtoobuo3ve"},{"post_id":"clg8yre9x000fagvtqfxgev52","tag_id":"clg8yre9h0006agvtrkq201q4","_id":"clg8yread001jagvtu21623hh"},{"post_id":"clg8yre9x000fagvtqfxgev52","tag_id":"clg8yread001cagvtwmi27fi9","_id":"clg8yread001kagvttef2oxcr"},{"post_id":"clg8yre9x000gagvtu6pktrd9","tag_id":"clg8yread001iagvtds9jcjda","_id":"clg8yread001nagvtgokyccnl"},{"post_id":"clg8yre9x000gagvtu6pktrd9","tag_id":"clg8yread001lagvtcgxn1c2z","_id":"clg8yread001oagvtmg5gvpjx"},{"post_id":"clg8yre9x000kagvtebzgef0d","tag_id":"clg8yread001magvt5db8kakv","_id":"clg8yread001qagvt31utrvk0"},{"post_id":"clg8yre9x000magvtw1nlgy8p","tag_id":"clg8yread001pagvtdh1o0gkw","_id":"clg8yreb4001uagvt98568mqt"},{"post_id":"clg8yre9x000magvtw1nlgy8p","tag_id":"clg8yread001ragvte8zz1f3f","_id":"clg8yreb4001vagvteon7yb99"},{"post_id":"clg8yre9x000magvtw1nlgy8p","tag_id":"clg8yreas001sagvtpr0vhwww","_id":"clg8yreb8001wagvt0c3h78nt"},{"post_id":"clg8yre9x000magvtw1nlgy8p","tag_id":"clg8yreas001tagvthza22mwb","_id":"clg8yreb8001xagvtf3srcfm8"}],"Tag":[{"name":"","_id":"clg8yre9h0006agvtrkq201q4"},{"name":"","_id":"clg8yre9x000eagvt541owyte"},{"name":"","_id":"clg8yre9x000jagvtbobthuzq"},{"name":"","_id":"clg8yre9x000yagvthksdjfzi"},{"name":"Go","_id":"clg8yread0012agvtj815wqrm"},{"name":"Hexo","_id":"clg8yread0018agvta5a7qdn9"},{"name":"Kafka","_id":"clg8yread001cagvtwmi27fi9"},{"name":"OVN","_id":"clg8yread001iagvtds9jcjda"},{"name":"LS","_id":"clg8yread001lagvtcgxn1c2z"},{"name":"WSL","_id":"clg8yread001magvt5db8kakv"},{"name":"OVS","_id":"clg8yread001pagvtdh1o0gkw"},{"name":"VLAN","_id":"clg8yread001ragvte8zz1f3f"},{"name":"ACCESS","_id":"clg8yreas001sagvtpr0vhwww"},{"name":"TRUNK","_id":"clg8yreas001tagvthza22mwb"}]}}