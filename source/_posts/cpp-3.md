---
title: C++基础（作用域、文件）
date: 2019-12-08 15:19:42
tags: [C++]
categories: [学习笔记]
---


 分享一般的C++程序结构以及文件流的相关操作

<!--more-->



#### C++程序结构
- 作用域（主要分为函数原型作用域、局部作用域、文件作用域）

函数原型作用域：是函数原型声明，形参名可以省略
局部作用域（块作用域）：是一对花括号之间“{}”，在此块中声明的变量的作用域从声明处开始一直到花括号结束。
文件作用域：是从声明点开始，一直到文件尾，（程序中声明的全局变量都具有文件作用域，他们在整个文件中都有效）

类作用域：是类X的成员m具有类作用域
命名空间作用域:

- 可见性（指的是变量的有效范围））

变量的可见性是指在程序的某个位置，该变量可以被有效的引用
程序运行到一点，能够引用到的标识符，就是该处可见的标识符

- 生存期（变量从诞生到结束的这段时间）

静态生存期（和程序的运行期相同，直到程序运行结束，他的生存期也就结束了）
自动生存期（在局部作用域内声明的变量都默认为具有自动生存期）
动态生存期（由特定的操作符new 或者 delete，或者由调用函数malloc() 和 free() 动态创建和释放内存空间）

- 编译预处理（文件包含、宏定义、条件编译）

外部变量 （extern int i   //声明一个在其他文件中定义的外部变量i）
外部函数 （在所有类之外的声明的函数，都具有命名空间作用域，如果没有特殊说明，这样的函数都可以在不同的编译单元中被调用，只要在调用之前进行引用性说明即可）

1.所有的预处理命令在程序中都是以“#”引导
2.每一条预处理命令独占一行
3.预处理命令之后不加分号

文件包含（#include <iostream>  #include "myhead.h"）
(用户自己写的头文件，最好使用双引号形式；对于系统提供的头文件，可以采用尖括号，也可以采用双引号)

宏定义（#define PI 3.14159）
带参数的宏定义（#define SUB(a,b) a-b）

条件编译
“#if“ ---- 表达式非零就对代码进行编译
“#ifdef”----如果宏已定义就进行编译
“#idnef”----如果宏未定义就进行编译

- 名称空间（名称的各种可见性范围）

using声明：使特定的标识符可用 using std::cout;
using编译指令:使整个名称空间的标识符可用 using namespace std;

#### 异常处理（try...throw...catch）

1.按照正常的顺序到达try块
2.如果执行try块没有引起异常，那么try块后的catch语句就不执行，直接执行catch块后的语句
3.如果执行try块时有异常被抛出，则通过throw创建的对象中创建一个异常对象，匹配catch块；**若异常的抛出点本身在一个try子句内，则该try语句后的catch子句会按顺序检查异常类型是否与声明的类型匹配，拖异常抛出点本身不在任何try子句内，或抛出的异常与各个catch子句所声明的类型皆不匹配，则结束当前函数的执行没回到函数的调用点，把调用点作为异常的抛出点，然后重复这一过程，直到异常成功的被一个catch语句捕获。**
4.如果未匹配到，则terminate()被调用，
5.如果匹配到一个catch处理程序，则它通过值进行捕获，其形参通过拷贝异常对象进行初始化，

- 异常处理中的构造与析构

**如果catch子句的异常声明是一个值参数，则其初始化方式是赋值被抛掷的异常对象，如果catch子句的异常声明是一个引用，则其初始化方式是使该引用指向异常对象。**

#### 文件操作

- 流（负责在数据的生产者和消费者之间建立联系，并管理数据的流动）
"<<" 插入运算符，用于传送字节到一个输出流对象

- 输入函数

getline()  允许从输入流中输入多个字符，（包括空白字符和行结束符），直到输入终止字符并回车（允许指定输入终止字符，默认值是换行字符），输入结束后，只读取终止字符前的字符
istream &getline(char *pch,int nCount,char delim='\n')
pch适用于存放读取的字符数组
nCount是读取的最大字符个数
delim是分隔字符

get()  完成只输入单个字符的操作

```c++
cin.get()
```

read()  从输入流读取指定数目的字符，并存放在指定的地址中，

```c++
char chs[20];
cin.read(chs,20)
```

seekg（在文件输入流张总，保留着一个指向文件中下一个将读数据的位置的内部指针）
tellg成员函数返回当前文件读指针的位置，这个值时streampos类型


- 输出函数
put()  把一个字符插入到输出流中

```c++
cout.put('A');
```

write() 按要求的长度输出字符串

```c++
cout.write("iamastudent",4);
```
- 文件流（ifstream、ofstream）

```c++
ofstream fout("file.txt");
fout<<"写入文件的东西"<<endl;
```
文件打开模式
ios::app----打开一个输出文件用于在文件尾添加数据
ios::ate----打开一个现存文件，用于输入或输出并查找结尾
ios::in----打开一个文件用于输出，
ios::out----打开一个文件用于输出，对于所有ofstream对象，此模式是隐含指定的



------------

*2019-03-13 11:48:43 星期三
萧逸小杨*

