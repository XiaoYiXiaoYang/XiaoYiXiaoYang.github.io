---
title: C++基础（函数）
date: 2019-12-08 15:13:28
tags: [C++]
categories: [学习笔记]
---

分享后续函数的学习

<!-- more-->



#### 函数

主函数、库函数、用户自定义函数

函数的定义	（函数头、函数体）
函数的返回值	（return ）
形式参数	（主调函数与被调函数联系）

函数调用 	（**如果在某个函数内部声明了被调函数的原型，那么该原型就只能在这个函数内部有效；如果在所有函数之前声明了函数原型，那么该函数原型在本程序文件的任何地方都有效**）

过程：源程序经过编译链接生成.exe文件，存放在外存中，当该.exe可执行程序被运行的时候，首先从外存中将程序代码装载到内存中，如果遇到了对其他函数的调用，则暂停当前函数的执行，保存下一条指令的地址，并且保存现场，然后转入子函数的入口地址，执行子函数，当遇到return语句或者子函数结束时，则恢复之前保存的现场，并从之前保存的返回地址开始继续执行。(有点像中断的执行，也涉及中断嵌套)

函数的参数传递
数值传递
引用传递	(**传别名**)（只有在声明引用时是引用操作符，其他时候都是取地址符）

**递归函数**
直接调用自身，就是指在一个函数的函数体中出现了对自身的调用语句
间接自身调用，就是一个函数func1,调用另一个函数func2，而函数func2中又调用了函数func1，于是构成间接递归

**内联函数**（不在函数调用时发生控制转移，而是在编译时把函数体嵌入每一个调用处）
内联函数体内一般不能有复杂的循环语句和switch语句
内联函数声明和定义前必须加关键字inline
内联函数不能进行异常接口声明

带默认形参值的函数（**从右向左顺序声明**）
当函数声明时定义了参数的默认值，则函数实现的地方不需要再次定义默认值

**函数重载**(**具有相同的名称，形参的个数或类型不同**)

**函数模板**
函数模板可以用来创建一个通用功能的函数，以支持多种数据类型，简化了重载函数的函数体设计。

辗转相除法
设两个数a，b，其中a做被除数，b做除数，r为余数。其算法过程如下：
1.大数放在a中，小数放在b中
2.求a/b的余数r
3.若r等于0，则b为最大公约数
4.如果r不等于0，则把b的值给a，r的值给b
5.返回到第二步

**内联函数**（不在函数调用时发生控制转移，而是在编译时把函数体嵌入每一个调用处）
内联函数体内一般不能有复杂的循环语句和switch语句
内联函数声明和定义前必须加关键字inline
内联函数不能进行异常接口声明

```c++
{
    int num1,num2;   //num1为随机数,num2为用户猜的数字
int i=0;         //猜的次数
srand(time(0));  //时间种子
    num1=rand()%100+1;     //随机一个1~100的数字
    cout<<"已经随机好一个1~100的数字"<<endl;
    cout<<"请输入您的猜测"<<endl;
    do
    {
        cin>>num2;    //用户输入猜测
        //对用户的输入进行判断
        if(num2>num1)
        {
            cout<<"猜测偏大"<<endl;
        }
        else if(num2<num1)
        {
            cout<<"猜测偏小"<<endl;
        }
        i++;     //猜测次数累加
    } while(num2!=num1);
    cout<<"恭喜你，猜对了"<<endl;
    cout<<"一共猜了"<<i<<"次"<<endl;
    return 0;
}

```



------



取数：编写一个函数getbits，从一个数16位的数中取出某几位（即这几位保留原值，其余位均置0）。函数调用形式为getbits(value，sbit，ebit)。其中，value为该数的值，sbit为欲取出的第1位，ebit为欲取出的最后1位。并要求把这几位数以2进制形式打印出来。例如：
getbits（01357，5，8）
表示对八进制数1357（对应2进制数为0000 001 011 101 111），取出其从左面起的第5位到第8位，即0010。

```c++
void getbits(short value,int sbit,int ebit)
{
    int i;       //循环变量
    int num[20];//为数组预分配20个数字的空间，用来存放取出的二进制位
    cout<<"该数值的二进制形式为："<<endl;
    for(i=1; i<=16; i++) //打印该数值的二进制形式，方便验证
    {
        int temp;         //临时变量
        temp=value>>(16-i);//位运算—右移
        num[i]=temp&1;    //取出某一位存在数组中
        cout<<num[i]<<" ";
    }
    cout<<endl;
    cout<<"\n取出第"<<sbit<<"位到第"<<ebit<<"位 "<<endl;
    for(int i=sbit;i<=ebit;i++) //循环输出数字
    {
        cout<<num[i]<<" ";    
}

```



------



求cos(x)的近似值：（不用标准c++函数cos），其中x的值为弧度，要求计算精度达到1e-6。求cos(x)的近似计算公式如下：

$$cos x = 1-x^2/2!+x^4/4!-x^6/6!+..$$

```c++
int main()
{
   double angle;//角度值
    cout<<"请输入角度值:\t";
    cin>>angle;
    double radian=angle*PI/180;//转换为弧度值
    while(1)
    {
    int t=angle/90;  //角度与90的比值
	if(t%2==1)       //比值与2取余等于1  
	  {
        cout<<"该角度是y轴上的角"<<endl;
        cout<<"cos "<<angle<<"= 0"<<endl;
        break;
   	 }
    else
    {
    cout<<"该角度弧度值为"<<radian<<endl;
    //调用库函数，参数是弧度
    cout<<"直接调用库函数算 cos "<<angle<<"= "<<cos(radian)<<endl;
    cout<<"调用函数计算     cos "<<angle<<"= "<<cosvalue(radian)<<endl;
    break ;
    }
    }
return 0;
}
double cosvalue(double x)
{
    double temp=x;  //x赋值给临时变量
    double sum1=1;  //求和初始值为1
    int n=2;        //阶乘初始值为2
    int i=1;       //-1的i次方，初始值为1
    while(fabs(temp)>=pow(10,-6))//绝对值每一项精度达到1e-6
    {
        //-1的i次幂，x的n次幂比值n的阶乘
        temp=pow(-1,i)*pow(x,n)/fac(n);
        sum1+=temp;//每一项叠加赋值给sum1
        n=n+2;     //阶乘的次数每次加2
        i++;       //-1的i次幂每次加1
    }
    return sum1;
}
double fac(double n)//计算n的阶乘函数
{
    double sum2=1;
    while(n>0)
    {
        sum2*=n;
        n--;
    }
    return sum2;
}

```

------------



*2019-03-10 23:19:52 星期日
萧逸小杨*

