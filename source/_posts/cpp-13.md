---
title: 内联函数与宏
date: 2019-12-14 22:47:33
tags: [C++]
categories: [技术分享]
---

 同为展开，但有不同

<!--more-->

### 内联函数

在每个调用点上内联地展开，函数的代码被放入符号表中，在使用时直接进行替换，没有了调用的开销

### 宏

C++宏定义将一个标识符定义为一个字符串，源程序中该标识符在预处理阶段都被字符醋含替换

### 不同

内联函数在编译时展开，宏在预处理阶段展开

在展开时，内联函数被内嵌到目标代码中，而宏只是一个简单的文本替换

内联函数可以完成类型检测、语句是否正确等编译功能，而宏不具备

宏在定义时要小心处理宏参数，(一般把参数用括号括起来，否则容易出现二义性)，而内联函数不会


### 建议

内联是以空间换时间，当代码很长或者有循环和递归的话不适合用内联

inline对编译器只是一种建议，如果函数体内有循环，递归，编译器优化会忽略掉内联







2019-07-29 22:22:43 星期一