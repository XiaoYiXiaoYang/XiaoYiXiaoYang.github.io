---
title: 计算机网络--ICMP
date: 2019-12-30 20:42:07
tags: [计算机网络]
categories: [Network]
---

<center>
 网际控制报文协议ICMP
</center>

<!--more-->

为了更有效的转发IP数据包和提高交付成功的机会，在网际层使用了网际控制报文协议ICMP

ICMP允许主机或路由器报告差错情况和提供有关异常情况的报告

ICMP报文是装在IP数据报中，作为其中的数据部分

ICMP报文作为IP层数据报的数据，加上数据报的首部，组成IP数据报发送出去



### 报文种类

**ICMP差错报告报文**

| 种类         | 类型值 | 类型             |
| ------------ | ------ | ---------------- |
| 差错报告报文 | 3      | 终点不可达       |
|              | 11     | 时间超过         |
|              | 12     | 参数问题         |
|              | 5      | 改变路由         |
| 询问路由     | 8或0   | 回送请求或回答   |
|              | 12     | 时间戳请求或回答 |



1.终点不可达：当路由器或主机不能交付数据报时就向源点发送终点不可达报文

2.时间超过：TTL ，跳数超过，路由器收到生存时间为0的数据报，除丢弃该数据报外，还向源点发送时间超过报文

3.参数问题：当路由器或目的主机收到的数据报的首部中有的字段的值不正确，就丢弃该数据报外，还向源点发送参数问题报文

4.改变路由：路由器把改变路由报文发送给主机，让主机知道下次应该将数据报发送给另外的路由器(可通过更好的路由)



**ICMP询问报文**

1.回送请求和回答：是主机或路由器向一个特定的目的主机发出的询问


2.时间戳请求和回答：请某台主机或路由器回答当前的日期和时间




#### ICMP应用

ping命令：**是应用层直接使用网络层ICMP的例子，没有通过运输层的TCP或UDP**。





2019-10-25 20:28:50 星期五