---
title: 计算机网络----ARP
date: 2019-12-30 20:38:52
tags: [计算机网络]
categories: [学习笔记]
---

<center>
 ARP--地址解析协议，由IP地址解析为MAC物理地址
</center>

<!--more-->

**IP地址与硬件地址**

物理地址是数据链路层与物理层使用的地址，IP地址是网络层和以上各层使用的地址

在发送数据时，数据从高层下到低层，然后才到通信链路上传输，使用IP地址的P数据包一旦交给了数据链路层，就被封装成了MAC帧，MAC帧在传送时使用的源地址和目的地址都是硬件地址

连接通信链路的设备在收到MAC帧之，根据MAC帧首部的硬件地址决定收下或者丢弃，只有在剥去MAC帧的首部和尾部后把MAC层的数据上交给网络层后，网络层才能在IP数据包中找到源IP地址和目的IP地址

想象【协议栈】

因此连接到两个局域网的路由器也就有两个硬件地址

#### 地址解析协议ARP

IP地址-----》物理地址

每一台主机都设有一个**ARP高速缓存**，里面有本局域网的各追加和路由器的IP地址和物理地址的映射表。这个表动态更新

**例1**；
本局域网：主机A----》主机B

主机A首先在ARP告诉缓存中找有无主机B的IP地址，若有，则直接将其物理地址封装到MAC帧首部，若无，**则运行本机ARP进程，在本局域网向广播发送一个ARP请求分组**

在本局域网的所有主机运行的ARP进程都收到这个ARP请求，

主机B的IP地址与ARP请求分组要查询的IP地址一致，就收下这个ARP请求分组，**并向主机A发送响应分组**，其余主机的IP地址和请求IP地址不对应，不予理睬。

主机A收到ARP响应分组，将主机B的ip地址和物理地址写入ARP高速缓存

**注意：ARP是解决同一个局域网上的主机或路由器的IP地址和硬件地址的映射问题
**

**1**：

本局域网：主机A----》本局域网：主机B
主机A发送ARP请求分组，找到主机B的物理地址


**2**

本局域网：主机A----》另一个局域网：主机B
主机A发送ARP请求分组，找到本局域网和其他局域网互连的路由器R1的物理地址，剩下的工作交给路由器R1，
(R1 做的事情就是 3 、4)

**3**

本局域网：路由器R1------》本局域网：主机B
路由器R1发送ARP请求分组，找到主机B的物理地址


**4**

本局域网：路由器R1----》另一个局域网：主机B
路由器R1发送ARP请求分组，找到连接在另一个局域网上的路由器R2的物理地址，剩下的工作交给R2


**ARP对保存在高速缓存中的每一个映射地址项目都设置生存时间，凡超过生存时间的项目就从高速缓存中删除**



2019-10-25 16:28:31 星期五